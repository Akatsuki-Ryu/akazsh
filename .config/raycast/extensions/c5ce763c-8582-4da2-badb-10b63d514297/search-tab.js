"use strict";var ft=Object.create;var B=Object.defineProperty;var dt=Object.getOwnPropertyDescriptor;var ht=Object.getOwnPropertyNames;var pt=Object.getPrototypeOf,mt=Object.prototype.hasOwnProperty;var gt=(e,t)=>{for(var r in t)B(e,r,{get:t[r],enumerable:!0})},ke=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of ht(t))!mt.call(e,a)&&a!==r&&B(e,a,{get:()=>t[a],enumerable:!(n=dt(t,a))||n.enumerable});return e};var T=(e,t,r)=>(r=e!=null?ft(pt(e)):{},ke(t||!e||!e.__esModule?B(r,"default",{value:e,enumerable:!0}):r,e)),bt=e=>ke(B({},"__esModule",{value:!0}),e);var Zt={};gt(Zt,{default:()=>nt});module.exports=bt(Zt);var te=require("@raycast/api"),rt=require("react");var kt=require("@raycast/api");var Ee=T(require("fs"));var re=T(require("path"));var yt=require("@raycast/api"),wt=()=>{if(!process.env.HOME)throw new Error("$HOME environment variable is not set.");return re.default.join(process.env.HOME,"Library")};var xe=()=>re.default.join(wt(),...ve);var $t=()=>{try{let e=xe(),t=Ee.default.readFileSync(e,"utf-8"),r=JSON.parse(t).profile.info_cache;return r?Object.keys(r)[0]:"Default"}catch{return"Default"}};var ve=["Application Support","Google","Chrome","Local State"],G=$t(),ne="CHROME_PROFILE_KEY";var Se=`
  # \u{1F6A8}Error: Google Chrome browser is not installed
  ## This extension depends on Google Chrome browser. You must install it to continue.

  If you have [Homebrew](https://brew.sh/) installed then press \u23CE (Enter Key) to install Google Chrome browser.

  [Click here](https://www.google.com/chrome/) if you want to download manually.

  [![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`;var Te=`
# \u{1F6A8}Error: Something happened while trying to run your command

[![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`,H="An Error Occurred",K="Google Chrome not installed";var xt=require("react/jsx-runtime");var Pe=require("react"),$=require("@raycast/api"),ae=require("child_process");var _e=require("os"),Re=require("path"),J=require("react/jsx-runtime"),vt=(()=>{try{return(0,ae.execSync)("brew --prefix",{encoding:"utf8"}).trim()}catch{return(0,_e.cpus)()[0].model.includes("Apple")?"/opt/homebrew":"/usr/local"}})();function Ae(){return(0,Re.join)(vt,"bin/brew")}function Et(e){try{return(0,ae.execSync)(`${Ae()} install --cask ${e}`,{maxBuffer:10*1024*1024})}catch(t){let r=t;throw r&&r.code===127?(r.stderr=`Brew executable not found at ${Ae()}`,r):t}}function Ce(){let[e,t]=(0,Pe.useState)(!0);return(0,J.jsx)($.Detail,{actions:(0,J.jsx)($.ActionPanel,{children:e&&(0,J.jsx)($.Action,{title:"Install with Homebrew",onAction:async()=>{if(!e)return;let r=new $.Toast({style:$.Toast.Style.Animated,title:"Installing..."});await r.show();try{Et("google-chrome"),await r.hide()}catch{await r.hide(),await(0,$.showToast)($.Toast.Style.Failure,H,"An unknown error occurred while trying to install")}r.title="Installed! Please go back and try again.",r.style=$.Toast.Style.Success,await r.show(),t(!1)}})}),markdown:Se})}var L=require("@raycast/api");var Oe=require("react/jsx-runtime");function Ie(){return(0,L.showToast)(L.Toast.Style.Failure,H,"Something happened while trying to run your command"),(0,Oe.jsx)(L.Detail,{markdown:Te})}var i=require("@raycast/api");var Ue=T(require("node:process"),1),Le=require("node:util"),oe=require("node:child_process"),St=(0,Le.promisify)(oe.execFile);async function C(e,{humanReadableOutput:t=!0,signal:r}={}){if(Ue.default.platform!=="darwin")throw new Error("macOS only");let n=t?[]:["-ss"],a={};r&&(a.signal=r);let{stdout:o}=await St("osascript",["-e",e,n],a);return o.trim()}var D=require("@raycast/api");var f=T(require("react")),c=require("@raycast/api");var Ne=Object.prototype.hasOwnProperty;function Z(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Z(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(Ne.call(e,r)&&++n&&!Ne.call(t,r)||!(r in t)||!Z(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var I=T(require("node:fs")),Y=T(require("node:path"));var ze=T(require("node:child_process")),je=require("node:buffer"),N=T(require("node:stream")),Be=require("node:util");var Ge=require("react/jsx-runtime");var He=require("node:url"),se=globalThis;function Tt(e){let t=(0,f.useRef)(e),r=(0,f.useRef)(0);return Z(e,t.current)||(t.current=e,r.current+=1),(0,f.useMemo)(()=>t.current,[r.current])}function x(e){let t=(0,f.useRef)(e);return t.current=e,t}function he(e,t){let r=e instanceof Error?e.message:String(e);return(0,c.showToast)({style:c.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??De(e),secondaryAction:t?.primaryAction?De(e):void 0})}var De=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,I.readFileSync)((0,Y.join)(c.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let a=c.environment.isDevelopment||t,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?c.Clipboard.copy(o):(0,c.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function Ke(e,t,r){let n=(0,f.useRef)(0),[a,o]=(0,f.useState)({isLoading:!0}),s=x(e),l=x(r?.abortable),d=x(t||[]),p=x(r?.onError),g=x(r?.onData),m=x(r?.onWillExecute),b=x(r?.failureToastOptions),k=x(a.data),v=(0,f.useRef)(null),y=(0,f.useRef)({page:0}),M=(0,f.useRef)(!1),F=(0,f.useRef)(!0),$e=(0,f.useRef)(50),P=(0,f.useCallback)(()=>(l.current&&(l.current.current?.abort(),l.current.current=new AbortController),++n.current),[l]),_=(0,f.useCallback)((...S)=>{let w=P();m.current?.(S),o(u=>({...u,isLoading:!0}));let O=At(s.current)(...S);function U(u){return u.name=="AbortError"||w===n.current&&(p.current?p.current(u):c.environment.launchType!==c.LaunchType.Background&&he(u,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(R){R.hide(),v.current?.(...d.current||[])}},...b.current}),o({error:u,isLoading:!1})),u}return typeof O=="function"?(M.current=!0,O(y.current).then(({data:u,hasMore:R,cursor:lt})=>(w===n.current&&(y.current&&(y.current.cursor=lt,y.current.lastItem=u?.[u.length-1]),g.current&&g.current(u,y.current),R&&($e.current=u.length),F.current=R,o(ut=>y.current.page===0?{data:u,isLoading:!1}:{data:(ut.data||[])?.concat(u),isLoading:!1})),u),u=>(F.current=!1,U(u)))):(M.current=!1,O.then(u=>(w===n.current&&(g.current&&g.current(u),o({data:u,isLoading:!1})),u),U))},[g,p,d,s,o,v,m,y,b,P]);v.current=_;let j=(0,f.useCallback)(()=>{y.current={page:0};let S=d.current||[];return _(...S)},[_,d]),at=(0,f.useCallback)(async(S,w)=>{let O;try{if(w?.optimisticUpdate){P(),typeof w?.rollbackOnError!="function"&&w?.rollbackOnError!==!1&&(O=structuredClone(k.current?.value));let U=w.optimisticUpdate;o(u=>({...u,data:U(u.data)}))}return await S}catch(U){if(typeof w?.rollbackOnError=="function"){let u=w.rollbackOnError;o(R=>({...R,data:u(R.data)}))}else w?.optimisticUpdate&&w?.rollbackOnError!==!1&&o(u=>({...u,data:O}));throw U}finally{w?.shouldRevalidateAfter!==!1&&(c.environment.launchType===c.LaunchType.Background||c.environment.commandMode==="menu-bar"?await j():j())}},[j,k,o,P]),ot=(0,f.useCallback)(()=>{y.current.page+=1;let S=d.current||[];_(...S)},[y,d,_]);(0,f.useEffect)(()=>{y.current={page:0},r?.execute!==!1?_(...t||[]):P()},[Tt([t,r?.execute,_]),l,y]),(0,f.useEffect)(()=>()=>{P()},[P]);let st=r?.execute!==!1?a.isLoading:!1,it={...a,isLoading:st},ct=M.current?{pageSize:$e.current,hasMore:F.current,onLoadMore:ot}:void 0;return{...it,revalidate:j,mutate:at,pagination:ct}}function At(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Pt(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function _t(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}var Rt=Symbol("cache without namespace"),Me=new Map;function pe(e,t,r){let n=r?.cacheNamespace||Rt,a=Me.get(n)||Me.set(n,new c.Cache({namespace:r?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=x(e),s=x(t),l=(0,f.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(m){console.error("Could not get Cache data:",m);return}}),d=(0,f.useMemo)(()=>{if(typeof l<"u"){if(l==="undefined")return;try{return JSON.parse(l,_t)}catch(m){return console.warn("The cached data is corrupted",m),s.current}}else return s.current},[l,s]),p=x(d),g=(0,f.useCallback)(m=>{let b=typeof m=="function"?m(p.current):m;if(typeof b>"u")a.set(o.current,"undefined");else{let k=JSON.stringify(b,Pt);a.set(o.current,k)}return b},[a,o,p]);return[d,g]}var q=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",ie=Symbol.for("signal-exit emitter"),le=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),se[ie])return se[ie];Object.defineProperty(se,ie,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],a=n.indexOf(r);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let a=!1;for(let o of this.listeners[t])a=o(r,n)===!0||a;return t==="exit"&&(a=this.emit("afterExit",r,n)||a),a}},ue=class{onExit(){return()=>{}}load(){}unload(){}},fe=class{#i;#t;#e;#o;#s;#a;#n;#r;constructor(t){this.#i=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new le,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=t,this.#a={};for(let r of this.#r)this.#a[r]=()=>{let n=this.#e.listeners(r),{count:a}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(a+=o.__signal_exit_emitter__.count),n.length===a){this.unload();let s=this.#t.emit("exit",null,r),l=r==="SIGHUP"?this.#i:r;s||t.kill(t.pid,l)}};this.#s=t.reallyExit,this.#o=t.emit}onExit(t,r){if(!q(this.#e))return()=>{};this.#n===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let t of this.#r)try{let r=this.#a[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#l(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(t=>{let r=this.#a[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#o,this.#e.reallyExit=this.#s,this.#t.count-=1)}#c(t){return q(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#s.call(this.#e,this.#e.exitCode)):0}#l(t,...r){let n=this.#o;if(t==="exit"&&q(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let a=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,t,...r)}},ce=null,Ct=(e,t)=>(ce||(ce=q(process)?new fe(process):new ue),ce.onExit(e,t));function It(e,{timeout:t}={}){let r=new Promise((l,d)=>{e.on("exit",(p,g)=>{l({exitCode:p,signal:g,timedOut:!1})}),e.on("error",p=>{d(p)}),e.stdin&&e.stdin.on("error",p=>{d(p)})}),n=Ct(()=>{e.kill()});if(t===0||t===void 0)return r.finally(()=>n());let a,o=new Promise((l,d)=>{a=setTimeout(()=>{e.kill("SIGTERM"),d(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},t)}),s=r.finally(()=>{clearTimeout(a)});return Promise.race([o,s]).finally(()=>n())}var de=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function Ot(e){let{encoding:t}=e,r=t==="buffer",n=new N.default.PassThrough({objectMode:!1});t&&t!=="buffer"&&n.setEncoding(t);let a=0,o=[];return n.on("data",s=>{o.push(s),a+=s.length}),n.getBufferedValue=()=>r?Buffer.concat(o,a):o.join(""),n.getBufferedLength=()=>a,n}async function Fe(e,t){let r=Ot(t);return await new Promise((n,a)=>{let o=s=>{s&&r.getBufferedLength()<=je.constants.MAX_LENGTH&&(s.bufferedData=r.getBufferedValue()),a(s)};(async()=>{try{await(0,Be.promisify)(N.default.pipeline)(e,r),n()}catch(s){o(s)}})(),r.on("data",()=>{r.getBufferedLength()>8e7&&o(new de)})}),r.getBufferedValue()}async function We(e,t){e.destroy();try{return await t}catch(r){return r.bufferedData}}async function Ut({stdout:e,stderr:t},{encoding:r},n){let a=Fe(e,{encoding:r}),o=Fe(t,{encoding:r});try{return await Promise.all([n,a,o])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},We(e,a),We(t,o)])}}function Lt(e){let t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}function Ve(e,t){return e.stripFinalNewline?Lt(t):t}function Nt({timedOut:e,timeout:t,signal:r,exitCode:n}){return e?`timed out after ${t} milliseconds`:r!=null?`was killed with ${r}`:n!=null?`failed with exit code ${n}`:"failed"}function Dt({stdout:e,stderr:t,error:r,signal:n,exitCode:a,command:o,timedOut:s,options:l,parentError:d}){let g=`Command ${Nt({timedOut:s,timeout:l?.timeout,signal:n,exitCode:a})}: ${o}`,m=r?`${g}
${r.message}`:g,b=[m,t,e].filter(Boolean).join(`
`);return r?r.originalMessage=r.message:r=d,r.message=b,r.shortMessage=m,r.command=o,r.exitCode=a,r.signal=n,r.stdout=e,r.stderr=t,"bufferedData"in r&&delete r.bufferedData,r}function Mt({stdout:e,stderr:t,error:r,exitCode:n,signal:a,timedOut:o,command:s,options:l,parentError:d}){if(r||n!==0||a!==null)throw Dt({error:r,exitCode:n,signal:a,stdout:e,stderr:t,command:s,timedOut:o,options:l,parentError:d});return e}function Q(e,t){try{let r=s=>s.startsWith("http")?s:`https://${s}`,a=(typeof e=="string"?new He.URL(r(e)):e).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:t?.fallback??c.Icon.Link,mask:t?.mask};case"apple":return{source:t?.fallback??c.Icon.Link,mask:t?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${a}.ico`,fallback:t?.fallback??c.Icon.Link,mask:t?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${t?.size??64}&domain=${a}`,fallback:t?.fallback??c.Icon.Link,mask:t?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${a}&size=${t?.size??64}`,fallback:t?.fallback??c.Icon.Link,mask:t?.mask}}}catch(r){return console.error(r),c.Icon.Link}}async function Je(e,t,r){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:a,timeout:o,...s}=Array.isArray(t)?r||{}:t||{},l=n!==!1?[]:["-ss"];a==="JavaScript"&&l.push("-l","JavaScript"),Array.isArray(t)&&l.push("-",...t);let d=ze.default.spawn("osascript",l,{...s,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),p=It(d,{timeout:o??1e4});d.stdin.end(e);let[{error:g,exitCode:m,signal:b,timedOut:k},v,y]=await Ut(d,{encoding:"utf8"},p),M=Ve({stripFinalNewline:!0},v),F=Ve({stripFinalNewline:!0},y);return Mt({stdout:M,stderr:F,error:g,exitCode:m,signal:b,timedOut:k,command:"osascript",options:r,parentError:new Error})}var A=class e{constructor(t,r,n,a,o,s){this.title=t;this.url=r;this.favicon=n;this.windowsId=a;this.tabIndex=o;this.sourceLine=s}static TAB_CONTENTS_SEPARATOR="~~~";static parse(t){let r=t.split(this.TAB_CONTENTS_SEPARATOR);return new e(r[0],r[1],r[2],+r[3],+r[4],t)}key(){return`${this.windowsId}${e.TAB_CONTENTS_SEPARATOR}${this.tabIndex}`}urlWithoutScheme(){try{return this.url.replace(/(^\w+:|^)\/\//,"").replace("www.","")}catch{return this.url}}realFavicon(){try{return new URL(this.favicon||"/favicon.ico",this.url).href}catch{return this.favicon||""}}googleFavicon(){try{return Q(this.url)}catch{return{source:""}}}};async function Ze(e){let t=e?`execute t javascript \xAC
        "document.head.querySelector('link[rel~=icon]') ? document.head.querySelector('link[rel~=icon]').href : '';"`:'""';await X();try{return(await C(`
      set _output to ""
      tell application "Google Chrome"
        repeat with w in windows
          set _w_id to get id of w as inches as string
          set _tab_index to 1
          repeat with t in tabs of w
            set _title to get title of t
            set _url to get URL of t
            set _favicon to ${t}
            set _output to (_output & _title & "${A.TAB_CONTENTS_SEPARATOR}" & _url & "${A.TAB_CONTENTS_SEPARATOR}" & _favicon & "${A.TAB_CONTENTS_SEPARATOR}" & _w_id & "${A.TAB_CONTENTS_SEPARATOR}" & _tab_index & "\\n")
            set _tab_index to _tab_index + 1
          end repeat
        end repeat
      end tell
      return _output
  `)).split(`
`).filter(n=>n.length!==0).map(n=>A.parse(n))}catch(r){return r.message.includes(`Can't get application "Google Chrome"`)&&D.LocalStorage.removeItem("is-installed"),await X(),[]}}async function W({url:e,query:t,profileCurrent:r,profileOriginal:n,openTabInProfile:a}){await X();let o="",s=l=>`
    set profile to quoted form of "${l}"
    set link to quoted form of "${e||"about:blank"}"
    do shell script "open -na 'Google Chrome' --args --profile-directory=" & profile & " " & link
  `;switch(a){case"default":o=`
        set winExists to false
        tell application "Google Chrome"
            repeat with win in every window
                if index of win is 1 then
                    set winExists to true
                    exit repeat
                end if
            end repeat

            if not winExists then
                make new window
            else
                activate
            end if

            tell window 1
                set newTab to make new tab `+(e?`with properties {URL:"${e}"}`:t?'with properties {URL:"https://www.google.com/search?q='+t+'"}':"")+`
            end tell
        end tell
        return true

  `;break;case"profile_current":o=s(r);break;case"profile_original":o=s(n);break}try{return await Je(o),await(0,D.popToRoot)({clearSearchBar:!0}),!0}catch(l){return await he(l),!1}}async function qe(e){await C(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
    end tell
    return true
  `)}async function Ye(e){await C(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
      close active tab of _wnd
    end tell
    return true
  `)}async function Qe(e){await C(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
      tell active tab of _wnd to reload
    end tell
    return true
  `)}var X=async()=>{if(await D.LocalStorage.getItem("is-installed"))return;if(await C(`
set isInstalled to false
try
    do shell script "osascript -e 'exists application \\"Google Chrome\\"'"
    set isInstalled to true
end try

return isInstalled`)==="false")throw new Error(K);D.LocalStorage.setItem("is-installed",!0)};async function me(e){await X(),await C(`
    set link to quoted form of "${e}"
    do shell script "open -na 'Google Chrome' --args --guest " & link
  `)}var h=require("react/jsx-runtime"),V=class{static NewTab=Wt;static TabList=Vt;static TabHistory=zt};function Wt({query:e,url:t}){let{openTabInProfile:r}=(0,i.getPreferenceValues)(),[n]=pe(ne,G),a="Open Empty Tab";return e?a=`Search "${e}"`:t&&(a=`Open URL "${t}"`),(0,h.jsx)(i.ActionPanel,{title:"New Tab",children:(0,h.jsx)(i.Action,{onAction:()=>W({url:t,query:e,profileCurrent:n,openTabInProfile:r}),title:a})})}function Vt({tab:e,onTabClosed:t}){return(0,h.jsxs)(i.ActionPanel,{title:e.title,children:[(0,h.jsx)(jt,{tab:e}),(0,h.jsx)(Gt,{tab:e}),(0,h.jsx)(i.Action,{title:"Open in Guest Window",icon:{source:i.Icon.Person},onAction:async()=>{try{await me(e.url),await(0,i.closeMainWindow)()}catch(r){throw r instanceof Error?new Error(r.message):r}}}),(0,h.jsx)(i.Action.CopyToClipboard,{title:"Copy URL",content:e.url}),(0,h.jsx)(i.Action.CopyToClipboard,{title:"Copy Title",content:e.title,shortcut:{modifiers:["cmd","shift"],key:"enter"}}),(0,h.jsx)(Bt,{tab:e,onTabClosed:t}),(0,h.jsx)(i.ActionPanel.Section,{children:(0,h.jsx)(i.Action.CreateQuicklink,{quicklink:{link:e.url,name:e.title,application:"Google Chrome"},shortcut:{modifiers:["cmd"],key:"s"}})})]})}function zt({title:e,url:t,profile:r}){let{openTabInProfile:n}=(0,i.getPreferenceValues)(),[a]=pe(ne,G);return(0,h.jsxs)(i.ActionPanel,{title:e,children:[(0,h.jsx)(i.Action,{onAction:()=>W({url:t,profileOriginal:r,profileCurrent:a,openTabInProfile:n}),title:"Open"}),(0,h.jsx)(i.Action,{title:"Open in Guest Window",icon:{source:i.Icon.Person},onAction:async()=>{await me(t),await(0,i.closeMainWindow)()}}),(0,h.jsxs)(i.ActionPanel.Section,{title:"Open in profile",children:[(0,h.jsx)(i.Action,{onAction:()=>W({url:t,profileOriginal:r,profileCurrent:a,openTabInProfile:"profile_current"}),title:"Open in Current Profile"}),(0,h.jsx)(i.Action,{onAction:()=>W({url:t,profileOriginal:r,profileCurrent:a,openTabInProfile:"profile_original"}),title:"Open in Original Profile"})]}),(0,h.jsx)(i.Action.CopyToClipboard,{title:"Copy URL",content:t,shortcut:{modifiers:["cmd"],key:"c"}})]})}function jt(e){async function t(){try{await qe(e.tab),await(0,i.closeMainWindow)()}catch(r){throw r instanceof Error?new Error("Issue with tab: '"+e.tab.sourceLine+`'
`+r.message):r}}return(0,h.jsx)(i.ActionPanel.Item,{title:"Open Tab",icon:{source:i.Icon.Eye},onAction:t})}function Bt(e){async function t(){await Ye(e.tab),await(0,i.closeMainWindow)(),e.onTabClosed?.()}return(0,h.jsx)(i.Action,{title:"Close Tab",icon:{source:i.Icon.XMarkCircle},onAction:t,shortcut:{modifiers:["cmd","shift"],key:"w"}})}function Gt(e){async function t(){try{await Qe(e.tab),await(0,i.closeMainWindow)()}catch(r){throw r instanceof Error?new Error("Issue with tab: '"+e.tab.sourceLine+`'
`+r.message):r}}return(0,h.jsx)(i.Action,{title:"Reload Tab",icon:{source:i.Icon.ArrowClockwise},onAction:t,shortcut:{modifiers:["cmd","shift"],key:"r"}})}var E=require("@raycast/api");var z=require("react/jsx-runtime"),ee=class{static TabList=Jt;static TabHistory=Kt};function Ht(e){let t=["javascript:","data:","about:","chrome:","file:"],r=e.toLowerCase().trim();if(t.some(n=>r.startsWith(n)))return{icon:{source:E.Icon.ExclamationMark,tintColor:E.Color.Orange},isInvalid:!0};try{return new URL(e),{icon:Q(e),isInvalid:!1}}catch{return{icon:{source:E.Icon.ExclamationMark,tintColor:E.Color.Orange},isInvalid:!0}}}function Kt({profile:e,entry:{url:t,title:r,id:n},type:a}){let{icon:o,isInvalid:s}=Ht(t);return(0,z.jsx)(E.List.Item,{id:`${e}-${a}-${n}`,title:r,subtitle:t,icon:o,accessories:s?[{text:"\u26A0\uFE0F Invalid URL - Cannot open",tooltip:"This URL uses an unsupported protocol"}]:void 0,actions:(0,z.jsx)(V.TabHistory,{title:r,url:t,profile:e})})}function Jt(e){return(0,z.jsx)(E.List.Item,{title:e.tab.title,subtitle:e.tab.urlWithoutScheme(),keywords:[e.tab.urlWithoutScheme()],actions:(0,z.jsx)(V.TabList,{tab:e.tab,onTabClosed:e.onTabClosed}),icon:e.useOriginalFavicon?e.tab.realFavicon():e.tab.googleFavicon()})}var be=require("react");var et=require("@raycast/api");function Xe(e){if(!e)return{includeTerms:[],excludeTerms:[]};let t=e.trim().split(/\s+/),r=[],n=[];for(let a of t)a.startsWith("\\-")&&a.length>1?r.push(a.slice(1).toLowerCase()):a.startsWith("-")&&a.length>1?n.push(a.slice(1).toLowerCase()):a.length>0&&a!=="-"&&r.push(a.toLowerCase());return{includeTerms:r,excludeTerms:n}}function ge(e,t){let{includeTerms:r,excludeTerms:n}=t,a=r.length===0||r.every(s=>e.includes(s)),o=n.length===0||!n.some(s=>e.includes(s));return a&&o}var ye=require("react/jsx-runtime");function tt(e=""){let{useOriginalFavicon:t}=(0,et.getPreferenceValues)(),[r,n]=(0,be.useState)(),[a,o]=(0,be.useState)(!1),{isLoading:s,data:l}=Ke(async(p,g)=>{let m=await Ze(p),b=Xe(g);return n(void 0),o(m.length===0),b.includeTerms.length===0&&b.excludeTerms.length===0?m:m.filter(k=>{try{let v=`${k.title.toLowerCase()} ${k.urlWithoutScheme().toLowerCase()}`;return ge(v,b)}catch{let v=`${k.title.toLowerCase()} ${k.url.toLowerCase()}`;return ge(v,b)}})},[t,e],{onError(p){p.message===K?n((0,ye.jsx)(Ce,{})):n((0,ye.jsx)(Ie,{}))}});return{data:a?[]:l||[],isLoading:s,errorView:r}}var we=require("react/jsx-runtime");function nt(){let{useOriginalFavicon:e}=(0,te.getPreferenceValues)(),[t,r]=(0,rt.useState)(""),{data:n,errorView:a,isLoading:o}=tt(t);return a??(0,we.jsx)(te.List,{isLoading:o,onSearchTextChange:r,children:n.map(s=>(0,we.jsx)(ee.TabList,{tab:s,useOriginalFavicon:e},s.key()))})}
