"use strict";var Pt=Object.create;var q=Object.defineProperty;var _t=Object.getOwnPropertyDescriptor;var At=Object.getOwnPropertyNames;var Ct=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty;var It=(t,r)=>{for(var e in r)q(t,e,{get:r[e],enumerable:!0})},Ae=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of At(r))!Rt.call(t,a)&&a!==e&&q(t,a,{get:()=>r[a],enumerable:!(n=_t(r,a))||n.enumerable});return t};var A=(t,r,e)=>(e=t!=null?Pt(Ct(t)):{},Ae(r||!t||!t.__esModule?q(e,"default",{value:t,enumerable:!0}):e,t)),Ot=t=>Ae(q({},"__esModule",{value:!0}),t);var mr={};It(mr,{default:()=>kt});module.exports=Ot(mr);var wt=require("@raycast/api"),$t=require("react");var Mt=require("@raycast/api");var De=A(require("fs"));var le=A(require("fs")),B=A(require("path"));var Ce=require("@raycast/api"),Re=()=>{if(!process.env.HOME)throw new Error("$HOME environment variable is not set.");return B.default.join(process.env.HOME,"Library")},Ut=(t,r)=>{let{profilePath:e}=(0,Ce.getPreferenceValues)(),n;return e?n=B.default.join(e,t):n=B.default.join(Re(),...Ue,r??P,t),n};var Q=()=>B.default.join(Re(),...Le),Lt=t=>Ut("Bookmarks",t);function Ie(t){let r=[];return t.type==="folder"?t.children.forEach(e=>{r.push(...Ie(e))}):t.type==="url"&&t.url&&r.push({id:t.id,url:t.url,title:t.name,lastVisited:new Date(t.date_added)}),r}var Dt=t=>{let r=[];return Object.keys(t.roots).forEach(e=>{let n=t.roots[e],a=Ie(n);r.push(...a)}),r},Oe=async t=>{let r=Lt(t);if(!le.default.existsSync(r))throw new Error(X);let e=await le.default.promises.readFile(r,{encoding:"utf-8"});return Dt(JSON.parse(e))};var Nt=()=>{try{let t=Q(),r=De.default.readFileSync(t,"utf-8"),e=JSON.parse(r).profile.info_cache;return e?Object.keys(e)[0]:"Default"}catch{return"Default"}},Ue=["Application Support","Google","Chrome"],Le=["Application Support","Google","Chrome","Local State"],P=Nt(),L="CHROME_PROFILE_KEY",Ne="CHROME_PROFILES_KEY",Me=`
  # \u{1F6A8}Error: Google Chrome browser is not installed
  ## This extension depends on Google Chrome browser. You must install it to continue.

  If you have [Homebrew](https://brew.sh/) installed then press \u23CE (Enter Key) to install Google Chrome browser.

  [Click here](https://www.google.com/chrome/) if you want to download manually.

  [![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`;var Fe=`
# \u{1F6A8}Error: Something happened while trying to run your command

[![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`,ee="An Error Occurred",te="Google Chrome not installed",X="Google Chrome has no bookmarks.";var Ft=require("react/jsx-runtime");var Ve=require("react"),E=require("@raycast/api"),ue=require("child_process");var ze=require("os"),je=require("path"),re=require("react/jsx-runtime"),Wt=(()=>{try{return(0,ue.execSync)("brew --prefix",{encoding:"utf8"}).trim()}catch{return(0,ze.cpus)()[0].model.includes("Apple")?"/opt/homebrew":"/usr/local"}})();function We(){return(0,je.join)(Wt,"bin/brew")}function Vt(t){try{return(0,ue.execSync)(`${We()} install --cask ${t}`,{maxBuffer:10*1024*1024})}catch(r){let e=r;throw e&&e.code===127?(e.stderr=`Brew executable not found at ${We()}`,e):r}}function Be(){let[t,r]=(0,Ve.useState)(!0);return(0,re.jsx)(E.Detail,{actions:(0,re.jsx)(E.ActionPanel,{children:t&&(0,re.jsx)(E.Action,{title:"Install with Homebrew",onAction:async()=>{if(!t)return;let e=new E.Toast({style:E.Toast.Style.Animated,title:"Installing..."});await e.show();try{Vt("google-chrome"),await e.hide()}catch{await e.hide(),await(0,E.showToast)(E.Toast.Style.Failure,ee,"An unknown error occurred while trying to install")}e.title="Installed! Please go back and try again.",e.style=E.Toast.Style.Success,await e.show(),r(!1)}})}),markdown:Me})}var W=require("@raycast/api");var He=require("react/jsx-runtime");function Ge(){return(0,W.showToast)(W.Toast.Style.Failure,ee,"Something happened while trying to run your command"),(0,He.jsx)(W.Detail,{markdown:Fe})}var l=require("@raycast/api");var Ke=A(require("node:process"),1),Je=require("node:util"),fe=require("node:child_process"),zt=(0,Je.promisify)(fe.execFile);async function V(t,{humanReadableOutput:r=!0,signal:e}={}){if(Ke.default.platform!=="darwin")throw new Error("macOS only");let n=r?[]:["-ss"],a={};e&&(a.signal=e);let{stdout:s}=await zt("osascript",["-e",t,n],a);return s.trim()}var G=require("@raycast/api");var d=A(require("react")),f=require("@raycast/api");var Ze=Object.prototype.hasOwnProperty;function ne(t,r){var e,n;if(t===r)return!0;if(t&&r&&(e=t.constructor)===r.constructor){if(e===Date)return t.getTime()===r.getTime();if(e===RegExp)return t.toString()===r.toString();if(e===Array){if((n=t.length)===r.length)for(;n--&&ne(t[n],r[n]););return n===-1}if(!e||typeof t=="object"){n=0;for(e in t)if(Ze.call(t,e)&&++n&&!Ze.call(r,e)||!(e in r)||!ne(t[e],r[e]))return!1;return Object.keys(r).length===n}}return t!==t&&r!==r}var D=A(require("node:fs")),oe=A(require("node:path")),nt=A(require("node:crypto")),at=A(require("node:child_process")),ot=require("node:buffer"),j=A(require("node:stream")),st=require("node:util");var it=require("react/jsx-runtime");var ct=require("node:url"),de=globalThis;function jt(t){let r=(0,d.useRef)(t),e=(0,d.useRef)(0);return ne(t,r.current)||(r.current=t,e.current+=1),(0,d.useMemo)(()=>r.current,[e.current])}function T(t){let r=(0,d.useRef)(t);return r.current=t,r}function we(t,r){let e=t instanceof Error?t.message:String(t);return(0,f.showToast)({style:f.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??e,primaryAction:r?.primaryAction??Ye(t),secondaryAction:r?.primaryAction?Ye(t):void 0})}var Ye=t=>{let r=!0,e="[Extension Name]...",n="";try{let o=JSON.parse((0,D.readFileSync)((0,oe.join)(f.environment.assetsPath,"..","package.json"),"utf8"));e=`[${o.title}]...`,n=`https://raycast.com/${o.owner||o.author}/${o.name}`,(!o.owner||o.access==="public")&&(r=!1)}catch{}let a=f.environment.isDevelopment||r,s=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:a?"Copy Logs":"Report Error",onAction(o){o.hide(),a?f.Clipboard.copy(s):(0,f.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(e)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function $e(t,r,e){let n=(0,d.useRef)(0),[a,s]=(0,d.useState)({isLoading:!0}),o=T(t),c=T(e?.abortable),i=T(r||[]),h=T(e?.onError),u=T(e?.onData),g=T(e?.onWillExecute),w=T(e?.failureToastOptions),S=T(a.data),$=(0,d.useRef)(null),m=(0,d.useRef)({page:0}),k=(0,d.useRef)(!1),_=(0,d.useRef)(!0),Z=(0,d.useRef)(50),x=(0,d.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),y=(0,d.useCallback)((...O)=>{let v=x();g.current?.(O),s(p=>({...p,isLoading:!0}));let M=Bt(o.current)(...O);function F(p){return p.name=="AbortError"||v===n.current&&(h.current?h.current(p):f.environment.launchType!==f.LaunchType.Background&&we(p,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(U){U.hide(),$.current?.(...i.current||[])}},...w.current}),s({error:p,isLoading:!1})),p}return typeof M=="function"?(k.current=!0,M(m.current).then(({data:p,hasMore:U,cursor:St})=>(v===n.current&&(m.current&&(m.current.cursor=St,m.current.lastItem=p?.[p.length-1]),u.current&&u.current(p,m.current),U&&(Z.current=p.length),_.current=U,s(Tt=>m.current.page===0?{data:p,isLoading:!1}:{data:(Tt.data||[])?.concat(p),isLoading:!1})),p),p=>(_.current=!1,F(p)))):(k.current=!1,M.then(p=>(v===n.current&&(u.current&&u.current(p),s({data:p,isLoading:!1})),p),F))},[u,h,i,o,s,$,g,m,w,x]);$.current=y;let I=(0,d.useCallback)(()=>{m.current={page:0};let O=i.current||[];return y(...O)},[y,i]),N=(0,d.useCallback)(async(O,v)=>{let M;try{if(v?.optimisticUpdate){x(),typeof v?.rollbackOnError!="function"&&v?.rollbackOnError!==!1&&(M=structuredClone(S.current?.value));let F=v.optimisticUpdate;s(p=>({...p,data:F(p.data)}))}return await O}catch(F){if(typeof v?.rollbackOnError=="function"){let p=v.rollbackOnError;s(U=>({...U,data:p(U.data)}))}else v?.optimisticUpdate&&v?.rollbackOnError!==!1&&s(p=>({...p,data:M}));throw F}finally{v?.shouldRevalidateAfter!==!1&&(f.environment.launchType===f.LaunchType.Background||f.environment.commandMode==="menu-bar"?await I():I())}},[I,S,s,x]),Y=(0,d.useCallback)(()=>{m.current.page+=1;let O=i.current||[];y(...O)},[m,i,y]);(0,d.useEffect)(()=>{m.current={page:0},e?.execute!==!1?y(...r||[]):x()},[jt([r,e?.execute,y]),c,m]),(0,d.useEffect)(()=>()=>{x()},[x]);let xt=e?.execute!==!1?a.isLoading:!1,vt={...a,isLoading:xt},Et=k.current?{pageSize:Z.current,hasMore:_.current,onLoadMore:Y}:void 0;return{...vt,revalidate:I,mutate:N,pagination:Et}}function Bt(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function qe(t){return typeof t!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))!==null}function Gt(t){return t instanceof URLSearchParams?t.toString():t}function lt(t,r=[]){function e(n){return"update"in t?t.update(n,"utf8"):t.write(n)}return{dispatch:function(n){n=Gt(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,s=Object.prototype.toString.call(n),o=a.exec(s)?.[1]??"unknown:["+s+"]";o=o.toLowerCase();let c=null;if((c=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else r.push(n);if(Buffer.isBuffer(n))return e("buffer:"),e(n.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](n);else throw new Error('Unknown object type "'+o+'"');else{let i=Object.keys(n);i=i.sort(),qe(n)||i.splice(0,0,"prototype","__proto__","constructor"),e("object:"+i.length+":");let h=this;return i.forEach(function(u){h.dispatch(u),e(":"),h.dispatch(n[u]),e(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let s=this;if(e("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(i){s.dispatch(i)});return}let o=[],c=n.map(function(i){let h=Ht(),u=r.slice();return lt(h,u).dispatch(i),o=o.concat(u.slice(r.length)),h.read().toString()});r=r.concat(o),c.sort(),this._array(c,!1)},_date:function(n){e("date:"+n.toJSON())},_symbol:function(n){e("symbol:"+n.toString())},_error:function(n){e("error:"+n.toString())},_boolean:function(n){e("bool:"+n.toString())},_string:function(n){e("string:"+n.length+":"),e(n.toString())},_function:function(n){e("fn:"),qe(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){e("number:"+n.toString())},_xml:function(n){e("xml:"+n.toString())},_null:function(){e("Null")},_undefined:function(){e("Undefined")},_regexp:function(n){e("regex:"+n.toString())},_uint8array:function(n){e("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){e("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){e("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){e("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){e("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){e("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){e("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){e("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){e("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){e("url:"+n.toString())},_map:function(n){e("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){e("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){e("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){e("domwindow")},_bigint:function(n){e("bigint:"+n.toString())},_process:function(){e("process")},_timer:function(){e("timer")},_pipe:function(){e("pipe")},_tcp:function(){e("tcp")},_udp:function(){e("udp")},_tty:function(){e("tty")},_statwatcher:function(){e("statwatcher")},_securecontext:function(){e("securecontext")},_connection:function(){e("connection")},_zlib:function(){e("zlib")},_context:function(){e("context")},_nodescript:function(){e("nodescript")},_httpparser:function(){e("httpparser")},_dataview:function(){e("dataview")},_signal:function(){e("signal")},_fsevent:function(){e("fsevent")},_tlswrap:function(){e("tlswrap")}}}function Ht(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}function Kt(t,r){let e=this[t];return e instanceof Date?`__raycast_cached_date__${e.toISOString()}`:Buffer.isBuffer(e)?`__raycast_cached_buffer__${e.toString("base64")}`:r}function Jt(t,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function Qe(t){let r=nt.default.createHash("sha1");return lt(r).dispatch(t),r.digest("hex")}var Zt=Symbol("cache without namespace"),Xe=new Map;function C(t,r,e){let n=e?.cacheNamespace||Zt,a=Xe.get(n)||Xe.set(n,new f.Cache({namespace:e?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let s=T(t),o=T(r),c=(0,d.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(s.current)}catch(g){console.error("Could not get Cache data:",g);return}}),i=(0,d.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,Jt)}catch(g){return console.warn("The cached data is corrupted",g),o.current}}else return o.current},[c,o]),h=T(i),u=(0,d.useCallback)(g=>{let w=typeof g=="function"?g(h.current):g;if(typeof w>"u")a.set(s.current,"undefined");else{let S=JSON.stringify(w,Kt);a.set(s.current,S)}return w},[a,s,h]);return[i,u]}var z=Symbol();function ut(t,r,e){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:s,...o}=e||{},c=(0,d.useRef)(null),[i,h]=C(Qe(r||[])+s,z,{cacheNamespace:Qe(t)}),u=(0,d.useRef)(i!==z?i:n),g=(0,d.useRef)(void 0),{mutate:w,revalidate:S,...$}=$e(t,r||[],{...o,onData(x,y){g.current=y,o.onData&&o.onData(x,y),!(y&&y.page>0)&&(c.current="promise",u.current=x,h(x))}}),m,k=$.pagination;g.current&&g.current.page>0&&$.data?m=$.data:c.current==="promise"?m=u.current:a&&i!==z?(m=i,k&&(k.hasMore=!0,k.pageSize=i.length)):a&&i===z?m=u.current:i!==z?(m=i,k&&(k.hasMore=!0,k.pageSize=i.length)):m=n;let _=T(m),Z=(0,d.useCallback)(async(x,y)=>{let I;try{if(y?.optimisticUpdate){typeof y?.rollbackOnError!="function"&&y?.rollbackOnError!==!1&&(I=structuredClone(_.current));let N=y.optimisticUpdate(_.current);c.current="cache",u.current=N,h(N)}return await w(x,{shouldRevalidateAfter:y?.shouldRevalidateAfter})}catch(N){if(typeof y?.rollbackOnError=="function"){let Y=y.rollbackOnError(_.current);c.current="cache",u.current=Y,h(Y)}else y?.optimisticUpdate&&y?.rollbackOnError!==!1&&(c.current="cache",u.current=I,h(I));throw N}},[h,w,_,u,c]);return(0,d.useEffect)(()=>{i!==z&&(c.current="cache",u.current=i)},[i]),{data:m,isLoading:$.isLoading,error:$.error,mutate:g.current&&g.current.page>0?w:Z,pagination:k,revalidate:S}}var ae=t=>!!t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function",he=Symbol.for("signal-exit emitter"),me=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),de[he])return de[he];Object.defineProperty(de,he,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,e){this.listeners[r].push(e)}removeListener(r,e){let n=this.listeners[r],a=n.indexOf(e);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,e,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let s of this.listeners[r])a=s(e,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",e,n)||a),a}},ge=class{onExit(){return()=>{}}load(){}unload(){}},be=class{#i;#t;#e;#o;#s;#a;#n;#r;constructor(r){this.#i=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new me,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let e of this.#r)this.#a[e]=()=>{let n=this.#e.listeners(e),{count:a}=this.#t,s=r;if(typeof s.__signal_exit_emitter__=="object"&&typeof s.__signal_exit_emitter__.count=="number"&&(a+=s.__signal_exit_emitter__.count),n.length===a){this.unload();let o=this.#t.emit("exit",null,e),c=e==="SIGHUP"?this.#i:e;o||r.kill(r.pid,c)}};this.#s=r.reallyExit,this.#o=r.emit}onExit(r,e){if(!ae(this.#e))return()=>{};this.#n===!1&&this.load();let n=e?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let e=this.#a[r];e&&this.#e.on(r,e)}catch{}this.#e.emit=(r,...e)=>this.#l(r,...e),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let e=this.#a[r];if(!e)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,e)}catch{}}),this.#e.emit=this.#o,this.#e.reallyExit=this.#s,this.#t.count-=1)}#c(r){return ae(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#s.call(this.#e,this.#e.exitCode)):0}#l(r,...e){let n=this.#o;if(r==="exit"&&ae(this.#e)){typeof e[0]=="number"&&(this.#e.exitCode=e[0]);let a=n.call(this.#e,r,...e);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...e)}},pe=null,Yt=(t,r)=>(pe||(pe=ae(process)?new be(process):new ge),pe.onExit(t,r));function qt(t,{timeout:r}={}){let e=new Promise((c,i)=>{t.on("exit",(h,u)=>{c({exitCode:h,signal:u,timedOut:!1})}),t.on("error",h=>{i(h)}),t.stdin&&t.stdin.on("error",h=>{i(h)})}),n=Yt(()=>{t.kill()});if(r===0||r===void 0)return e.finally(()=>n());let a,s=new Promise((c,i)=>{a=setTimeout(()=>{t.kill("SIGTERM"),i(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),o=e.finally(()=>{clearTimeout(a)});return Promise.race([s,o]).finally(()=>n())}var ye=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function Qt(t){let{encoding:r}=t,e=r==="buffer",n=new j.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,s=[];return n.on("data",o=>{s.push(o),a+=o.length}),n.getBufferedValue=()=>e?Buffer.concat(s,a):s.join(""),n.getBufferedLength=()=>a,n}async function et(t,r){let e=Qt(r);return await new Promise((n,a)=>{let s=o=>{o&&e.getBufferedLength()<=ot.constants.MAX_LENGTH&&(o.bufferedData=e.getBufferedValue()),a(o)};(async()=>{try{await(0,st.promisify)(j.default.pipeline)(t,e),n()}catch(o){s(o)}})(),e.on("data",()=>{e.getBufferedLength()>8e7&&s(new ye)})}),e.getBufferedValue()}async function tt(t,r){t.destroy();try{return await r}catch(e){return e.bufferedData}}async function Xt({stdout:t,stderr:r},{encoding:e},n){let a=et(t,{encoding:e}),s=et(r,{encoding:e});try{return await Promise.all([n,a,s])}catch(o){return Promise.all([{error:o,exitCode:null,signal:o.signal,timedOut:o.timedOut||!1},tt(t,a),tt(r,s)])}}function er(t){let r=typeof t=="string"?`
`:10,e=typeof t=="string"?"\r":13;return t[t.length-1]===r&&(t=t.slice(0,-1)),t[t.length-1]===e&&(t=t.slice(0,-1)),t}function rt(t,r){return t.stripFinalNewline?er(r):r}function tr({timedOut:t,timeout:r,signal:e,exitCode:n}){return t?`timed out after ${r} milliseconds`:e!=null?`was killed with ${e}`:n!=null?`failed with exit code ${n}`:"failed"}function rr({stdout:t,stderr:r,error:e,signal:n,exitCode:a,command:s,timedOut:o,options:c,parentError:i}){let u=`Command ${tr({timedOut:o,timeout:c?.timeout,signal:n,exitCode:a})}: ${s}`,g=e?`${u}
${e.message}`:u,w=[g,r,t].filter(Boolean).join(`
`);return e?e.originalMessage=e.message:e=i,e.message=w,e.shortMessage=g,e.command=s,e.exitCode=a,e.signal=n,e.stdout=t,e.stderr=r,"bufferedData"in e&&delete e.bufferedData,e}function nr({stdout:t,stderr:r,error:e,exitCode:n,signal:a,timedOut:s,command:o,options:c,parentError:i}){if(e||n!==0||a!==null)throw rr({error:e,exitCode:n,signal:a,stdout:t,stderr:r,command:o,timedOut:s,options:c,parentError:i});return t}function ke(t,r){try{let e=o=>o.startsWith("http")?o:`https://${o}`,a=(typeof t=="string"?new ct.URL(e(t)):t).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:r?.fallback??f.Icon.Link,mask:r?.mask};case"apple":return{source:r?.fallback??f.Icon.Link,mask:r?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${a}.ico`,fallback:r?.fallback??f.Icon.Link,mask:r?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${r?.size??64}&domain=${a}`,fallback:r?.fallback??f.Icon.Link,mask:r?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${a}&size=${r?.size??64}`,fallback:r?.fallback??f.Icon.Link,mask:r?.mask}}}catch(e){return console.error(e),f.Icon.Link}}async function ft(t,r,e){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:a,timeout:s,...o}=Array.isArray(r)?e||{}:r||{},c=n!==!1?[]:["-ss"];a==="JavaScript"&&c.push("-l","JavaScript"),Array.isArray(r)&&c.push("-",...r);let i=at.default.spawn("osascript",c,{...o,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),h=qt(i,{timeout:s??1e4});i.stdin.end(t);let[{error:u,exitCode:g,signal:w,timedOut:S},$,m]=await Xt(i,{encoding:"utf8"},h),k=rt({stripFinalNewline:!0},$),_=rt({stripFinalNewline:!0},m);return nr({stdout:k,stderr:_,error:u,exitCode:g,signal:w,timedOut:S,command:"osascript",options:e,parentError:new Error})}async function H({url:t,query:r,profileCurrent:e,profileOriginal:n,openTabInProfile:a}){await mt();let s="",o=c=>`
    set profile to quoted form of "${c}"
    set link to quoted form of "${t||"about:blank"}"
    do shell script "open -na 'Google Chrome' --args --profile-directory=" & profile & " " & link
  `;switch(a){case"default":s=`
        set winExists to false
        tell application "Google Chrome"
            repeat with win in every window
                if index of win is 1 then
                    set winExists to true
                    exit repeat
                end if
            end repeat

            if not winExists then
                make new window
            else
                activate
            end if

            tell window 1
                set newTab to make new tab `+(t?`with properties {URL:"${t}"}`:r?'with properties {URL:"https://www.google.com/search?q='+r+'"}':"")+`
            end tell
        end tell
        return true

  `;break;case"profile_current":s=o(e);break;case"profile_original":s=o(n);break}try{return await ft(s),await(0,G.popToRoot)({clearSearchBar:!0}),!0}catch(c){return await we(c),!1}}async function dt(t){await V(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${t.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${t.tabIndex}
    end tell
    return true
  `)}async function ht(t){await V(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${t.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${t.tabIndex}
      close active tab of _wnd
    end tell
    return true
  `)}async function pt(t){await V(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${t.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${t.tabIndex}
      tell active tab of _wnd to reload
    end tell
    return true
  `)}var mt=async()=>{if(await G.LocalStorage.getItem("is-installed"))return;if(await V(`
set isInstalled to false
try
    do shell script "osascript -e 'exists application \\"Google Chrome\\"'"
    set isInstalled to true
end try

return isInstalled`)==="false")throw new Error(te);G.LocalStorage.setItem("is-installed",!0)};async function xe(t){await mt(),await V(`
    set link to quoted form of "${t}"
    do shell script "open -na 'Google Chrome' --args --guest " & link
  `)}var b=require("react/jsx-runtime"),K=class{static NewTab=or;static TabList=sr;static TabHistory=ir};function or({query:t,url:r}){let{openTabInProfile:e}=(0,l.getPreferenceValues)(),[n]=C(L,P),a="Open Empty Tab";return t?a=`Search "${t}"`:r&&(a=`Open URL "${r}"`),(0,b.jsx)(l.ActionPanel,{title:"New Tab",children:(0,b.jsx)(l.Action,{onAction:()=>H({url:r,query:t,profileCurrent:n,openTabInProfile:e}),title:a})})}function sr({tab:t,onTabClosed:r}){return(0,b.jsxs)(l.ActionPanel,{title:t.title,children:[(0,b.jsx)(cr,{tab:t}),(0,b.jsx)(ur,{tab:t}),(0,b.jsx)(l.Action,{title:"Open in Guest Window",icon:{source:l.Icon.Person},onAction:async()=>{try{await xe(t.url),await(0,l.closeMainWindow)()}catch(e){throw e instanceof Error?new Error(e.message):e}}}),(0,b.jsx)(l.Action.CopyToClipboard,{title:"Copy URL",content:t.url}),(0,b.jsx)(l.Action.CopyToClipboard,{title:"Copy Title",content:t.title,shortcut:{modifiers:["cmd","shift"],key:"enter"}}),(0,b.jsx)(lr,{tab:t,onTabClosed:r}),(0,b.jsx)(l.ActionPanel.Section,{children:(0,b.jsx)(l.Action.CreateQuicklink,{quicklink:{link:t.url,name:t.title,application:"Google Chrome"},shortcut:{modifiers:["cmd"],key:"s"}})})]})}function ir({title:t,url:r,profile:e}){let{openTabInProfile:n}=(0,l.getPreferenceValues)(),[a]=C(L,P);return(0,b.jsxs)(l.ActionPanel,{title:t,children:[(0,b.jsx)(l.Action,{onAction:()=>H({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:n}),title:"Open"}),(0,b.jsx)(l.Action,{title:"Open in Guest Window",icon:{source:l.Icon.Person},onAction:async()=>{await xe(r),await(0,l.closeMainWindow)()}}),(0,b.jsxs)(l.ActionPanel.Section,{title:"Open in profile",children:[(0,b.jsx)(l.Action,{onAction:()=>H({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:"profile_current"}),title:"Open in Current Profile"}),(0,b.jsx)(l.Action,{onAction:()=>H({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:"profile_original"}),title:"Open in Original Profile"})]}),(0,b.jsx)(l.Action.CopyToClipboard,{title:"Copy URL",content:r,shortcut:{modifiers:["cmd"],key:"c"}})]})}function cr(t){async function r(){try{await dt(t.tab),await(0,l.closeMainWindow)()}catch(e){throw e instanceof Error?new Error("Issue with tab: '"+t.tab.sourceLine+`'
`+e.message):e}}return(0,b.jsx)(l.ActionPanel.Item,{title:"Open Tab",icon:{source:l.Icon.Eye},onAction:r})}function lr(t){async function r(){await ht(t.tab),await(0,l.closeMainWindow)(),t.onTabClosed?.()}return(0,b.jsx)(l.Action,{title:"Close Tab",icon:{source:l.Icon.XMarkCircle},onAction:r,shortcut:{modifiers:["cmd","shift"],key:"w"}})}function ur(t){async function r(){try{await pt(t.tab),await(0,l.closeMainWindow)()}catch(e){throw e instanceof Error?new Error("Issue with tab: '"+t.tab.sourceLine+`'
`+e.message):e}}return(0,b.jsx)(l.Action,{title:"Reload Tab",icon:{source:l.Icon.ArrowClockwise},onAction:r,shortcut:{modifiers:["cmd","shift"],key:"r"}})}var R=require("@raycast/api");var J=require("react/jsx-runtime"),se=class{static TabList=hr;static TabHistory=dr};function fr(t){let r=["javascript:","data:","about:","chrome:","file:"],e=t.toLowerCase().trim();if(r.some(n=>e.startsWith(n)))return{icon:{source:R.Icon.ExclamationMark,tintColor:R.Color.Orange},isInvalid:!0};try{return new URL(t),{icon:ke(t),isInvalid:!1}}catch{return{icon:{source:R.Icon.ExclamationMark,tintColor:R.Color.Orange},isInvalid:!0}}}function dr({profile:t,entry:{url:r,title:e,id:n},type:a}){let{icon:s,isInvalid:o}=fr(r);return(0,J.jsx)(R.List.Item,{id:`${t}-${a}-${n}`,title:e,subtitle:r,icon:s,accessories:o?[{text:"\u26A0\uFE0F Invalid URL - Cannot open",tooltip:"This URL uses an unsupported protocol"}]:void 0,actions:(0,J.jsx)(K.TabHistory,{title:e,url:r,profile:t})})}function hr(t){return(0,J.jsx)(R.List.Item,{title:t.tab.title,subtitle:t.tab.urlWithoutScheme(),keywords:[t.tab.urlWithoutScheme()],actions:(0,J.jsx)(K.TabList,{tab:t.tab,onTabClosed:t.onTabClosed}),icon:t.useOriginalFavicon?t.tab.realFavicon():t.tab.googleFavicon()})}var ve=require("react");function gt(t){if(!t)return{includeTerms:[],excludeTerms:[]};let r=t.trim().split(/\s+/),e=[],n=[];for(let a of r)a.startsWith("\\-")&&a.length>1?e.push(a.slice(1).toLowerCase()):a.startsWith("-")&&a.length>1?n.push(a.slice(1).toLowerCase()):a.length>0&&a!=="-"&&e.push(a.toLowerCase());return{includeTerms:e,excludeTerms:n}}function bt(t,r){let{includeTerms:e,excludeTerms:n}=r,a=e.length===0||e.every(o=>t.includes(o)),s=n.length===0||!n.some(o=>t.includes(o));return a&&s}var Ee=require("react/jsx-runtime");function yt(t,r){let[e,n]=(0,ve.useState)(!1),[a,s]=(0,ve.useState)(),{isLoading:o,data:c,revalidate:i}=$e(async(u,g)=>{let w=await Oe(u);s(void 0),n(w.length===0);let S=gt(g||"");return S.includeTerms.length===0&&S.excludeTerms.length===0?w:w.filter($=>{let m=`${$.title.toLowerCase()} ${$.url.toLowerCase()}`;return bt(m,S)})},[t,r],{onError(u){u.message===te?s((0,Ee.jsx)(Be,{})):u.message===X?n(!0):s((0,Ee.jsx)(Ge,{}))}});return{errorView:a,isLoading:o,data:e?[]:c||[],revalidate:i}}var Se=require("@raycast/api"),Te=require("react");var ie=require("fs");var Pe=require("react/jsx-runtime");async function pr(){let t=Q();if(!(0,ie.existsSync)(t))return[{name:"Default",id:"Default"}];let r=await ie.promises.readFile(t,"utf-8"),e=JSON.parse(r).profile.info_cache;return Object.entries(e).map(([n,a])=>({name:a.name,id:n}))}function _e({onProfileSelected:t}){let[r,e]=C(L,P),[n,a]=C(Ne,[{name:"Person 1",id:P}]),{data:s}=ut(pr);return(0,Te.useEffect)(()=>{s&&(a(s),r||(s.length>0?e(s[0].id):e(P)))},[s]),(0,Te.useEffect)(()=>{r&&t?.(r)},[r]),!n||n.length<2?null:(0,Pe.jsx)(Se.List.Dropdown,{tooltip:"Select Chrome Profile",value:r,onChange:e,children:n.map(o=>(0,Pe.jsx)(Se.List.Dropdown.Item,{value:o.id,title:o.name},o.id))})}var ce=require("react/jsx-runtime");function kt(){let[t,r]=(0,$t.useState)(),[e]=C(L,P),{data:n,isLoading:a,errorView:s,revalidate:o}=yt(e,t);return s||(0,ce.jsx)(wt.List,{onSearchTextChange:r,isLoading:a,throttle:!0,searchBarAccessory:(0,ce.jsx)(_e,{onProfileSelected:o}),children:n?.map(c=>(0,ce.jsx)(se.TabHistory,{entry:c,profile:e,type:"Bookmark"},c.id))})}
