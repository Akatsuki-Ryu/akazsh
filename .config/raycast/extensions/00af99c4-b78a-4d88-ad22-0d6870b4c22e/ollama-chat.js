"use strict";var Nx=Object.create;var Xo=Object.defineProperty;var jx=Object.getOwnPropertyDescriptor;var Mx=Object.getOwnPropertyNames;var qx=Object.getPrototypeOf,Dx=Object.prototype.hasOwnProperty;var Ha=(t,e)=>()=>(t&&(e=t(t=0)),e);var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),mg=(t,e)=>{for(var r in e)Xo(t,r,{get:e[r],enumerable:!0})},pg=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Mx(e))!Dx.call(t,s)&&s!==r&&Xo(t,s,{get:()=>e[s],enumerable:!(n=jx(e,s))||n.enumerable});return t};var Ve=(t,e,r)=>(r=t!=null?Nx(qx(t)):{},pg(e||!t||!t.__esModule?Xo(r,"default",{value:t,enumerable:!0}):r,t)),Fx=t=>pg(Xo({},"__esModule",{value:!0}),t);var Tg=E((ac,kg)=>{(function(t,e){typeof ac=="object"&&typeof kg<"u"?e(ac):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(ac,(function(t){"use strict";let e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:o=>`Symbol(${o})`;function r(){}function n(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=n();function a(o){return typeof o=="object"&&o!==null||typeof o=="function"}let i=r,c=Promise,u=Promise.prototype.then,d=Promise.resolve.bind(c),f=Promise.reject.bind(c);function m(o){return new c(o)}function b(o){return d(o)}function y(o){return f(o)}function g(o,l,h){return u.call(o,l,h)}function _(o,l,h){g(g(o,l,h),void 0,i)}function w(o,l){_(o,l)}function S(o,l){_(o,void 0,l)}function T(o,l,h){return g(o,l,h)}function P(o){g(o,void 0,i)}let R=(()=>{let o=s&&s.queueMicrotask;if(typeof o=="function")return o;let l=b(void 0);return h=>g(l,h)})();function k(o,l,h){if(typeof o!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(o,l,h)}function N(o,l,h){try{return b(k(o,l,h))}catch(v){return y(v)}}let ce=16384;class Ce{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(l){let h=this._back,v=h;h._elements.length===ce-1&&(v={_elements:[],_next:void 0}),h._elements.push(l),v!==h&&(this._back=v,h._next=v),++this._size}shift(){let l=this._front,h=l,v=this._cursor,$=v+1,C=l._elements,A=C[v];return $===ce&&(h=l._next,$=0),--this._size,this._cursor=$,l!==h&&(this._front=h),C[v]=void 0,A}forEach(l){let h=this._cursor,v=this._front,$=v._elements;for(;(h!==$.length||v._next!==void 0)&&!(h===$.length&&(v=v._next,$=v._elements,h=0,$.length===0));)l($[h]),++h}peek(){let l=this._front,h=this._cursor;return l._elements[h]}}function x(o,l){o._ownerReadableStream=l,l._reader=o,l._state==="readable"?Je(o):l._state==="closed"?xe(o):Rt(o,l._storedError)}function q(o,l){let h=o._ownerReadableStream;return tr(h,l)}function F(o){o._ownerReadableStream._state==="readable"?Qt(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):ru(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),o._ownerReadableStream._reader=void 0,o._ownerReadableStream=void 0}function we(o){return new TypeError("Cannot "+o+" a stream using a released reader")}function Je(o){o._closedPromise=m((l,h)=>{o._closedPromise_resolve=l,o._closedPromise_reject=h})}function Rt(o,l){Je(o),Qt(o,l)}function xe(o){Je(o),vo(o)}function Qt(o,l){o._closedPromise_reject!==void 0&&(P(o._closedPromise),o._closedPromise_reject(l),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}function ru(o,l){Rt(o,l)}function vo(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}let rp=e("[[AbortSteps]]"),np=e("[[ErrorSteps]]"),nu=e("[[CancelSteps]]"),su=e("[[PullSteps]]"),sp=Number.isFinite||function(o){return typeof o=="number"&&isFinite(o)},d$=Math.trunc||function(o){return o<0?Math.ceil(o):Math.floor(o)};function f$(o){return typeof o=="object"||typeof o=="function"}function Nr(o,l){if(o!==void 0&&!f$(o))throw new TypeError(`${l} is not an object.`)}function Xt(o,l){if(typeof o!="function")throw new TypeError(`${l} is not a function.`)}function h$(o){return typeof o=="object"&&o!==null||typeof o=="function"}function ap(o,l){if(!h$(o))throw new TypeError(`${l} is not an object.`)}function jr(o,l,h){if(o===void 0)throw new TypeError(`Parameter ${l} is required in '${h}'.`)}function au(o,l,h){if(o===void 0)throw new TypeError(`${l} is required in '${h}'.`)}function iu(o){return Number(o)}function ip(o){return o===0?0:o}function m$(o){return ip(d$(o))}function op(o,l){let v=Number.MAX_SAFE_INTEGER,$=Number(o);if($=ip($),!sp($))throw new TypeError(`${l} is not a finite number`);if($=m$($),$<0||$>v)throw new TypeError(`${l} is outside the accepted range of 0 to ${v}, inclusive`);return!sp($)||$===0?0:$}function ou(o,l){if(!cn(o))throw new TypeError(`${l} is not a ReadableStream.`)}function Rs(o){return new Aa(o)}function cp(o,l){o._reader._readRequests.push(l)}function cu(o,l,h){let $=o._reader._readRequests.shift();h?$._closeSteps():$._chunkSteps(l)}function wo(o){return o._reader._readRequests.length}function lp(o){let l=o._reader;return!(l===void 0||!nn(l))}class Aa{constructor(l){if(jr(l,1,"ReadableStreamDefaultReader"),ou(l,"First parameter"),ln(l))throw new TypeError("This stream has already been locked for exclusive reading by another reader");x(this,l),this._readRequests=new Ce}get closed(){return nn(this)?this._closedPromise:y(So("closed"))}cancel(l=void 0){return nn(this)?this._ownerReadableStream===void 0?y(we("cancel")):q(this,l):y(So("cancel"))}read(){if(!nn(this))return y(So("read"));if(this._ownerReadableStream===void 0)return y(we("read from"));let l,h,v=m((C,A)=>{l=C,h=A});return Oa(this,{_chunkSteps:C=>l({value:C,done:!1}),_closeSteps:()=>l({value:void 0,done:!0}),_errorSteps:C=>h(C)}),v}releaseLock(){if(!nn(this))throw So("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");F(this)}}}Object.defineProperties(Aa.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Aa.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function nn(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_readRequests")?!1:o instanceof Aa}function Oa(o,l){let h=o._ownerReadableStream;h._disturbed=!0,h._state==="closed"?l._closeSteps():h._state==="errored"?l._errorSteps(h._storedError):h._readableStreamController[su](l)}function So(o){return new TypeError(`ReadableStreamDefaultReader.prototype.${o} can only be used on a ReadableStreamDefaultReader`)}let up=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class dp{constructor(l,h){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=l,this._preventCancel=h}next(){let l=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?T(this._ongoingPromise,l,l):l(),this._ongoingPromise}return(l){let h=()=>this._returnSteps(l);return this._ongoingPromise?T(this._ongoingPromise,h,h):h()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let l=this._reader;if(l._ownerReadableStream===void 0)return y(we("iterate"));let h,v,$=m((A,D)=>{h=A,v=D});return Oa(l,{_chunkSteps:A=>{this._ongoingPromise=void 0,R(()=>h({value:A,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,F(l),h({value:void 0,done:!0})},_errorSteps:A=>{this._ongoingPromise=void 0,this._isFinished=!0,F(l),v(A)}}),$}_returnSteps(l){if(this._isFinished)return Promise.resolve({value:l,done:!0});this._isFinished=!0;let h=this._reader;if(h._ownerReadableStream===void 0)return y(we("finish iterating"));if(!this._preventCancel){let v=q(h,l);return F(h),T(v,()=>({value:l,done:!0}))}return F(h),b({value:l,done:!0})}}let fp={next(){return hp(this)?this._asyncIteratorImpl.next():y(mp("next"))},return(o){return hp(this)?this._asyncIteratorImpl.return(o):y(mp("return"))}};up!==void 0&&Object.setPrototypeOf(fp,up);function p$(o,l){let h=Rs(o),v=new dp(h,l),$=Object.create(fp);return $._asyncIteratorImpl=v,$}function hp(o){if(!a(o)||!Object.prototype.hasOwnProperty.call(o,"_asyncIteratorImpl"))return!1;try{return o._asyncIteratorImpl instanceof dp}catch{return!1}}function mp(o){return new TypeError(`ReadableStreamAsyncIterator.${o} can only be used on a ReadableSteamAsyncIterator`)}let pp=Number.isNaN||function(o){return o!==o};function Ia(o){return o.slice()}function gp(o,l,h,v,$){new Uint8Array(o).set(new Uint8Array(h,v,$),l)}function oM(o){return o}function $o(o){return!1}function yp(o,l,h){if(o.slice)return o.slice(l,h);let v=h-l,$=new ArrayBuffer(v);return gp($,0,o,l,v),$}function g$(o){return!(typeof o!="number"||pp(o)||o<0)}function _p(o){let l=yp(o.buffer,o.byteOffset,o.byteOffset+o.byteLength);return new Uint8Array(l)}function lu(o){let l=o._queue.shift();return o._queueTotalSize-=l.size,o._queueTotalSize<0&&(o._queueTotalSize=0),l.value}function uu(o,l,h){if(!g$(h)||h===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");o._queue.push({value:l,size:h}),o._queueTotalSize+=h}function y$(o){return o._queue.peek().value}function sn(o){o._queue=new Ce,o._queueTotalSize=0}class Na{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!du(this))throw pu("view");return this._view}respond(l){if(!du(this))throw pu("respond");if(jr(l,1,"respond"),l=op(l,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");$o(this._view.buffer),Ro(this._associatedReadableByteStreamController,l)}respondWithNewView(l){if(!du(this))throw pu("respondWithNewView");if(jr(l,1,"respondWithNewView"),!ArrayBuffer.isView(l))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");$o(l.buffer),Po(this._associatedReadableByteStreamController,l)}}Object.defineProperties(Na.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Na.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ps{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!An(this))throw Ma("byobRequest");return mu(this)}get desiredSize(){if(!An(this))throw Ma("desiredSize");return kp(this)}close(){if(!An(this))throw Ma("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let l=this._controlledReadableByteStream._state;if(l!=="readable")throw new TypeError(`The stream (in ${l} state) is not in the readable state and cannot be closed`);ja(this)}enqueue(l){if(!An(this))throw Ma("enqueue");if(jr(l,1,"enqueue"),!ArrayBuffer.isView(l))throw new TypeError("chunk must be an array buffer view");if(l.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(l.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let h=this._controlledReadableByteStream._state;if(h!=="readable")throw new TypeError(`The stream (in ${h} state) is not in the readable state and cannot be enqueued to`);To(this,l)}error(l=void 0){if(!An(this))throw Ma("error");er(this,l)}[nu](l){bp(this),sn(this);let h=this._cancelAlgorithm(l);return ko(this),h}[su](l){let h=this._controlledReadableByteStream;if(this._queueTotalSize>0){let $=this._queue.shift();this._queueTotalSize-=$.byteLength,$p(this);let C=new Uint8Array($.buffer,$.byteOffset,$.byteLength);l._chunkSteps(C);return}let v=this._autoAllocateChunkSize;if(v!==void 0){let $;try{$=new ArrayBuffer(v)}catch(A){l._errorSteps(A);return}let C={buffer:$,bufferByteLength:v,byteOffset:0,byteLength:v,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(C)}cp(h,l),On(this)}}Object.defineProperties(Ps.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ps.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function An(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableByteStream")?!1:o instanceof Ps}function du(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_associatedReadableByteStreamController")?!1:o instanceof Na}function On(o){if(!w$(o))return;if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;let h=o._pullAlgorithm();_(h,()=>{o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,On(o))},v=>{er(o,v)})}function bp(o){hu(o),o._pendingPullIntos=new Ce}function fu(o,l){let h=!1;o._state==="closed"&&(h=!0);let v=vp(l);l.readerType==="default"?cu(o,v,h):x$(o,v,h)}function vp(o){let l=o.bytesFilled,h=o.elementSize;return new o.viewConstructor(o.buffer,o.byteOffset,l/h)}function xo(o,l,h,v){o._queue.push({buffer:l,byteOffset:h,byteLength:v}),o._queueTotalSize+=v}function wp(o,l){let h=l.elementSize,v=l.bytesFilled-l.bytesFilled%h,$=Math.min(o._queueTotalSize,l.byteLength-l.bytesFilled),C=l.bytesFilled+$,A=C-C%h,D=$,X=!1;A>v&&(D=A-l.bytesFilled,X=!0);let le=o._queue;for(;D>0;){let Se=le.peek(),$e=Math.min(D,Se.byteLength),Le=l.byteOffset+l.bytesFilled;gp(l.buffer,Le,Se.buffer,Se.byteOffset,$e),Se.byteLength===$e?le.shift():(Se.byteOffset+=$e,Se.byteLength-=$e),o._queueTotalSize-=$e,Sp(o,$e,l),D-=$e}return X}function Sp(o,l,h){h.bytesFilled+=l}function $p(o){o._queueTotalSize===0&&o._closeRequested?(ko(o),Ba(o._controlledReadableByteStream)):On(o)}function hu(o){o._byobRequest!==null&&(o._byobRequest._associatedReadableByteStreamController=void 0,o._byobRequest._view=null,o._byobRequest=null)}function xp(o){for(;o._pendingPullIntos.length>0;){if(o._queueTotalSize===0)return;let l=o._pendingPullIntos.peek();wp(o,l)&&(Eo(o),fu(o._controlledReadableByteStream,l))}}function _$(o,l,h){let v=o._controlledReadableByteStream,$=1;l.constructor!==DataView&&($=l.constructor.BYTES_PER_ELEMENT);let C=l.constructor,A=l.buffer,D={buffer:A,bufferByteLength:A.byteLength,byteOffset:l.byteOffset,byteLength:l.byteLength,bytesFilled:0,elementSize:$,viewConstructor:C,readerType:"byob"};if(o._pendingPullIntos.length>0){o._pendingPullIntos.push(D),Pp(v,h);return}if(v._state==="closed"){let X=new C(D.buffer,D.byteOffset,0);h._closeSteps(X);return}if(o._queueTotalSize>0){if(wp(o,D)){let X=vp(D);$p(o),h._chunkSteps(X);return}if(o._closeRequested){let X=new TypeError("Insufficient bytes to fill elements in the given buffer");er(o,X),h._errorSteps(X);return}}o._pendingPullIntos.push(D),Pp(v,h),On(o)}function b$(o,l){let h=o._controlledReadableByteStream;if(gu(h))for(;Cp(h)>0;){let v=Eo(o);fu(h,v)}}function v$(o,l,h){if(Sp(o,l,h),h.bytesFilled<h.elementSize)return;Eo(o);let v=h.bytesFilled%h.elementSize;if(v>0){let $=h.byteOffset+h.bytesFilled,C=yp(h.buffer,$-v,$);xo(o,C,0,C.byteLength)}h.bytesFilled-=v,fu(o._controlledReadableByteStream,h),xp(o)}function Ep(o,l){let h=o._pendingPullIntos.peek();hu(o),o._controlledReadableByteStream._state==="closed"?b$(o):v$(o,l,h),On(o)}function Eo(o){return o._pendingPullIntos.shift()}function w$(o){let l=o._controlledReadableByteStream;return l._state!=="readable"||o._closeRequested||!o._started?!1:!!(lp(l)&&wo(l)>0||gu(l)&&Cp(l)>0||kp(o)>0)}function ko(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0}function ja(o){let l=o._controlledReadableByteStream;if(!(o._closeRequested||l._state!=="readable")){if(o._queueTotalSize>0){o._closeRequested=!0;return}if(o._pendingPullIntos.length>0&&o._pendingPullIntos.peek().bytesFilled>0){let v=new TypeError("Insufficient bytes to fill elements in the given buffer");throw er(o,v),v}ko(o),Ba(l)}}function To(o,l){let h=o._controlledReadableByteStream;if(o._closeRequested||h._state!=="readable")return;let v=l.buffer,$=l.byteOffset,C=l.byteLength,A=v;if(o._pendingPullIntos.length>0){let D=o._pendingPullIntos.peek();$o(D.buffer),D.buffer=D.buffer}if(hu(o),lp(h))if(wo(h)===0)xo(o,A,$,C);else{o._pendingPullIntos.length>0&&Eo(o);let D=new Uint8Array(A,$,C);cu(h,D,!1)}else gu(h)?(xo(o,A,$,C),xp(o)):xo(o,A,$,C);On(o)}function er(o,l){let h=o._controlledReadableByteStream;h._state==="readable"&&(bp(o),sn(o),ko(o),eg(h,l))}function mu(o){if(o._byobRequest===null&&o._pendingPullIntos.length>0){let l=o._pendingPullIntos.peek(),h=new Uint8Array(l.buffer,l.byteOffset+l.bytesFilled,l.byteLength-l.bytesFilled),v=Object.create(Na.prototype);$$(v,o,h),o._byobRequest=v}return o._byobRequest}function kp(o){let l=o._controlledReadableByteStream._state;return l==="errored"?null:l==="closed"?0:o._strategyHWM-o._queueTotalSize}function Ro(o,l){let h=o._pendingPullIntos.peek();if(o._controlledReadableByteStream._state==="closed"){if(l!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(l===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(h.bytesFilled+l>h.byteLength)throw new RangeError("bytesWritten out of range")}h.buffer=h.buffer,Ep(o,l)}function Po(o,l){let h=o._pendingPullIntos.peek();if(o._controlledReadableByteStream._state==="closed"){if(l.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(l.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(h.byteOffset+h.bytesFilled!==l.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(h.bufferByteLength!==l.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(h.bytesFilled+l.byteLength>h.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let $=l.byteLength;h.buffer=l.buffer,Ep(o,$)}function Tp(o,l,h,v,$,C,A){l._controlledReadableByteStream=o,l._pullAgain=!1,l._pulling=!1,l._byobRequest=null,l._queue=l._queueTotalSize=void 0,sn(l),l._closeRequested=!1,l._started=!1,l._strategyHWM=C,l._pullAlgorithm=v,l._cancelAlgorithm=$,l._autoAllocateChunkSize=A,l._pendingPullIntos=new Ce,o._readableStreamController=l;let D=h();_(b(D),()=>{l._started=!0,On(l)},X=>{er(l,X)})}function S$(o,l,h){let v=Object.create(Ps.prototype),$=()=>{},C=()=>b(void 0),A=()=>b(void 0);l.start!==void 0&&($=()=>l.start(v)),l.pull!==void 0&&(C=()=>l.pull(v)),l.cancel!==void 0&&(A=X=>l.cancel(X));let D=l.autoAllocateChunkSize;if(D===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Tp(o,v,$,C,A,h,D)}function $$(o,l,h){o._associatedReadableByteStreamController=l,o._view=h}function pu(o){return new TypeError(`ReadableStreamBYOBRequest.prototype.${o} can only be used on a ReadableStreamBYOBRequest`)}function Ma(o){return new TypeError(`ReadableByteStreamController.prototype.${o} can only be used on a ReadableByteStreamController`)}function Rp(o){return new qa(o)}function Pp(o,l){o._reader._readIntoRequests.push(l)}function x$(o,l,h){let $=o._reader._readIntoRequests.shift();h?$._closeSteps(l):$._chunkSteps(l)}function Cp(o){return o._reader._readIntoRequests.length}function gu(o){let l=o._reader;return!(l===void 0||!In(l))}class qa{constructor(l){if(jr(l,1,"ReadableStreamBYOBReader"),ou(l,"First parameter"),ln(l))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!An(l._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");x(this,l),this._readIntoRequests=new Ce}get closed(){return In(this)?this._closedPromise:y(Co("closed"))}cancel(l=void 0){return In(this)?this._ownerReadableStream===void 0?y(we("cancel")):q(this,l):y(Co("cancel"))}read(l){if(!In(this))return y(Co("read"));if(!ArrayBuffer.isView(l))return y(new TypeError("view must be an array buffer view"));if(l.byteLength===0)return y(new TypeError("view must have non-zero byteLength"));if(l.buffer.byteLength===0)return y(new TypeError("view's buffer must have non-zero byteLength"));if($o(l.buffer),this._ownerReadableStream===void 0)return y(we("read from"));let h,v,$=m((A,D)=>{h=A,v=D});return Ap(this,l,{_chunkSteps:A=>h({value:A,done:!1}),_closeSteps:A=>h({value:A,done:!0}),_errorSteps:A=>v(A)}),$}releaseLock(){if(!In(this))throw Co("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");F(this)}}}Object.defineProperties(qa.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(qa.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function In(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_readIntoRequests")?!1:o instanceof qa}function Ap(o,l,h){let v=o._ownerReadableStream;v._disturbed=!0,v._state==="errored"?h._errorSteps(v._storedError):_$(v._readableStreamController,l,h)}function Co(o){return new TypeError(`ReadableStreamBYOBReader.prototype.${o} can only be used on a ReadableStreamBYOBReader`)}function Da(o,l){let{highWaterMark:h}=o;if(h===void 0)return l;if(pp(h)||h<0)throw new RangeError("Invalid highWaterMark");return h}function Ao(o){let{size:l}=o;return l||(()=>1)}function Oo(o,l){Nr(o,l);let h=o?.highWaterMark,v=o?.size;return{highWaterMark:h===void 0?void 0:iu(h),size:v===void 0?void 0:E$(v,`${l} has member 'size' that`)}}function E$(o,l){return Xt(o,l),h=>iu(o(h))}function k$(o,l){Nr(o,l);let h=o?.abort,v=o?.close,$=o?.start,C=o?.type,A=o?.write;return{abort:h===void 0?void 0:T$(h,o,`${l} has member 'abort' that`),close:v===void 0?void 0:R$(v,o,`${l} has member 'close' that`),start:$===void 0?void 0:P$($,o,`${l} has member 'start' that`),write:A===void 0?void 0:C$(A,o,`${l} has member 'write' that`),type:C}}function T$(o,l,h){return Xt(o,h),v=>N(o,l,[v])}function R$(o,l,h){return Xt(o,h),()=>N(o,l,[])}function P$(o,l,h){return Xt(o,h),v=>k(o,l,[v])}function C$(o,l,h){return Xt(o,h),(v,$)=>N(o,l,[v,$])}function Op(o,l){if(!Cs(o))throw new TypeError(`${l} is not a WritableStream.`)}function A$(o){if(typeof o!="object"||o===null)return!1;try{return typeof o.aborted=="boolean"}catch{return!1}}let O$=typeof AbortController=="function";function I$(){if(O$)return new AbortController}class Fa{constructor(l={},h={}){l===void 0?l=null:ap(l,"First parameter");let v=Oo(h,"Second parameter"),$=k$(l,"First parameter");if(Np(this),$.type!==void 0)throw new RangeError("Invalid type is specified");let A=Ao(v),D=Da(v,1);G$(this,$,D,A)}get locked(){if(!Cs(this))throw qo("locked");return As(this)}abort(l=void 0){return Cs(this)?As(this)?y(new TypeError("Cannot abort a stream that already has a writer")):Io(this,l):y(qo("abort"))}close(){return Cs(this)?As(this)?y(new TypeError("Cannot close a stream that already has a writer")):pr(this)?y(new TypeError("Cannot close an already-closing stream")):jp(this):y(qo("close"))}getWriter(){if(!Cs(this))throw qo("getWriter");return Ip(this)}}Object.defineProperties(Fa.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Fa.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});function Ip(o){return new Ua(o)}function N$(o,l,h,v,$=1,C=()=>1){let A=Object.create(Fa.prototype);Np(A);let D=Object.create(Os.prototype);return zp(A,D,o,l,h,v,$,C),A}function Np(o){o._state="writable",o._storedError=void 0,o._writer=void 0,o._writableStreamController=void 0,o._writeRequests=new Ce,o._inFlightWriteRequest=void 0,o._closeRequest=void 0,o._inFlightCloseRequest=void 0,o._pendingAbortRequest=void 0,o._backpressure=!1}function Cs(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_writableStreamController")?!1:o instanceof Fa}function As(o){return o._writer!==void 0}function Io(o,l){var h;if(o._state==="closed"||o._state==="errored")return b(void 0);o._writableStreamController._abortReason=l,(h=o._writableStreamController._abortController)===null||h===void 0||h.abort();let v=o._state;if(v==="closed"||v==="errored")return b(void 0);if(o._pendingAbortRequest!==void 0)return o._pendingAbortRequest._promise;let $=!1;v==="erroring"&&($=!0,l=void 0);let C=m((A,D)=>{o._pendingAbortRequest={_promise:void 0,_resolve:A,_reject:D,_reason:l,_wasAlreadyErroring:$}});return o._pendingAbortRequest._promise=C,$||_u(o,l),C}function jp(o){let l=o._state;if(l==="closed"||l==="errored")return y(new TypeError(`The stream (in ${l} state) is not in the writable state and cannot be closed`));let h=m(($,C)=>{let A={_resolve:$,_reject:C};o._closeRequest=A}),v=o._writer;return v!==void 0&&o._backpressure&&l==="writable"&&Tu(v),K$(o._writableStreamController),h}function j$(o){return m((h,v)=>{let $={_resolve:h,_reject:v};o._writeRequests.push($)})}function yu(o,l){if(o._state==="writable"){_u(o,l);return}bu(o)}function _u(o,l){let h=o._writableStreamController;o._state="erroring",o._storedError=l;let v=o._writer;v!==void 0&&qp(v,l),!U$(o)&&h._started&&bu(o)}function bu(o){o._state="errored",o._writableStreamController[np]();let l=o._storedError;if(o._writeRequests.forEach($=>{$._reject(l)}),o._writeRequests=new Ce,o._pendingAbortRequest===void 0){No(o);return}let h=o._pendingAbortRequest;if(o._pendingAbortRequest=void 0,h._wasAlreadyErroring){h._reject(l),No(o);return}let v=o._writableStreamController[rp](h._reason);_(v,()=>{h._resolve(),No(o)},$=>{h._reject($),No(o)})}function M$(o){o._inFlightWriteRequest._resolve(void 0),o._inFlightWriteRequest=void 0}function q$(o,l){o._inFlightWriteRequest._reject(l),o._inFlightWriteRequest=void 0,yu(o,l)}function D$(o){o._inFlightCloseRequest._resolve(void 0),o._inFlightCloseRequest=void 0,o._state==="erroring"&&(o._storedError=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._resolve(),o._pendingAbortRequest=void 0)),o._state="closed";let h=o._writer;h!==void 0&&Wp(h)}function F$(o,l){o._inFlightCloseRequest._reject(l),o._inFlightCloseRequest=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._reject(l),o._pendingAbortRequest=void 0),yu(o,l)}function pr(o){return!(o._closeRequest===void 0&&o._inFlightCloseRequest===void 0)}function U$(o){return!(o._inFlightWriteRequest===void 0&&o._inFlightCloseRequest===void 0)}function z$(o){o._inFlightCloseRequest=o._closeRequest,o._closeRequest=void 0}function L$(o){o._inFlightWriteRequest=o._writeRequests.shift()}function No(o){o._closeRequest!==void 0&&(o._closeRequest._reject(o._storedError),o._closeRequest=void 0);let l=o._writer;l!==void 0&&Eu(l,o._storedError)}function vu(o,l){let h=o._writer;h!==void 0&&l!==o._backpressure&&(l?tx(h):Tu(h)),o._backpressure=l}class Ua{constructor(l){if(jr(l,1,"WritableStreamDefaultWriter"),Op(l,"First parameter"),As(l))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=l,l._writer=this;let h=l._state;if(h==="writable")!pr(l)&&l._backpressure?Fo(this):Hp(this),Do(this);else if(h==="erroring")ku(this,l._storedError),Do(this);else if(h==="closed")Hp(this),X$(this);else{let v=l._storedError;ku(this,v),Bp(this,v)}}get closed(){return Nn(this)?this._closedPromise:y(jn("closed"))}get desiredSize(){if(!Nn(this))throw jn("desiredSize");if(this._ownerWritableStream===void 0)throw za("desiredSize");return H$(this)}get ready(){return Nn(this)?this._readyPromise:y(jn("ready"))}abort(l=void 0){return Nn(this)?this._ownerWritableStream===void 0?y(za("abort")):V$(this,l):y(jn("abort"))}close(){if(!Nn(this))return y(jn("close"));let l=this._ownerWritableStream;return l===void 0?y(za("close")):pr(l)?y(new TypeError("Cannot close an already-closing stream")):Mp(this)}releaseLock(){if(!Nn(this))throw jn("releaseLock");this._ownerWritableStream!==void 0&&Dp(this)}write(l=void 0){return Nn(this)?this._ownerWritableStream===void 0?y(za("write to")):Fp(this,l):y(jn("write"))}}Object.defineProperties(Ua.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ua.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Nn(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_ownerWritableStream")?!1:o instanceof Ua}function V$(o,l){let h=o._ownerWritableStream;return Io(h,l)}function Mp(o){let l=o._ownerWritableStream;return jp(l)}function B$(o){let l=o._ownerWritableStream,h=l._state;return pr(l)||h==="closed"?b(void 0):h==="errored"?y(l._storedError):Mp(o)}function W$(o,l){o._closedPromiseState==="pending"?Eu(o,l):ex(o,l)}function qp(o,l){o._readyPromiseState==="pending"?Gp(o,l):rx(o,l)}function H$(o){let l=o._ownerWritableStream,h=l._state;return h==="errored"||h==="erroring"?null:h==="closed"?0:Lp(l._writableStreamController)}function Dp(o){let l=o._ownerWritableStream,h=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");qp(o,h),W$(o,h),l._writer=void 0,o._ownerWritableStream=void 0}function Fp(o,l){let h=o._ownerWritableStream,v=h._writableStreamController,$=Z$(v,l);if(h!==o._ownerWritableStream)return y(za("write to"));let C=h._state;if(C==="errored")return y(h._storedError);if(pr(h)||C==="closed")return y(new TypeError("The stream is closing or closed and cannot be written to"));if(C==="erroring")return y(h._storedError);let A=j$(h);return J$(v,l,$),A}let Up={};class Os{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!wu(this))throw xu("abortReason");return this._abortReason}get signal(){if(!wu(this))throw xu("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(l=void 0){if(!wu(this))throw xu("error");this._controlledWritableStream._state==="writable"&&Vp(this,l)}[rp](l){let h=this._abortAlgorithm(l);return jo(this),h}[np](){sn(this)}}Object.defineProperties(Os.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Os.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function wu(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledWritableStream")?!1:o instanceof Os}function zp(o,l,h,v,$,C,A,D){l._controlledWritableStream=o,o._writableStreamController=l,l._queue=void 0,l._queueTotalSize=void 0,sn(l),l._abortReason=void 0,l._abortController=I$(),l._started=!1,l._strategySizeAlgorithm=D,l._strategyHWM=A,l._writeAlgorithm=v,l._closeAlgorithm=$,l._abortAlgorithm=C;let X=$u(l);vu(o,X);let le=h(),Se=b(le);_(Se,()=>{l._started=!0,Mo(l)},$e=>{l._started=!0,yu(o,$e)})}function G$(o,l,h,v){let $=Object.create(Os.prototype),C=()=>{},A=()=>b(void 0),D=()=>b(void 0),X=()=>b(void 0);l.start!==void 0&&(C=()=>l.start($)),l.write!==void 0&&(A=le=>l.write(le,$)),l.close!==void 0&&(D=()=>l.close()),l.abort!==void 0&&(X=le=>l.abort(le)),zp(o,$,C,A,D,X,h,v)}function jo(o){o._writeAlgorithm=void 0,o._closeAlgorithm=void 0,o._abortAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function K$(o){uu(o,Up,0),Mo(o)}function Z$(o,l){try{return o._strategySizeAlgorithm(l)}catch(h){return Su(o,h),1}}function Lp(o){return o._strategyHWM-o._queueTotalSize}function J$(o,l,h){try{uu(o,l,h)}catch($){Su(o,$);return}let v=o._controlledWritableStream;if(!pr(v)&&v._state==="writable"){let $=$u(o);vu(v,$)}Mo(o)}function Mo(o){let l=o._controlledWritableStream;if(!o._started||l._inFlightWriteRequest!==void 0)return;if(l._state==="erroring"){bu(l);return}if(o._queue.length===0)return;let v=y$(o);v===Up?Y$(o):Q$(o,v)}function Su(o,l){o._controlledWritableStream._state==="writable"&&Vp(o,l)}function Y$(o){let l=o._controlledWritableStream;z$(l),lu(o);let h=o._closeAlgorithm();jo(o),_(h,()=>{D$(l)},v=>{F$(l,v)})}function Q$(o,l){let h=o._controlledWritableStream;L$(h);let v=o._writeAlgorithm(l);_(v,()=>{M$(h);let $=h._state;if(lu(o),!pr(h)&&$==="writable"){let C=$u(o);vu(h,C)}Mo(o)},$=>{h._state==="writable"&&jo(o),q$(h,$)})}function $u(o){return Lp(o)<=0}function Vp(o,l){let h=o._controlledWritableStream;jo(o),_u(h,l)}function qo(o){return new TypeError(`WritableStream.prototype.${o} can only be used on a WritableStream`)}function xu(o){return new TypeError(`WritableStreamDefaultController.prototype.${o} can only be used on a WritableStreamDefaultController`)}function jn(o){return new TypeError(`WritableStreamDefaultWriter.prototype.${o} can only be used on a WritableStreamDefaultWriter`)}function za(o){return new TypeError("Cannot "+o+" a stream using a released writer")}function Do(o){o._closedPromise=m((l,h)=>{o._closedPromise_resolve=l,o._closedPromise_reject=h,o._closedPromiseState="pending"})}function Bp(o,l){Do(o),Eu(o,l)}function X$(o){Do(o),Wp(o)}function Eu(o,l){o._closedPromise_reject!==void 0&&(P(o._closedPromise),o._closedPromise_reject(l),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="rejected")}function ex(o,l){Bp(o,l)}function Wp(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="resolved")}function Fo(o){o._readyPromise=m((l,h)=>{o._readyPromise_resolve=l,o._readyPromise_reject=h}),o._readyPromiseState="pending"}function ku(o,l){Fo(o),Gp(o,l)}function Hp(o){Fo(o),Tu(o)}function Gp(o,l){o._readyPromise_reject!==void 0&&(P(o._readyPromise),o._readyPromise_reject(l),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="rejected")}function tx(o){Fo(o)}function rx(o,l){ku(o,l)}function Tu(o){o._readyPromise_resolve!==void 0&&(o._readyPromise_resolve(void 0),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="fulfilled")}let Kp=typeof DOMException<"u"?DOMException:void 0;function nx(o){if(!(typeof o=="function"||typeof o=="object"))return!1;try{return new o,!0}catch{return!1}}function sx(){let o=function(h,v){this.message=h||"",this.name=v||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o.prototype=Object.create(Error.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,writable:!0,configurable:!0}),o}let ax=nx(Kp)?Kp:sx();function Zp(o,l,h,v,$,C){let A=Rs(o),D=Ip(l);o._disturbed=!0;let X=!1,le=b(void 0);return m((Se,$e)=>{let Le;if(C!==void 0){if(Le=()=>{let V=new ax("Aborted","AbortError"),oe=[];v||oe.push(()=>l._state==="writable"?Io(l,V):b(void 0)),$||oe.push(()=>o._state==="readable"?tr(o,V):b(void 0)),mt(()=>Promise.all(oe.map(Ie=>Ie())),!0,V)},C.aborted){Le();return}C.addEventListener("abort",Le)}function rr(){return m((V,oe)=>{function Ie(Pt){Pt?V():g(js(),Ie,oe)}Ie(!1)})}function js(){return X?b(!0):g(D._readyPromise,()=>m((V,oe)=>{Oa(A,{_chunkSteps:Ie=>{le=g(Fp(D,Ie),void 0,r),V(!1)},_closeSteps:()=>V(!0),_errorSteps:oe})}))}if(Mr(o,A._closedPromise,V=>{v?Mt(!0,V):mt(()=>Io(l,V),!0,V)}),Mr(l,D._closedPromise,V=>{$?Mt(!0,V):mt(()=>tr(o,V),!0,V)}),it(o,A._closedPromise,()=>{h?Mt():mt(()=>B$(D))}),pr(l)||l._state==="closed"){let V=new TypeError("the destination writable stream closed before all data could be piped to it");$?Mt(!0,V):mt(()=>tr(o,V),!0,V)}P(rr());function un(){let V=le;return g(le,()=>V!==le?un():void 0)}function Mr(V,oe,Ie){V._state==="errored"?Ie(V._storedError):S(oe,Ie)}function it(V,oe,Ie){V._state==="closed"?Ie():w(oe,Ie)}function mt(V,oe,Ie){if(X)return;X=!0,l._state==="writable"&&!pr(l)?w(un(),Pt):Pt();function Pt(){_(V(),()=>qr(oe,Ie),Ms=>qr(!0,Ms))}}function Mt(V,oe){X||(X=!0,l._state==="writable"&&!pr(l)?w(un(),()=>qr(V,oe)):qr(V,oe))}function qr(V,oe){Dp(D),F(A),C!==void 0&&C.removeEventListener("abort",Le),V?$e(oe):Se(void 0)}})}class Is{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Uo(this))throw Vo("desiredSize");return Ru(this)}close(){if(!Uo(this))throw Vo("close");if(!Ns(this))throw new TypeError("The stream is not in a state that permits close");Va(this)}enqueue(l=void 0){if(!Uo(this))throw Vo("enqueue");if(!Ns(this))throw new TypeError("The stream is not in a state that permits enqueue");return Lo(this,l)}error(l=void 0){if(!Uo(this))throw Vo("error");an(this,l)}[nu](l){sn(this);let h=this._cancelAlgorithm(l);return zo(this),h}[su](l){let h=this._controlledReadableStream;if(this._queue.length>0){let v=lu(this);this._closeRequested&&this._queue.length===0?(zo(this),Ba(h)):La(this),l._chunkSteps(v)}else cp(h,l),La(this)}}Object.defineProperties(Is.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Is.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Uo(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableStream")?!1:o instanceof Is}function La(o){if(!Jp(o))return;if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;let h=o._pullAlgorithm();_(h,()=>{o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,La(o))},v=>{an(o,v)})}function Jp(o){let l=o._controlledReadableStream;return!Ns(o)||!o._started?!1:!!(ln(l)&&wo(l)>0||Ru(o)>0)}function zo(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function Va(o){if(!Ns(o))return;let l=o._controlledReadableStream;o._closeRequested=!0,o._queue.length===0&&(zo(o),Ba(l))}function Lo(o,l){if(!Ns(o))return;let h=o._controlledReadableStream;if(ln(h)&&wo(h)>0)cu(h,l,!1);else{let v;try{v=o._strategySizeAlgorithm(l)}catch($){throw an(o,$),$}try{uu(o,l,v)}catch($){throw an(o,$),$}}La(o)}function an(o,l){let h=o._controlledReadableStream;h._state==="readable"&&(sn(o),zo(o),eg(h,l))}function Ru(o){let l=o._controlledReadableStream._state;return l==="errored"?null:l==="closed"?0:o._strategyHWM-o._queueTotalSize}function ix(o){return!Jp(o)}function Ns(o){let l=o._controlledReadableStream._state;return!o._closeRequested&&l==="readable"}function Yp(o,l,h,v,$,C,A){l._controlledReadableStream=o,l._queue=void 0,l._queueTotalSize=void 0,sn(l),l._started=!1,l._closeRequested=!1,l._pullAgain=!1,l._pulling=!1,l._strategySizeAlgorithm=A,l._strategyHWM=C,l._pullAlgorithm=v,l._cancelAlgorithm=$,o._readableStreamController=l;let D=h();_(b(D),()=>{l._started=!0,La(l)},X=>{an(l,X)})}function ox(o,l,h,v){let $=Object.create(Is.prototype),C=()=>{},A=()=>b(void 0),D=()=>b(void 0);l.start!==void 0&&(C=()=>l.start($)),l.pull!==void 0&&(A=()=>l.pull($)),l.cancel!==void 0&&(D=X=>l.cancel(X)),Yp(o,$,C,A,D,h,v)}function Vo(o){return new TypeError(`ReadableStreamDefaultController.prototype.${o} can only be used on a ReadableStreamDefaultController`)}function cx(o,l){return An(o._readableStreamController)?ux(o):lx(o)}function lx(o,l){let h=Rs(o),v=!1,$=!1,C=!1,A=!1,D,X,le,Se,$e,Le=m(it=>{$e=it});function rr(){return v?($=!0,b(void 0)):(v=!0,Oa(h,{_chunkSteps:mt=>{R(()=>{$=!1;let Mt=mt,qr=mt;C||Lo(le._readableStreamController,Mt),A||Lo(Se._readableStreamController,qr),v=!1,$&&rr()})},_closeSteps:()=>{v=!1,C||Va(le._readableStreamController),A||Va(Se._readableStreamController),(!C||!A)&&$e(void 0)},_errorSteps:()=>{v=!1}}),b(void 0))}function js(it){if(C=!0,D=it,A){let mt=Ia([D,X]),Mt=tr(o,mt);$e(Mt)}return Le}function un(it){if(A=!0,X=it,C){let mt=Ia([D,X]),Mt=tr(o,mt);$e(Mt)}return Le}function Mr(){}return le=Pu(Mr,rr,js),Se=Pu(Mr,rr,un),S(h._closedPromise,it=>{an(le._readableStreamController,it),an(Se._readableStreamController,it),(!C||!A)&&$e(void 0)}),[le,Se]}function ux(o){let l=Rs(o),h=!1,v=!1,$=!1,C=!1,A=!1,D,X,le,Se,$e,Le=m(V=>{$e=V});function rr(V){S(V._closedPromise,oe=>{V===l&&(er(le._readableStreamController,oe),er(Se._readableStreamController,oe),(!C||!A)&&$e(void 0))})}function js(){In(l)&&(F(l),l=Rs(o),rr(l)),Oa(l,{_chunkSteps:oe=>{R(()=>{v=!1,$=!1;let Ie=oe,Pt=oe;if(!C&&!A)try{Pt=_p(oe)}catch(Ms){er(le._readableStreamController,Ms),er(Se._readableStreamController,Ms),$e(tr(o,Ms));return}C||To(le._readableStreamController,Ie),A||To(Se._readableStreamController,Pt),h=!1,v?Mr():$&&it()})},_closeSteps:()=>{h=!1,C||ja(le._readableStreamController),A||ja(Se._readableStreamController),le._readableStreamController._pendingPullIntos.length>0&&Ro(le._readableStreamController,0),Se._readableStreamController._pendingPullIntos.length>0&&Ro(Se._readableStreamController,0),(!C||!A)&&$e(void 0)},_errorSteps:()=>{h=!1}})}function un(V,oe){nn(l)&&(F(l),l=Rp(o),rr(l));let Ie=oe?Se:le,Pt=oe?le:Se;Ap(l,V,{_chunkSteps:qs=>{R(()=>{v=!1,$=!1;let Ds=oe?A:C;if(oe?C:A)Ds||Po(Ie._readableStreamController,qs);else{let hg;try{hg=_p(qs)}catch(Au){er(Ie._readableStreamController,Au),er(Pt._readableStreamController,Au),$e(tr(o,Au));return}Ds||Po(Ie._readableStreamController,qs),To(Pt._readableStreamController,hg)}h=!1,v?Mr():$&&it()})},_closeSteps:qs=>{h=!1;let Ds=oe?A:C,Qo=oe?C:A;Ds||ja(Ie._readableStreamController),Qo||ja(Pt._readableStreamController),qs!==void 0&&(Ds||Po(Ie._readableStreamController,qs),!Qo&&Pt._readableStreamController._pendingPullIntos.length>0&&Ro(Pt._readableStreamController,0)),(!Ds||!Qo)&&$e(void 0)},_errorSteps:()=>{h=!1}})}function Mr(){if(h)return v=!0,b(void 0);h=!0;let V=mu(le._readableStreamController);return V===null?js():un(V._view,!1),b(void 0)}function it(){if(h)return $=!0,b(void 0);h=!0;let V=mu(Se._readableStreamController);return V===null?js():un(V._view,!0),b(void 0)}function mt(V){if(C=!0,D=V,A){let oe=Ia([D,X]),Ie=tr(o,oe);$e(Ie)}return Le}function Mt(V){if(A=!0,X=V,C){let oe=Ia([D,X]),Ie=tr(o,oe);$e(Ie)}return Le}function qr(){}return le=Xp(qr,Mr,mt),Se=Xp(qr,it,Mt),rr(l),[le,Se]}function dx(o,l){Nr(o,l);let h=o,v=h?.autoAllocateChunkSize,$=h?.cancel,C=h?.pull,A=h?.start,D=h?.type;return{autoAllocateChunkSize:v===void 0?void 0:op(v,`${l} has member 'autoAllocateChunkSize' that`),cancel:$===void 0?void 0:fx($,h,`${l} has member 'cancel' that`),pull:C===void 0?void 0:hx(C,h,`${l} has member 'pull' that`),start:A===void 0?void 0:mx(A,h,`${l} has member 'start' that`),type:D===void 0?void 0:px(D,`${l} has member 'type' that`)}}function fx(o,l,h){return Xt(o,h),v=>N(o,l,[v])}function hx(o,l,h){return Xt(o,h),v=>N(o,l,[v])}function mx(o,l,h){return Xt(o,h),v=>k(o,l,[v])}function px(o,l){if(o=`${o}`,o!=="bytes")throw new TypeError(`${l} '${o}' is not a valid enumeration value for ReadableStreamType`);return o}function gx(o,l){Nr(o,l);let h=o?.mode;return{mode:h===void 0?void 0:yx(h,`${l} has member 'mode' that`)}}function yx(o,l){if(o=`${o}`,o!=="byob")throw new TypeError(`${l} '${o}' is not a valid enumeration value for ReadableStreamReaderMode`);return o}function _x(o,l){return Nr(o,l),{preventCancel:!!o?.preventCancel}}function Qp(o,l){Nr(o,l);let h=o?.preventAbort,v=o?.preventCancel,$=o?.preventClose,C=o?.signal;return C!==void 0&&bx(C,`${l} has member 'signal' that`),{preventAbort:!!h,preventCancel:!!v,preventClose:!!$,signal:C}}function bx(o,l){if(!A$(o))throw new TypeError(`${l} is not an AbortSignal.`)}function vx(o,l){Nr(o,l);let h=o?.readable;au(h,"readable","ReadableWritablePair"),ou(h,`${l} has member 'readable' that`);let v=o?.writable;return au(v,"writable","ReadableWritablePair"),Op(v,`${l} has member 'writable' that`),{readable:h,writable:v}}class on{constructor(l={},h={}){l===void 0?l=null:ap(l,"First parameter");let v=Oo(h,"Second parameter"),$=dx(l,"First parameter");if(Cu(this),$.type==="bytes"){if(v.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let C=Da(v,0);S$(this,$,C)}else{let C=Ao(v),A=Da(v,1);ox(this,$,A,C)}}get locked(){if(!cn(this))throw Mn("locked");return ln(this)}cancel(l=void 0){return cn(this)?ln(this)?y(new TypeError("Cannot cancel a stream that already has a reader")):tr(this,l):y(Mn("cancel"))}getReader(l=void 0){if(!cn(this))throw Mn("getReader");return gx(l,"First parameter").mode===void 0?Rs(this):Rp(this)}pipeThrough(l,h={}){if(!cn(this))throw Mn("pipeThrough");jr(l,1,"pipeThrough");let v=vx(l,"First parameter"),$=Qp(h,"Second parameter");if(ln(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(As(v.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let C=Zp(this,v.writable,$.preventClose,$.preventAbort,$.preventCancel,$.signal);return P(C),v.readable}pipeTo(l,h={}){if(!cn(this))return y(Mn("pipeTo"));if(l===void 0)return y("Parameter 1 is required in 'pipeTo'.");if(!Cs(l))return y(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let v;try{v=Qp(h,"Second parameter")}catch($){return y($)}return ln(this)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):As(l)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Zp(this,l,v.preventClose,v.preventAbort,v.preventCancel,v.signal)}tee(){if(!cn(this))throw Mn("tee");let l=cx(this);return Ia(l)}values(l=void 0){if(!cn(this))throw Mn("values");let h=_x(l,"First parameter");return p$(this,h.preventCancel)}}Object.defineProperties(on.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(on.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&&Object.defineProperty(on.prototype,e.asyncIterator,{value:on.prototype.values,writable:!0,configurable:!0});function Pu(o,l,h,v=1,$=()=>1){let C=Object.create(on.prototype);Cu(C);let A=Object.create(Is.prototype);return Yp(C,A,o,l,h,v,$),C}function Xp(o,l,h){let v=Object.create(on.prototype);Cu(v);let $=Object.create(Ps.prototype);return Tp(v,$,o,l,h,0,void 0),v}function Cu(o){o._state="readable",o._reader=void 0,o._storedError=void 0,o._disturbed=!1}function cn(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_readableStreamController")?!1:o instanceof on}function ln(o){return o._reader!==void 0}function tr(o,l){if(o._disturbed=!0,o._state==="closed")return b(void 0);if(o._state==="errored")return y(o._storedError);Ba(o);let h=o._reader;h!==void 0&&In(h)&&(h._readIntoRequests.forEach($=>{$._closeSteps(void 0)}),h._readIntoRequests=new Ce);let v=o._readableStreamController[nu](l);return T(v,r)}function Ba(o){o._state="closed";let l=o._reader;l!==void 0&&(vo(l),nn(l)&&(l._readRequests.forEach(h=>{h._closeSteps()}),l._readRequests=new Ce))}function eg(o,l){o._state="errored",o._storedError=l;let h=o._reader;h!==void 0&&(Qt(h,l),nn(h)?(h._readRequests.forEach(v=>{v._errorSteps(l)}),h._readRequests=new Ce):(h._readIntoRequests.forEach(v=>{v._errorSteps(l)}),h._readIntoRequests=new Ce))}function Mn(o){return new TypeError(`ReadableStream.prototype.${o} can only be used on a ReadableStream`)}function tg(o,l){Nr(o,l);let h=o?.highWaterMark;return au(h,"highWaterMark","QueuingStrategyInit"),{highWaterMark:iu(h)}}let rg=o=>o.byteLength;try{Object.defineProperty(rg,"name",{value:"size",configurable:!0})}catch{}class Bo{constructor(l){jr(l,1,"ByteLengthQueuingStrategy"),l=tg(l,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=l.highWaterMark}get highWaterMark(){if(!sg(this))throw ng("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!sg(this))throw ng("size");return rg}}Object.defineProperties(Bo.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Bo.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ng(o){return new TypeError(`ByteLengthQueuingStrategy.prototype.${o} can only be used on a ByteLengthQueuingStrategy`)}function sg(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_byteLengthQueuingStrategyHighWaterMark")?!1:o instanceof Bo}let ag=()=>1;try{Object.defineProperty(ag,"name",{value:"size",configurable:!0})}catch{}class Wo{constructor(l){jr(l,1,"CountQueuingStrategy"),l=tg(l,"First parameter"),this._countQueuingStrategyHighWaterMark=l.highWaterMark}get highWaterMark(){if(!og(this))throw ig("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!og(this))throw ig("size");return ag}}Object.defineProperties(Wo.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Wo.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ig(o){return new TypeError(`CountQueuingStrategy.prototype.${o} can only be used on a CountQueuingStrategy`)}function og(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_countQueuingStrategyHighWaterMark")?!1:o instanceof Wo}function wx(o,l){Nr(o,l);let h=o?.flush,v=o?.readableType,$=o?.start,C=o?.transform,A=o?.writableType;return{flush:h===void 0?void 0:Sx(h,o,`${l} has member 'flush' that`),readableType:v,start:$===void 0?void 0:$x($,o,`${l} has member 'start' that`),transform:C===void 0?void 0:xx(C,o,`${l} has member 'transform' that`),writableType:A}}function Sx(o,l,h){return Xt(o,h),v=>N(o,l,[v])}function $x(o,l,h){return Xt(o,h),v=>k(o,l,[v])}function xx(o,l,h){return Xt(o,h),(v,$)=>N(o,l,[v,$])}class Ho{constructor(l={},h={},v={}){l===void 0&&(l=null);let $=Oo(h,"Second parameter"),C=Oo(v,"Third parameter"),A=wx(l,"First parameter");if(A.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(A.writableType!==void 0)throw new RangeError("Invalid writableType specified");let D=Da(C,0),X=Ao(C),le=Da($,1),Se=Ao($),$e,Le=m(rr=>{$e=rr});Ex(this,Le,le,Se,D,X),Tx(this,A),A.start!==void 0?$e(A.start(this._transformStreamController)):$e(void 0)}get readable(){if(!cg(this))throw fg("readable");return this._readable}get writable(){if(!cg(this))throw fg("writable");return this._writable}}Object.defineProperties(Ho.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ho.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});function Ex(o,l,h,v,$,C){function A(){return l}function D(Le){return Cx(o,Le)}function X(Le){return Ax(o,Le)}function le(){return Ox(o)}o._writable=N$(A,D,le,X,h,v);function Se(){return Ix(o)}function $e(Le){return Ko(o,Le),b(void 0)}o._readable=Pu(A,Se,$e,$,C),o._backpressure=void 0,o._backpressureChangePromise=void 0,o._backpressureChangePromise_resolve=void 0,Zo(o,!0),o._transformStreamController=void 0}function cg(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_transformStreamController")?!1:o instanceof Ho}function Go(o,l){an(o._readable._readableStreamController,l),Ko(o,l)}function Ko(o,l){lg(o._transformStreamController),Su(o._writable._writableStreamController,l),o._backpressure&&Zo(o,!1)}function Zo(o,l){o._backpressureChangePromise!==void 0&&o._backpressureChangePromise_resolve(),o._backpressureChangePromise=m(h=>{o._backpressureChangePromise_resolve=h}),o._backpressure=l}class Wa{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Jo(this))throw Yo("desiredSize");let l=this._controlledTransformStream._readable._readableStreamController;return Ru(l)}enqueue(l=void 0){if(!Jo(this))throw Yo("enqueue");ug(this,l)}error(l=void 0){if(!Jo(this))throw Yo("error");Rx(this,l)}terminate(){if(!Jo(this))throw Yo("terminate");Px(this)}}Object.defineProperties(Wa.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Wa.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Jo(o){return!a(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledTransformStream")?!1:o instanceof Wa}function kx(o,l,h,v){l._controlledTransformStream=o,o._transformStreamController=l,l._transformAlgorithm=h,l._flushAlgorithm=v}function Tx(o,l){let h=Object.create(Wa.prototype),v=C=>{try{return ug(h,C),b(void 0)}catch(A){return y(A)}},$=()=>b(void 0);l.transform!==void 0&&(v=C=>l.transform(C,h)),l.flush!==void 0&&($=()=>l.flush(h)),kx(o,h,v,$)}function lg(o){o._transformAlgorithm=void 0,o._flushAlgorithm=void 0}function ug(o,l){let h=o._controlledTransformStream,v=h._readable._readableStreamController;if(!Ns(v))throw new TypeError("Readable side is not in a state that permits enqueue");try{Lo(v,l)}catch(C){throw Ko(h,C),h._readable._storedError}ix(v)!==h._backpressure&&Zo(h,!0)}function Rx(o,l){Go(o._controlledTransformStream,l)}function dg(o,l){let h=o._transformAlgorithm(l);return T(h,void 0,v=>{throw Go(o._controlledTransformStream,v),v})}function Px(o){let l=o._controlledTransformStream,h=l._readable._readableStreamController;Va(h);let v=new TypeError("TransformStream terminated");Ko(l,v)}function Cx(o,l){let h=o._transformStreamController;if(o._backpressure){let v=o._backpressureChangePromise;return T(v,()=>{let $=o._writable;if($._state==="erroring")throw $._storedError;return dg(h,l)})}return dg(h,l)}function Ax(o,l){return Go(o,l),b(void 0)}function Ox(o){let l=o._readable,h=o._transformStreamController,v=h._flushAlgorithm();return lg(h),T(v,()=>{if(l._state==="errored")throw l._storedError;Va(l._readableStreamController)},$=>{throw Go(o,$),l._storedError})}function Ix(o){return Zo(o,!1),o._backpressureChangePromise}function Yo(o){return new TypeError(`TransformStreamDefaultController.prototype.${o} can only be used on a TransformStreamDefaultController`)}function fg(o){return new TypeError(`TransformStream.prototype.${o} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Bo,t.CountQueuingStrategy=Wo,t.ReadableByteStreamController=Ps,t.ReadableStream=on,t.ReadableStreamBYOBReader=qa,t.ReadableStreamBYOBRequest=Na,t.ReadableStreamDefaultController=Is,t.ReadableStreamDefaultReader=Aa,t.TransformStream=Ho,t.TransformStreamDefaultController=Wa,t.WritableStream=Fa,t.WritableStreamDefaultController=Os,t.WritableStreamDefaultWriter=Ua,Object.defineProperty(t,"__esModule",{value:!0})}))});var Rg=E(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,Tg())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,s=this;return new ReadableStream({type:"bytes",async pull(a){let c=await s.slice(n,Math.min(s.size,n+65536)).arrayBuffer();n+=c.byteLength,a.enqueue(new Uint8Array(c)),n===s.size&&a.close()}})})}catch{}});async function*ju(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,s=r.byteOffset+r.byteLength;for(;n!==s;){let a=Math.min(s-n,Pg),i=r.buffer.slice(n,n+a);n+=i.byteLength,yield new Uint8Array(i)}}else yield r;else{let n=0,s=r;for(;n!==s.size;){let i=await s.slice(n,Math.min(s.size,n+Pg)).arrayBuffer();n+=i.byteLength,yield new Uint8Array(i)}}}var yM,Pg,Cg,Kx,Fr,Ja=Ha(()=>{yM=Ve(Rg(),1);Pg=65536;Cg=class Mu{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let a of e){let i;ArrayBuffer.isView(a)?i=new Uint8Array(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)):a instanceof ArrayBuffer?i=new Uint8Array(a.slice(0)):a instanceof Mu?i=a:i=n.encode(`${a}`),this.#r+=ArrayBuffer.isView(i)?i.byteLength:i.size,this.#e.push(i)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let s=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let n of ju(this.#e,!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of ju(this.#e,!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=ju(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:s}=this,a=e<0?Math.max(s+e,0):Math.min(e,s),i=r<0?Math.max(s+r,0):Math.min(r,s),c=Math.max(i-a,0),u=this.#e,d=[],f=0;for(let b of u){if(f>=c)break;let y=ArrayBuffer.isView(b)?b.byteLength:b.size;if(a&&y<=a)a-=y,i-=y;else{let g;ArrayBuffer.isView(b)?(g=b.subarray(a,Math.min(y,i)),f+=g.byteLength):(g=b.slice(a,Math.min(y,i)),f+=g.size),i-=y,d.push(g),a=0}}let m=new Mu([],{type:String(n).toLowerCase()});return m.#r=c,m.#e=d,m}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(Cg.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Kx=Cg,Fr=Kx});var Zx,Jx,zs,qu=Ha(()=>{Ja();Zx=class extends Fr{#e=0;#t="";constructor(e,r,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let s=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Fr&&/^(File)$/.test(e[Symbol.toStringTag])}},Jx=Zx,zs=Jx});function Ig(t,e=Fr){var r=`${Ag()}${Ag()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],s=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((a,i)=>typeof a=="string"?n.push(s+Du(i)+`"\r
\r
${a.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(s+Du(i)+`"; filename="${Du(a.name,1)}"\r
Content-Type: ${a.type||"application/octet-stream"}\r
\r
`,a,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var Ya,Yx,Qx,Ag,Xx,Og,Du,Fn,Un,ic=Ha(()=>{Ja();qu();({toStringTag:Ya,iterator:Yx,hasInstance:Qx}=Symbol),Ag=Math.random,Xx="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Og=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[Ya])?[(r=r!==void 0?r+"":e[Ya]=="File"?e.name:"blob",t),e.name!==r||e[Ya]=="blob"?new zs([e],r,e):e]:[t,e+""]),Du=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Fn=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},Un=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Ya](){return"FormData"}[Yx](){return this.entries()}static[Qx](e){return e&&typeof e=="object"&&e[Ya]==="FormData"&&!Xx.some(r=>typeof e[r]!="function")}append(...e){Fn("append",arguments,2),this.#e.push(Og(...e))}delete(e){Fn("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){Fn("get",arguments,1),e+="";for(var r=this.#e,n=r.length,s=0;s<n;s++)if(r[s][0]===e)return r[s][1];return null}getAll(e,r){return Fn("getAll",arguments,1),r=[],e+="",this.#e.forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return Fn("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){Fn("forEach",arguments,1);for(var[n,s]of this)e.call(r,s,n,this)}set(...e){Fn("set",arguments,2);var r=[],n=!0;e=Og(...e),this.#e.forEach(s=>{s[0]===e[0]?n&&(n=!r.push(e)):r.push(s)}),n&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var Dg=E((CM,qg)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}qg.exports=globalThis.DOMException});var cc,e1,IM,Uu=Ha(()=>{cc=require("node:fs"),e1=Ve(Dg(),1);qu();Ja();({stat:IM}=cc.promises)});var Ug={};mg(Ug,{toFormData:()=>o1});function i1(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(s,a)=>String.fromCharCode(a)),n}async function o1(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new zu(r[1]||r[2]),s,a,i,c,u,d,f=[],m=new Un,b=S=>{i+=w.decode(S,{stream:!0})},y=S=>{f.push(S)},g=()=>{let S=new zs(f,d,{type:u});m.append(c,S)},_=()=>{m.append(c,i)},w=new TextDecoder("utf-8");w.decode(),n.onPartBegin=function(){n.onPartData=b,n.onPartEnd=_,s="",a="",i="",c="",u="",d=null,f.length=0},n.onHeaderField=function(S){s+=w.decode(S,{stream:!0})},n.onHeaderValue=function(S){a+=w.decode(S,{stream:!0})},n.onHeaderEnd=function(){if(a+=w.decode(),s=s.toLowerCase(),s==="content-disposition"){let S=a.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);S&&(c=S[2]||S[3]||""),d=i1(a),d&&(n.onPartData=y,n.onPartEnd=g)}else s==="content-type"&&(u=a);a="",s=""};for await(let S of t)n.write(S);return n.end(),m}var _r,Ne,Fg,dn,lc,uc,t1,Xa,r1,n1,s1,a1,zn,zu,zg=Ha(()=>{Uu();ic();_r=0,Ne={START_BOUNDARY:_r++,HEADER_FIELD_START:_r++,HEADER_FIELD:_r++,HEADER_VALUE_START:_r++,HEADER_VALUE:_r++,HEADER_VALUE_ALMOST_DONE:_r++,HEADERS_ALMOST_DONE:_r++,PART_DATA_START:_r++,PART_DATA:_r++,END:_r++},Fg=1,dn={PART_BOUNDARY:Fg,LAST_BOUNDARY:Fg*=2},lc=10,uc=13,t1=32,Xa=45,r1=58,n1=97,s1=122,a1=t=>t|32,zn=()=>{},zu=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=zn,this.onHeaderField=zn,this.onHeadersEnd=zn,this.onHeaderValue=zn,this.onPartBegin=zn,this.onPartData=zn,this.onPartEnd=zn,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Ne.START_BOUNDARY}write(e){let r=0,n=e.length,s=this.index,{lookbehind:a,boundary:i,boundaryChars:c,index:u,state:d,flags:f}=this,m=this.boundary.length,b=m-1,y=e.length,g,_,w=R=>{this[R+"Mark"]=r},S=R=>{delete this[R+"Mark"]},T=(R,k,N,ce)=>{(k===void 0||k!==N)&&this[R](ce&&ce.subarray(k,N))},P=(R,k)=>{let N=R+"Mark";N in this&&(k?(T(R,this[N],r,e),delete this[N]):(T(R,this[N],e.length,e),this[N]=0))};for(r=0;r<n;r++)switch(g=e[r],d){case Ne.START_BOUNDARY:if(u===i.length-2){if(g===Xa)f|=dn.LAST_BOUNDARY;else if(g!==uc)return;u++;break}else if(u-1===i.length-2){if(f&dn.LAST_BOUNDARY&&g===Xa)d=Ne.END,f=0;else if(!(f&dn.LAST_BOUNDARY)&&g===lc)u=0,T("onPartBegin"),d=Ne.HEADER_FIELD_START;else return;break}g!==i[u+2]&&(u=-2),g===i[u+2]&&u++;break;case Ne.HEADER_FIELD_START:d=Ne.HEADER_FIELD,w("onHeaderField"),u=0;case Ne.HEADER_FIELD:if(g===uc){S("onHeaderField"),d=Ne.HEADERS_ALMOST_DONE;break}if(u++,g===Xa)break;if(g===r1){if(u===1)return;P("onHeaderField",!0),d=Ne.HEADER_VALUE_START;break}if(_=a1(g),_<n1||_>s1)return;break;case Ne.HEADER_VALUE_START:if(g===t1)break;w("onHeaderValue"),d=Ne.HEADER_VALUE;case Ne.HEADER_VALUE:g===uc&&(P("onHeaderValue",!0),T("onHeaderEnd"),d=Ne.HEADER_VALUE_ALMOST_DONE);break;case Ne.HEADER_VALUE_ALMOST_DONE:if(g!==lc)return;d=Ne.HEADER_FIELD_START;break;case Ne.HEADERS_ALMOST_DONE:if(g!==lc)return;T("onHeadersEnd"),d=Ne.PART_DATA_START;break;case Ne.PART_DATA_START:d=Ne.PART_DATA,w("onPartData");case Ne.PART_DATA:if(s=u,u===0){for(r+=b;r<y&&!(e[r]in c);)r+=m;r-=b,g=e[r]}if(u<i.length)i[u]===g?(u===0&&P("onPartData",!0),u++):u=0;else if(u===i.length)u++,g===uc?f|=dn.PART_BOUNDARY:g===Xa?f|=dn.LAST_BOUNDARY:u=0;else if(u-1===i.length)if(f&dn.PART_BOUNDARY){if(u=0,g===lc){f&=~dn.PART_BOUNDARY,T("onPartEnd"),T("onPartBegin"),d=Ne.HEADER_FIELD_START;break}}else f&dn.LAST_BOUNDARY&&g===Xa?(T("onPartEnd"),d=Ne.END,f=0):u=0;if(u>0)a[u-1]=g;else if(s>0){let R=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);T("onPartData",0,s,R),s=0,w("onPartData"),r--}break;case Ne.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}P("onHeaderField"),P("onHeaderValue"),P("onPartData"),this.index=u,this.state=d,this.flags=f}end(){if(this.state===Ne.HEADER_FIELD_START&&this.index===0||this.state===Ne.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Ne.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var ly=E(Gu=>{Gu.read=function(t,e,r,n,s){var a,i,c=s*8-n-1,u=(1<<c)-1,d=u>>1,f=-7,m=r?s-1:0,b=r?-1:1,y=t[e+m];for(m+=b,a=y&(1<<-f)-1,y>>=-f,f+=c;f>0;a=a*256+t[e+m],m+=b,f-=8);for(i=a&(1<<-f)-1,a>>=-f,f+=n;f>0;i=i*256+t[e+m],m+=b,f-=8);if(a===0)a=1-d;else{if(a===u)return i?NaN:(y?-1:1)*(1/0);i=i+Math.pow(2,n),a=a-d}return(y?-1:1)*i*Math.pow(2,a-n)};Gu.write=function(t,e,r,n,s,a){var i,c,u,d=a*8-s-1,f=(1<<d)-1,m=f>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:a-1,g=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,i=f):(i=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-i))<1&&(i--,u*=2),i+m>=1?e+=b/u:e+=b*Math.pow(2,1-m),e*u>=2&&(i++,u/=2),i+m>=f?(c=0,i=f):i+m>=1?(c=(e*u-1)*Math.pow(2,s),i=i+m):(c=e*Math.pow(2,m-1)*Math.pow(2,s),i=0));s>=8;t[r+y]=c&255,y+=g,c/=256,s-=8);for(i=i<<s|c,d+=s;d>0;t[r+y]=i&255,y+=g,i/=256,d-=8);t[r+y-g]|=_*128}});var yi=E(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.regexpCode=ye.getEsmExportName=ye.getProperty=ye.safeStringify=ye.stringify=ye.strConcat=ye.addCodeArg=ye.str=ye._=ye.nil=ye._Code=ye.Name=ye.IDENTIFIER=ye._CodeOrName=void 0;var pi=class{};ye._CodeOrName=pi;ye.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var is=class extends pi{constructor(e){if(super(),!ye.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};ye.Name=is;var Bt=class extends pi{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof is&&(r[n.str]=(r[n.str]||0)+1),r),{})}};ye._Code=Bt;ye.nil=new Bt("");function l0(t,...e){let r=[t[0]],n=0;for(;n<e.length;)bd(r,e[n]),r.push(t[++n]);return new Bt(r)}ye._=l0;var _d=new Bt("+");function u0(t,...e){let r=[gi(t[0])],n=0;for(;n<e.length;)r.push(_d),bd(r,e[n]),r.push(_d,gi(t[++n]));return Uk(r),new Bt(r)}ye.str=u0;function bd(t,e){e instanceof Bt?t.push(...e._items):e instanceof is?t.push(e):t.push(Vk(e))}ye.addCodeArg=bd;function Uk(t){let e=1;for(;e<t.length-1;){if(t[e]===_d){let r=zk(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function zk(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof is||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof is))return`"${t}${e.slice(1)}`}function Lk(t,e){return e.emptyStr()?t:t.emptyStr()?e:u0`${t}${e}`}ye.strConcat=Lk;function Vk(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:gi(Array.isArray(t)?t.join(","):t)}function Bk(t){return new Bt(gi(t))}ye.stringify=Bk;function gi(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}ye.safeStringify=gi;function Wk(t){return typeof t=="string"&&ye.IDENTIFIER.test(t)?new Bt(`.${t}`):l0`[${t}]`}ye.getProperty=Wk;function Hk(t){if(typeof t=="string"&&ye.IDENTIFIER.test(t))return new Bt(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}ye.getEsmExportName=Hk;function Gk(t){return new Bt(t.toString())}ye.regexpCode=Gk});var Sd=E(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.ValueScope=wt.ValueScopeName=wt.Scope=wt.varKinds=wt.UsedValueState=void 0;var vt=yi(),vd=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},jc;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(jc||(wt.UsedValueState=jc={}));wt.varKinds={const:new vt.Name("const"),let:new vt.Name("let"),var:new vt.Name("var")};var Mc=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof vt.Name?e:this.name(e)}name(e){return new vt.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};wt.Scope=Mc;var qc=class extends vt.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,vt._)`.${new vt.Name(r)}[${n}]`}};wt.ValueScopeName=qc;var Kk=(0,vt._)`\n`,wd=class extends Mc{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Kk:vt.nil}}get(){return this._scope}name(e){return new qc(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:a}=s,i=(n=r.key)!==null&&n!==void 0?n:r.ref,c=this._values[a];if(c){let f=c.get(i);if(f)return f}else c=this._values[a]=new Map;c.set(i,s);let u=this._scope[a]||(this._scope[a]=[]),d=u.length;return u[d]=r.ref,s.setValue(r,{property:a,itemIndex:d}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,vt._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let a=vt.nil;for(let i in e){let c=e[i];if(!c)continue;let u=n[i]=n[i]||new Map;c.forEach(d=>{if(u.has(d))return;u.set(d,jc.Started);let f=r(d);if(f){let m=this.opts.es5?wt.varKinds.var:wt.varKinds.const;a=(0,vt._)`${a}${m} ${d} = ${f};${this.opts._n}`}else if(f=s?.(d))a=(0,vt._)`${a}${f}${this.opts._n}`;else throw new vd(d);u.set(d,jc.Completed)})}return a}};wt.ValueScope=wd});var ne=E(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.or=te.and=te.not=te.CodeGen=te.operators=te.varKinds=te.ValueScopeName=te.ValueScope=te.Scope=te.Name=te.regexpCode=te.stringify=te.getProperty=te.nil=te.strConcat=te.str=te._=void 0;var ue=yi(),ar=Sd(),gn=yi();Object.defineProperty(te,"_",{enumerable:!0,get:function(){return gn._}});Object.defineProperty(te,"str",{enumerable:!0,get:function(){return gn.str}});Object.defineProperty(te,"strConcat",{enumerable:!0,get:function(){return gn.strConcat}});Object.defineProperty(te,"nil",{enumerable:!0,get:function(){return gn.nil}});Object.defineProperty(te,"getProperty",{enumerable:!0,get:function(){return gn.getProperty}});Object.defineProperty(te,"stringify",{enumerable:!0,get:function(){return gn.stringify}});Object.defineProperty(te,"regexpCode",{enumerable:!0,get:function(){return gn.regexpCode}});Object.defineProperty(te,"Name",{enumerable:!0,get:function(){return gn.Name}});var zc=Sd();Object.defineProperty(te,"Scope",{enumerable:!0,get:function(){return zc.Scope}});Object.defineProperty(te,"ValueScope",{enumerable:!0,get:function(){return zc.ValueScope}});Object.defineProperty(te,"ValueScopeName",{enumerable:!0,get:function(){return zc.ValueScopeName}});Object.defineProperty(te,"varKinds",{enumerable:!0,get:function(){return zc.varKinds}});te.operators={GT:new ue._Code(">"),GTE:new ue._Code(">="),LT:new ue._Code("<"),LTE:new ue._Code("<="),EQ:new ue._Code("==="),NEQ:new ue._Code("!=="),NOT:new ue._Code("!"),OR:new ue._Code("||"),AND:new ue._Code("&&"),ADD:new ue._Code("+")};var Kr=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},$d=class extends Kr{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?ar.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Xs(this.rhs,e,r)),this}get names(){return this.rhs instanceof ue._CodeOrName?this.rhs.names:{}}},Dc=class extends Kr{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof ue.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Xs(this.rhs,e,r),this}get names(){let e=this.lhs instanceof ue.Name?{}:{...this.lhs.names};return Uc(e,this.rhs)}},xd=class extends Dc{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Ed=class extends Kr{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},kd=class extends Kr{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Td=class extends Kr{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Rd=class extends Kr{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Xs(this.code,e,r),this}get names(){return this.code instanceof ue._CodeOrName?this.code.names:{}}},_i=class extends Kr{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let a=n[s];a.optimizeNames(e,r)||(Zk(e,a.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>ls(e,r.names),{})}},Zr=class extends _i{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Pd=class extends _i{},Qs=class extends Zr{};Qs.kind="else";var os=class t extends Zr{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Qs(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(d0(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Xs(this.condition,e,r),this}get names(){let e=super.names;return Uc(e,this.condition),this.else&&ls(e,this.else.names),e}};os.kind="if";var cs=class extends Zr{};cs.kind="for";var Cd=class extends cs{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Xs(this.iteration,e,r),this}get names(){return ls(super.names,this.iteration.names)}},Ad=class extends cs{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?ar.varKinds.var:this.varKind,{name:n,from:s,to:a}=this;return`for(${r} ${n}=${s}; ${n}<${a}; ${n}++)`+super.render(e)}get names(){let e=Uc(super.names,this.from);return Uc(e,this.to)}},Fc=class extends cs{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Xs(this.iterable,e,r),this}get names(){return ls(super.names,this.iterable.names)}},bi=class extends Zr{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};bi.kind="func";var vi=class extends _i{render(e){return"return "+super.render(e)}};vi.kind="return";var Od=class extends Zr{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&ls(e,this.catch.names),this.finally&&ls(e,this.finally.names),e}},wi=class extends Zr{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};wi.kind="catch";var Si=class extends Zr{render(e){return"finally"+super.render(e)}};Si.kind="finally";var Id=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new ar.Scope({parent:e}),this._nodes=[new Pd]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let a=this._scope.toName(r);return n!==void 0&&s&&(this._constants[a.str]=n),this._leafNode(new $d(e,a,n)),a}const(e,r,n){return this._def(ar.varKinds.const,e,r,n)}let(e,r,n){return this._def(ar.varKinds.let,e,r,n)}var(e,r,n){return this._def(ar.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Dc(e,r,n))}add(e,r){return this._leafNode(new xd(e,te.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==ue.nil&&this._leafNode(new Rd(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,ue.addCodeArg)(r,s));return r.push("}"),new ue._Code(r)}if(e,r,n){if(this._blockNode(new os(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new os(e))}else(){return this._elseNode(new Qs)}endIf(){return this._endBlockNode(os,Qs)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Cd(e),r)}forRange(e,r,n,s,a=this.opts.es5?ar.varKinds.var:ar.varKinds.let){let i=this._scope.toName(e);return this._for(new Ad(a,i,r,n),()=>s(i))}forOf(e,r,n,s=ar.varKinds.const){let a=this._scope.toName(e);if(this.opts.es5){let i=r instanceof ue.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,ue._)`${i}.length`,c=>{this.var(a,(0,ue._)`${i}[${c}]`),n(a)})}return this._for(new Fc("of",s,a,r),()=>n(a))}forIn(e,r,n,s=this.opts.es5?ar.varKinds.var:ar.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,ue._)`Object.keys(${r})`,n);let a=this._scope.toName(e);return this._for(new Fc("in",s,a,r),()=>n(a))}endFor(){return this._endBlockNode(cs)}label(e){return this._leafNode(new Ed(e))}break(e){return this._leafNode(new kd(e))}return(e){let r=new vi;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(vi)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Od;if(this._blockNode(s),this.code(e),r){let a=this.name("e");this._currNode=s.catch=new wi(a),r(a)}return n&&(this._currNode=s.finally=new Si,this.code(n)),this._endBlockNode(wi,Si)}throw(e){return this._leafNode(new Td(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=ue.nil,n,s){return this._blockNode(new bi(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(bi)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof os))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};te.CodeGen=Id;function ls(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Uc(t,e){return e instanceof ue._CodeOrName?ls(t,e.names):t}function Xs(t,e,r){if(t instanceof ue.Name)return n(t);if(!s(t))return t;return new ue._Code(t._items.reduce((a,i)=>(i instanceof ue.Name&&(i=n(i)),i instanceof ue._Code?a.push(...i._items):a.push(i),a),[]));function n(a){let i=r[a.str];return i===void 0||e[a.str]!==1?a:(delete e[a.str],i)}function s(a){return a instanceof ue._Code&&a._items.some(i=>i instanceof ue.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function Zk(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function d0(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,ue._)`!${Nd(t)}`}te.not=d0;var Jk=f0(te.operators.AND);function Yk(...t){return t.reduce(Jk)}te.and=Yk;var Qk=f0(te.operators.OR);function Xk(...t){return t.reduce(Qk)}te.or=Xk;function f0(t){return(e,r)=>e===ue.nil?r:r===ue.nil?e:(0,ue._)`${Nd(e)} ${t} ${Nd(r)}`}function Nd(t){return t instanceof ue.Name?t:(0,ue._)`(${t})`}});var _e=E(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.checkStrictMode=se.getErrorPath=se.Type=se.useFunc=se.setEvaluated=se.evaluatedPropsToName=se.mergeEvaluated=se.eachItem=se.unescapeJsonPointer=se.escapeJsonPointer=se.escapeFragment=se.unescapeFragment=se.schemaRefOrVal=se.schemaHasRulesButRef=se.schemaHasRules=se.checkUnknownRules=se.alwaysValidSchema=se.toHash=void 0;var Ae=ne(),eT=yi();function tT(t){let e={};for(let r of t)e[r]=!0;return e}se.toHash=tT;function rT(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(p0(t,e),!g0(e,t.self.RULES.all))}se.alwaysValidSchema=rT;function p0(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let a in e)s[a]||b0(t,`unknown keyword: "${a}"`)}se.checkUnknownRules=p0;function g0(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}se.schemaHasRules=g0;function nT(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}se.schemaHasRulesButRef=nT;function sT({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ae._)`${r}`}return(0,Ae._)`${t}${e}${(0,Ae.getProperty)(n)}`}se.schemaRefOrVal=sT;function aT(t){return y0(decodeURIComponent(t))}se.unescapeFragment=aT;function iT(t){return encodeURIComponent(Md(t))}se.escapeFragment=iT;function Md(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}se.escapeJsonPointer=Md;function y0(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}se.unescapeJsonPointer=y0;function oT(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}se.eachItem=oT;function h0({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,a,i,c)=>{let u=i===void 0?a:i instanceof Ae.Name?(a instanceof Ae.Name?t(s,a,i):e(s,a,i),i):a instanceof Ae.Name?(e(s,i,a),a):r(a,i);return c===Ae.Name&&!(u instanceof Ae.Name)?n(s,u):u}}se.mergeEvaluated={props:h0({mergeNames:(t,e,r)=>t.if((0,Ae._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Ae._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Ae._)`${r} || {}`).code((0,Ae._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Ae._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Ae._)`${r} || {}`),qd(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:_0}),items:h0({mergeNames:(t,e,r)=>t.if((0,Ae._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Ae._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Ae._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Ae._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function _0(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Ae._)`{}`);return e!==void 0&&qd(t,r,e),r}se.evaluatedPropsToName=_0;function qd(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Ae._)`${e}${(0,Ae.getProperty)(n)}`,!0))}se.setEvaluated=qd;var m0={};function cT(t,e){return t.scopeValue("func",{ref:e,code:m0[e.code]||(m0[e.code]=new eT._Code(e.code))})}se.useFunc=cT;var jd;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(jd||(se.Type=jd={}));function lT(t,e,r){if(t instanceof Ae.Name){let n=e===jd.Num;return r?n?(0,Ae._)`"[" + ${t} + "]"`:(0,Ae._)`"['" + ${t} + "']"`:n?(0,Ae._)`"/" + ${t}`:(0,Ae._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ae.getProperty)(t).toString():"/"+Md(t)}se.getErrorPath=lT;function b0(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}se.checkStrictMode=b0});var Jr=E(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});var Xe=ne(),uT={data:new Xe.Name("data"),valCxt:new Xe.Name("valCxt"),instancePath:new Xe.Name("instancePath"),parentData:new Xe.Name("parentData"),parentDataProperty:new Xe.Name("parentDataProperty"),rootData:new Xe.Name("rootData"),dynamicAnchors:new Xe.Name("dynamicAnchors"),vErrors:new Xe.Name("vErrors"),errors:new Xe.Name("errors"),this:new Xe.Name("this"),self:new Xe.Name("self"),scope:new Xe.Name("scope"),json:new Xe.Name("json"),jsonPos:new Xe.Name("jsonPos"),jsonLen:new Xe.Name("jsonLen"),jsonPart:new Xe.Name("jsonPart")};Dd.default=uT});var $i=E(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.extendErrors=et.resetErrorsCount=et.reportExtraError=et.reportError=et.keyword$DataError=et.keywordError=void 0;var pe=ne(),Lc=_e(),lt=Jr();et.keywordError={message:({keyword:t})=>(0,pe.str)`must pass "${t}" keyword validation`};et.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,pe.str)`"${t}" keyword must be ${e} ($data)`:(0,pe.str)`"${t}" keyword is invalid ($data)`};function dT(t,e=et.keywordError,r,n){let{it:s}=t,{gen:a,compositeRule:i,allErrors:c}=s,u=S0(t,e,r);n??(i||c)?v0(a,u):w0(s,(0,pe._)`[${u}]`)}et.reportError=dT;function fT(t,e=et.keywordError,r){let{it:n}=t,{gen:s,compositeRule:a,allErrors:i}=n,c=S0(t,e,r);v0(s,c),a||i||w0(n,lt.default.vErrors)}et.reportExtraError=fT;function hT(t,e){t.assign(lt.default.errors,e),t.if((0,pe._)`${lt.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,pe._)`${lt.default.vErrors}.length`,e),()=>t.assign(lt.default.vErrors,null)))}et.resetErrorsCount=hT;function mT({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:a}){if(s===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",s,lt.default.errors,c=>{t.const(i,(0,pe._)`${lt.default.vErrors}[${c}]`),t.if((0,pe._)`${i}.instancePath === undefined`,()=>t.assign((0,pe._)`${i}.instancePath`,(0,pe.strConcat)(lt.default.instancePath,a.errorPath))),t.assign((0,pe._)`${i}.schemaPath`,(0,pe.str)`${a.errSchemaPath}/${e}`),a.opts.verbose&&(t.assign((0,pe._)`${i}.schema`,r),t.assign((0,pe._)`${i}.data`,n))})}et.extendErrors=mT;function v0(t,e){let r=t.const("err",e);t.if((0,pe._)`${lt.default.vErrors} === null`,()=>t.assign(lt.default.vErrors,(0,pe._)`[${r}]`),(0,pe._)`${lt.default.vErrors}.push(${r})`),t.code((0,pe._)`${lt.default.errors}++`)}function w0(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,pe._)`new ${t.ValidationError}(${e})`):(r.assign((0,pe._)`${n}.errors`,e),r.return(!1))}var us={keyword:new pe.Name("keyword"),schemaPath:new pe.Name("schemaPath"),params:new pe.Name("params"),propertyName:new pe.Name("propertyName"),message:new pe.Name("message"),schema:new pe.Name("schema"),parentSchema:new pe.Name("parentSchema")};function S0(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,pe._)`{}`:pT(t,e,r)}function pT(t,e,r={}){let{gen:n,it:s}=t,a=[gT(s,r),yT(t,r)];return _T(t,e,a),n.object(...a)}function gT({errorPath:t},{instancePath:e}){let r=e?(0,pe.str)`${t}${(0,Lc.getErrorPath)(e,Lc.Type.Str)}`:t;return[lt.default.instancePath,(0,pe.strConcat)(lt.default.instancePath,r)]}function yT({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,pe.str)`${e}/${t}`;return r&&(s=(0,pe.str)`${s}${(0,Lc.getErrorPath)(r,Lc.Type.Str)}`),[us.schemaPath,s]}function _T(t,{params:e,message:r},n){let{keyword:s,data:a,schemaValue:i,it:c}=t,{opts:u,propertyName:d,topSchemaRef:f,schemaPath:m}=c;n.push([us.keyword,s],[us.params,typeof e=="function"?e(t):e||(0,pe._)`{}`]),u.messages&&n.push([us.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([us.schema,i],[us.parentSchema,(0,pe._)`${f}${m}`],[lt.default.data,a]),d&&n.push([us.propertyName,d])}});var x0=E(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.boolOrEmptySchema=ea.topBoolOrEmptySchema=void 0;var bT=$i(),vT=ne(),wT=Jr(),ST={message:"boolean schema is false"};function $T(t){let{gen:e,schema:r,validateName:n}=t;r===!1?$0(t,!1):typeof r=="object"&&r.$async===!0?e.return(wT.default.data):(e.assign((0,vT._)`${n}.errors`,null),e.return(!0))}ea.topBoolOrEmptySchema=$T;function xT(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),$0(t)):r.var(e,!0)}ea.boolOrEmptySchema=xT;function $0(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,bT.reportError)(s,ST,void 0,e)}});var Fd=E(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.getRules=ta.isJSONType=void 0;var ET=["string","number","integer","boolean","null","object","array"],kT=new Set(ET);function TT(t){return typeof t=="string"&&kT.has(t)}ta.isJSONType=TT;function RT(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ta.getRules=RT});var Ud=E(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.shouldUseRule=yn.shouldUseGroup=yn.schemaHasRulesForType=void 0;function PT({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&E0(t,n)}yn.schemaHasRulesForType=PT;function E0(t,e){return e.rules.some(r=>k0(t,r))}yn.shouldUseGroup=E0;function k0(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}yn.shouldUseRule=k0});var xi=E(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.reportTypeError=tt.checkDataTypes=tt.checkDataType=tt.coerceAndCheckDataType=tt.getJSONTypes=tt.getSchemaTypes=tt.DataType=void 0;var CT=Fd(),AT=Ud(),OT=$i(),Y=ne(),T0=_e(),ra;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(ra||(tt.DataType=ra={}));function IT(t){let e=R0(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}tt.getSchemaTypes=IT;function R0(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(CT.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}tt.getJSONTypes=R0;function NT(t,e){let{gen:r,data:n,opts:s}=t,a=jT(e,s.coerceTypes),i=e.length>0&&!(a.length===0&&e.length===1&&(0,AT.schemaHasRulesForType)(t,e[0]));if(i){let c=Ld(e,n,s.strictNumbers,ra.Wrong);r.if(c,()=>{a.length?MT(t,e,a):Vd(t)})}return i}tt.coerceAndCheckDataType=NT;var P0=new Set(["string","number","integer","boolean","null"]);function jT(t,e){return e?t.filter(r=>P0.has(r)||e==="array"&&r==="array"):[]}function MT(t,e,r){let{gen:n,data:s,opts:a}=t,i=n.let("dataType",(0,Y._)`typeof ${s}`),c=n.let("coerced",(0,Y._)`undefined`);a.coerceTypes==="array"&&n.if((0,Y._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,Y._)`${s}[0]`).assign(i,(0,Y._)`typeof ${s}`).if(Ld(e,s,a.strictNumbers),()=>n.assign(c,s))),n.if((0,Y._)`${c} !== undefined`);for(let d of r)(P0.has(d)||d==="array"&&a.coerceTypes==="array")&&u(d);n.else(),Vd(t),n.endIf(),n.if((0,Y._)`${c} !== undefined`,()=>{n.assign(s,c),qT(t,c)});function u(d){switch(d){case"string":n.elseIf((0,Y._)`${i} == "number" || ${i} == "boolean"`).assign(c,(0,Y._)`"" + ${s}`).elseIf((0,Y._)`${s} === null`).assign(c,(0,Y._)`""`);return;case"number":n.elseIf((0,Y._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(c,(0,Y._)`+${s}`);return;case"integer":n.elseIf((0,Y._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(c,(0,Y._)`+${s}`);return;case"boolean":n.elseIf((0,Y._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(c,!1).elseIf((0,Y._)`${s} === "true" || ${s} === 1`).assign(c,!0);return;case"null":n.elseIf((0,Y._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(c,null);return;case"array":n.elseIf((0,Y._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(c,(0,Y._)`[${s}]`)}}}function qT({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Y._)`${e} !== undefined`,()=>t.assign((0,Y._)`${e}[${r}]`,n))}function zd(t,e,r,n=ra.Correct){let s=n===ra.Correct?Y.operators.EQ:Y.operators.NEQ,a;switch(t){case"null":return(0,Y._)`${e} ${s} null`;case"array":a=(0,Y._)`Array.isArray(${e})`;break;case"object":a=(0,Y._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=i((0,Y._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=i();break;default:return(0,Y._)`typeof ${e} ${s} ${t}`}return n===ra.Correct?a:(0,Y.not)(a);function i(c=Y.nil){return(0,Y.and)((0,Y._)`typeof ${e} == "number"`,c,r?(0,Y._)`isFinite(${e})`:Y.nil)}}tt.checkDataType=zd;function Ld(t,e,r,n){if(t.length===1)return zd(t[0],e,r,n);let s,a=(0,T0.toHash)(t);if(a.array&&a.object){let i=(0,Y._)`typeof ${e} != "object"`;s=a.null?i:(0,Y._)`!${e} || ${i}`,delete a.null,delete a.array,delete a.object}else s=Y.nil;a.number&&delete a.integer;for(let i in a)s=(0,Y.and)(s,zd(i,e,r,n));return s}tt.checkDataTypes=Ld;var DT={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Y._)`{type: ${t}}`:(0,Y._)`{type: ${e}}`};function Vd(t){let e=FT(t);(0,OT.reportError)(e,DT)}tt.reportTypeError=Vd;function FT(t){let{gen:e,data:r,schema:n}=t,s=(0,T0.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var A0=E(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.assignDefaults=void 0;var na=ne(),UT=_e();function zT(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)C0(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,a)=>C0(t,a,s.default))}Vc.assignDefaults=zT;function C0(t,e,r){let{gen:n,compositeRule:s,data:a,opts:i}=t;if(r===void 0)return;let c=(0,na._)`${a}${(0,na.getProperty)(e)}`;if(s){(0,UT.checkStrictMode)(t,`default is ignored for: ${c}`);return}let u=(0,na._)`${c} === undefined`;i.useDefaults==="empty"&&(u=(0,na._)`${u} || ${c} === null || ${c} === ""`),n.if(u,(0,na._)`${c} = ${(0,na.stringify)(r)}`)}});var Wt=E(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.validateUnion=Re.validateArray=Re.usePattern=Re.callValidateCode=Re.schemaProperties=Re.allSchemaProperties=Re.noPropertyInData=Re.propertyInData=Re.isOwnProperty=Re.hasPropFunc=Re.reportMissingProp=Re.checkMissingProp=Re.checkReportMissingProp=void 0;var je=ne(),Bd=_e(),_n=Jr(),LT=_e();function VT(t,e){let{gen:r,data:n,it:s}=t;r.if(Hd(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,je._)`${e}`},!0),t.error()})}Re.checkReportMissingProp=VT;function BT({gen:t,data:e,it:{opts:r}},n,s){return(0,je.or)(...n.map(a=>(0,je.and)(Hd(t,e,a,r.ownProperties),(0,je._)`${s} = ${a}`)))}Re.checkMissingProp=BT;function WT(t,e){t.setParams({missingProperty:e},!0),t.error()}Re.reportMissingProp=WT;function O0(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,je._)`Object.prototype.hasOwnProperty`})}Re.hasPropFunc=O0;function Wd(t,e,r){return(0,je._)`${O0(t)}.call(${e}, ${r})`}Re.isOwnProperty=Wd;function HT(t,e,r,n){let s=(0,je._)`${e}${(0,je.getProperty)(r)} !== undefined`;return n?(0,je._)`${s} && ${Wd(t,e,r)}`:s}Re.propertyInData=HT;function Hd(t,e,r,n){let s=(0,je._)`${e}${(0,je.getProperty)(r)} === undefined`;return n?(0,je.or)(s,(0,je.not)(Wd(t,e,r))):s}Re.noPropertyInData=Hd;function I0(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Re.allSchemaProperties=I0;function GT(t,e){return I0(e).filter(r=>!(0,Bd.alwaysValidSchema)(t,e[r]))}Re.schemaProperties=GT;function KT({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:a},it:i},c,u,d){let f=d?(0,je._)`${t}, ${e}, ${n}${s}`:e,m=[[_n.default.instancePath,(0,je.strConcat)(_n.default.instancePath,a)],[_n.default.parentData,i.parentData],[_n.default.parentDataProperty,i.parentDataProperty],[_n.default.rootData,_n.default.rootData]];i.opts.dynamicRef&&m.push([_n.default.dynamicAnchors,_n.default.dynamicAnchors]);let b=(0,je._)`${f}, ${r.object(...m)}`;return u!==je.nil?(0,je._)`${c}.call(${u}, ${b})`:(0,je._)`${c}(${b})`}Re.callValidateCode=KT;var ZT=(0,je._)`new RegExp`;function JT({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,a=s(r,n);return t.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,je._)`${s.code==="new RegExp"?ZT:(0,LT.useFunc)(t,s)}(${r}, ${n})`})}Re.usePattern=JT;function YT(t){let{gen:e,data:r,keyword:n,it:s}=t,a=e.name("valid");if(s.allErrors){let c=e.let("valid",!0);return i(()=>e.assign(c,!1)),c}return e.var(a,!0),i(()=>e.break()),a;function i(c){let u=e.const("len",(0,je._)`${r}.length`);e.forRange("i",0,u,d=>{t.subschema({keyword:n,dataProp:d,dataPropType:Bd.Type.Num},a),e.if((0,je.not)(a),c)})}}Re.validateArray=YT;function QT(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Bd.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let i=e.let("valid",!1),c=e.name("_valid");e.block(()=>r.forEach((u,d)=>{let f=t.subschema({keyword:n,schemaProp:d,compositeRule:!0},c);e.assign(i,(0,je._)`${i} || ${c}`),t.mergeValidEvaluated(f,c)||e.if((0,je.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}Re.validateUnion=QT});var M0=E(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.validateKeywordUsage=xr.validSchemaType=xr.funcKeywordCode=xr.macroKeywordCode=void 0;var ut=ne(),ds=Jr(),XT=Wt(),eR=$i();function tR(t,e){let{gen:r,keyword:n,schema:s,parentSchema:a,it:i}=t,c=e.macro.call(i.self,s,a,i),u=j0(r,n,c);i.opts.validateSchema!==!1&&i.self.validateSchema(c,!0);let d=r.name("valid");t.subschema({schema:c,schemaPath:ut.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}xr.macroKeywordCode=tR;function rR(t,e){var r;let{gen:n,keyword:s,schema:a,parentSchema:i,$data:c,it:u}=t;sR(u,e);let d=!c&&e.compile?e.compile.call(u.self,a,i,u):e.validate,f=j0(n,s,d),m=n.let("valid");t.block$data(m,b),t.ok((r=e.valid)!==null&&r!==void 0?r:m);function b(){if(e.errors===!1)_(),e.modifying&&N0(t),w(()=>t.error());else{let S=e.async?y():g();e.modifying&&N0(t),w(()=>nR(t,S))}}function y(){let S=n.let("ruleErrs",null);return n.try(()=>_((0,ut._)`await `),T=>n.assign(m,!1).if((0,ut._)`${T} instanceof ${u.ValidationError}`,()=>n.assign(S,(0,ut._)`${T}.errors`),()=>n.throw(T))),S}function g(){let S=(0,ut._)`${f}.errors`;return n.assign(S,null),_(ut.nil),S}function _(S=e.async?(0,ut._)`await `:ut.nil){let T=u.opts.passContext?ds.default.this:ds.default.self,P=!("compile"in e&&!c||e.schema===!1);n.assign(m,(0,ut._)`${S}${(0,XT.callValidateCode)(t,f,T,P)}`,e.modifying)}function w(S){var T;n.if((0,ut.not)((T=e.valid)!==null&&T!==void 0?T:m),S)}}xr.funcKeywordCode=rR;function N0(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,ut._)`${n.parentData}[${n.parentDataProperty}]`))}function nR(t,e){let{gen:r}=t;r.if((0,ut._)`Array.isArray(${e})`,()=>{r.assign(ds.default.vErrors,(0,ut._)`${ds.default.vErrors} === null ? ${e} : ${ds.default.vErrors}.concat(${e})`).assign(ds.default.errors,(0,ut._)`${ds.default.vErrors}.length`),(0,eR.extendErrors)(t)},()=>t.error())}function sR({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function j0(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ut.stringify)(r)})}function aR(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}xr.validSchemaType=aR;function iR({schema:t,opts:e,self:r,errSchemaPath:n},s,a){if(Array.isArray(s.keyword)?!s.keyword.includes(a):s.keyword!==a)throw new Error("ajv implementation error");let i=s.dependencies;if(i?.some(c=>!Object.prototype.hasOwnProperty.call(t,c)))throw new Error(`parent schema must have dependencies of ${a}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[a])){let u=`keyword "${a}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}xr.validateKeywordUsage=iR});var D0=E(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.extendSubschemaMode=bn.extendSubschemaData=bn.getSubschema=void 0;var Er=ne(),q0=_e();function oR(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:a,topSchemaRef:i}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let c=t.schema[e];return r===void 0?{schema:c,schemaPath:(0,Er._)`${t.schemaPath}${(0,Er.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:c[r],schemaPath:(0,Er._)`${t.schemaPath}${(0,Er.getProperty)(e)}${(0,Er.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,q0.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||a===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:i,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}bn.getSubschema=oR;function cR(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:a,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=e;if(r!==void 0){let{errorPath:d,dataPathArr:f,opts:m}=e,b=c.let("data",(0,Er._)`${e.data}${(0,Er.getProperty)(r)}`,!0);u(b),t.errorPath=(0,Er.str)`${d}${(0,q0.getErrorPath)(r,n,m.jsPropertySyntax)}`,t.parentDataProperty=(0,Er._)`${r}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){let d=s instanceof Er.Name?s:c.let("data",s,!0);u(d),i!==void 0&&(t.propertyName=i)}a&&(t.dataTypes=a);function u(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}bn.extendSubschemaData=cR;function lR(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:a}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),a!==void 0&&(t.allErrors=a),t.jtdDiscriminator=e,t.jtdMetadata=r}bn.extendSubschemaMode=lR});var Ei=E((l3,F0)=>{"use strict";F0.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;s--!==0;){var i=a[s];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var z0=E((u3,U0)=>{"use strict";var vn=U0.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Bc(e,n,s,t,"",t)};vn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};vn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};vn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};vn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Bc(t,e,r,n,s,a,i,c,u,d){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,a,i,c,u,d);for(var f in n){var m=n[f];if(Array.isArray(m)){if(f in vn.arrayKeywords)for(var b=0;b<m.length;b++)Bc(t,e,r,m[b],s+"/"+f+"/"+b,a,s,f,n,b)}else if(f in vn.propsKeywords){if(m&&typeof m=="object")for(var y in m)Bc(t,e,r,m[y],s+"/"+f+"/"+uR(y),a,s,f,n,y)}else(f in vn.keywords||t.allKeys&&!(f in vn.skipKeywords))&&Bc(t,e,r,m,s+"/"+f,a,s,f,n)}r(n,s,a,i,c,u,d)}}function uR(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var ki=E(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.getSchemaRefs=St.resolveUrl=St.normalizeId=St._getFullPath=St.getFullPath=St.inlineRef=void 0;var dR=_e(),fR=Ei(),hR=z0(),mR=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function pR(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Gd(t):e?L0(t)<=e:!1}St.inlineRef=pR;var gR=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Gd(t){for(let e in t){if(gR.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Gd)||typeof r=="object"&&Gd(r))return!0}return!1}function L0(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!mR.has(r)&&(typeof t[r]=="object"&&(0,dR.eachItem)(t[r],n=>e+=L0(n)),e===1/0))return 1/0}return e}function V0(t,e="",r){r!==!1&&(e=sa(e));let n=t.parse(e);return B0(t,n)}St.getFullPath=V0;function B0(t,e){return t.serialize(e).split("#")[0]+"#"}St._getFullPath=B0;var yR=/#\/?$/;function sa(t){return t?t.replace(yR,""):""}St.normalizeId=sa;function _R(t,e,r){return r=sa(r),t.resolve(e,r)}St.resolveUrl=_R;var bR=/^[a-z_][-a-z0-9._]*$/i;function vR(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=sa(t[r]||e),a={"":s},i=V0(n,s,!1),c={},u=new Set;return hR(t,{allKeys:!0},(m,b,y,g)=>{if(g===void 0)return;let _=i+b,w=a[g];typeof m[r]=="string"&&(w=S.call(this,m[r])),T.call(this,m.$anchor),T.call(this,m.$dynamicAnchor),a[b]=w;function S(P){let R=this.opts.uriResolver.resolve;if(P=sa(w?R(w,P):P),u.has(P))throw f(P);u.add(P);let k=this.refs[P];return typeof k=="string"&&(k=this.refs[k]),typeof k=="object"?d(m,k.schema,P):P!==sa(_)&&(P[0]==="#"?(d(m,c[P],P),c[P]=m):this.refs[P]=_),P}function T(P){if(typeof P=="string"){if(!bR.test(P))throw new Error(`invalid anchor "${P}"`);S.call(this,`#${P}`)}}}),c;function d(m,b,y){if(b!==void 0&&!fR(m,b))throw f(y)}function f(m){return new Error(`reference "${m}" resolves to more than one schema`)}}St.getSchemaRefs=vR});var Pi=E(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.getData=wn.KeywordCxt=wn.validateFunctionCode=void 0;var Z0=x0(),W0=xi(),Zd=Ud(),Wc=xi(),wR=A0(),Ri=M0(),Kd=D0(),z=ne(),G=Jr(),SR=ki(),Yr=_e(),Ti=$i();function $R(t){if(Q0(t)&&(X0(t),Y0(t))){kR(t);return}J0(t,()=>(0,Z0.topBoolOrEmptySchema)(t))}wn.validateFunctionCode=$R;function J0({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},a){s.code.es5?t.func(e,(0,z._)`${G.default.data}, ${G.default.valCxt}`,n.$async,()=>{t.code((0,z._)`"use strict"; ${H0(r,s)}`),ER(t,s),t.code(a)}):t.func(e,(0,z._)`${G.default.data}, ${xR(s)}`,n.$async,()=>t.code(H0(r,s)).code(a))}function xR(t){return(0,z._)`{${G.default.instancePath}="", ${G.default.parentData}, ${G.default.parentDataProperty}, ${G.default.rootData}=${G.default.data}${t.dynamicRef?(0,z._)`, ${G.default.dynamicAnchors}={}`:z.nil}}={}`}function ER(t,e){t.if(G.default.valCxt,()=>{t.var(G.default.instancePath,(0,z._)`${G.default.valCxt}.${G.default.instancePath}`),t.var(G.default.parentData,(0,z._)`${G.default.valCxt}.${G.default.parentData}`),t.var(G.default.parentDataProperty,(0,z._)`${G.default.valCxt}.${G.default.parentDataProperty}`),t.var(G.default.rootData,(0,z._)`${G.default.valCxt}.${G.default.rootData}`),e.dynamicRef&&t.var(G.default.dynamicAnchors,(0,z._)`${G.default.valCxt}.${G.default.dynamicAnchors}`)},()=>{t.var(G.default.instancePath,(0,z._)`""`),t.var(G.default.parentData,(0,z._)`undefined`),t.var(G.default.parentDataProperty,(0,z._)`undefined`),t.var(G.default.rootData,G.default.data),e.dynamicRef&&t.var(G.default.dynamicAnchors,(0,z._)`{}`)})}function kR(t){let{schema:e,opts:r,gen:n}=t;J0(t,()=>{r.$comment&&e.$comment&&t_(t),AR(t),n.let(G.default.vErrors,null),n.let(G.default.errors,0),r.unevaluated&&TR(t),e_(t),NR(t)})}function TR(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,z._)`${r}.evaluated`),e.if((0,z._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,z._)`${t.evaluated}.props`,(0,z._)`undefined`)),e.if((0,z._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,z._)`${t.evaluated}.items`,(0,z._)`undefined`))}function H0(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,z._)`/*# sourceURL=${r} */`:z.nil}function RR(t,e){if(Q0(t)&&(X0(t),Y0(t))){PR(t,e);return}(0,Z0.boolOrEmptySchema)(t,e)}function Y0({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Q0(t){return typeof t.schema!="boolean"}function PR(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&t_(t),OR(t),IR(t);let a=n.const("_errs",G.default.errors);e_(t,a),n.var(e,(0,z._)`${a} === ${G.default.errors}`)}function X0(t){(0,Yr.checkUnknownRules)(t),CR(t)}function e_(t,e){if(t.opts.jtd)return G0(t,[],!1,e);let r=(0,W0.getSchemaTypes)(t.schema),n=(0,W0.coerceAndCheckDataType)(t,r);G0(t,r,!n,e)}function CR(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Yr.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function AR(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Yr.checkStrictMode)(t,"default is ignored in the schema root")}function OR(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,SR.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function IR(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function t_({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let a=r.$comment;if(s.$comment===!0)t.code((0,z._)`${G.default.self}.logger.log(${a})`);else if(typeof s.$comment=="function"){let i=(0,z.str)`${n}/$comment`,c=t.scopeValue("root",{ref:e.root});t.code((0,z._)`${G.default.self}.opts.$comment(${a}, ${i}, ${c}.schema)`)}}function NR(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:a}=t;r.$async?e.if((0,z._)`${G.default.errors} === 0`,()=>e.return(G.default.data),()=>e.throw((0,z._)`new ${s}(${G.default.vErrors})`)):(e.assign((0,z._)`${n}.errors`,G.default.vErrors),a.unevaluated&&jR(t),e.return((0,z._)`${G.default.errors} === 0`))}function jR({gen:t,evaluated:e,props:r,items:n}){r instanceof z.Name&&t.assign((0,z._)`${e}.props`,r),n instanceof z.Name&&t.assign((0,z._)`${e}.items`,n)}function G0(t,e,r,n){let{gen:s,schema:a,data:i,allErrors:c,opts:u,self:d}=t,{RULES:f}=d;if(a.$ref&&(u.ignoreKeywordsWithRef||!(0,Yr.schemaHasRulesButRef)(a,f))){s.block(()=>n_(t,"$ref",f.all.$ref.definition));return}u.jtd||MR(t,e),s.block(()=>{for(let b of f.rules)m(b);m(f.post)});function m(b){(0,Zd.shouldUseGroup)(a,b)&&(b.type?(s.if((0,Wc.checkDataType)(b.type,i,u.strictNumbers)),K0(t,b),e.length===1&&e[0]===b.type&&r&&(s.else(),(0,Wc.reportTypeError)(t)),s.endIf()):K0(t,b),c||s.if((0,z._)`${G.default.errors} === ${n||0}`))}}function K0(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,wR.assignDefaults)(t,e.type),r.block(()=>{for(let a of e.rules)(0,Zd.shouldUseRule)(n,a)&&n_(t,a.keyword,a.definition,e.type)})}function MR(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(qR(t,e),t.opts.allowUnionTypes||DR(t,e),FR(t,t.dataTypes))}function qR(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{r_(t.dataTypes,r)||Jd(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),zR(t,e)}}function DR(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Jd(t,"use allowUnionTypes to allow union type keyword")}function FR(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Zd.shouldUseRule)(t.schema,s)){let{type:a}=s.definition;a.length&&!a.some(i=>UR(e,i))&&Jd(t,`missing type "${a.join(",")}" for keyword "${n}"`)}}}function UR(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function r_(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function zR(t,e){let r=[];for(let n of t.dataTypes)r_(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Jd(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Yr.checkStrictMode)(t,e,t.opts.strictTypes)}var Hc=class{constructor(e,r,n){if((0,Ri.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Yr.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",s_(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Ri.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",G.default.errors))}result(e,r,n){this.failResult((0,z.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,z.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,z._)`${r} !== undefined && (${(0,z.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Ti.reportExtraError:Ti.reportError)(this,this.def.error,r)}$dataError(){(0,Ti.reportError)(this,this.def.$dataError||Ti.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ti.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=z.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=z.nil,r=z.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:a,def:i}=this;n.if((0,z.or)((0,z._)`${s} === undefined`,r)),e!==z.nil&&n.assign(e,!0),(a.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==z.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:a}=this;return(0,z.or)(i(),c());function i(){if(n.length){if(!(r instanceof z.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,z._)`${(0,Wc.checkDataTypes)(u,r,a.opts.strictNumbers,Wc.DataType.Wrong)}`}return z.nil}function c(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,z._)`!${u}(${r})`}return z.nil}}subschema(e,r){let n=(0,Kd.getSubschema)(this.it,e);(0,Kd.extendSubschemaData)(n,this.it,e),(0,Kd.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return RR(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Yr.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Yr.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,z.Name)),!0}};wn.KeywordCxt=Hc;function n_(t,e,r,n){let s=new Hc(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Ri.funcKeywordCode)(s,r):"macro"in r?(0,Ri.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Ri.funcKeywordCode)(s,r)}var LR=/^\/(?:[^~]|~0|~1)*$/,VR=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function s_(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,a;if(t==="")return G.default.rootData;if(t[0]==="/"){if(!LR.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,a=G.default.rootData}else{let d=VR.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);let f=+d[1];if(s=d[2],s==="#"){if(f>=e)throw new Error(u("property/index",f));return n[e-f]}if(f>e)throw new Error(u("data",f));if(a=r[e-f],!s)return a}let i=a,c=s.split("/");for(let d of c)d&&(a=(0,z._)`${a}${(0,z.getProperty)((0,Yr.unescapeJsonPointer)(d))}`,i=(0,z._)`${i} && ${a}`);return i;function u(d,f){return`Cannot access ${d} ${f} levels up, current level is ${e}`}}wn.getData=s_});var Gc=E(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var Yd=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Qd.default=Yd});var Ci=E(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});var Xd=ki(),ef=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Xd.resolveUrl)(e,r,n),this.missingSchema=(0,Xd.normalizeId)((0,Xd.getFullPath)(e,this.missingRef))}};tf.default=ef});var Zc=E(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.resolveSchema=Ht.getCompilingSchema=Ht.resolveRef=Ht.compileSchema=Ht.SchemaEnv=void 0;var ir=ne(),BR=Gc(),fs=Jr(),or=ki(),a_=_e(),WR=Pi(),aa=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,or.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Ht.SchemaEnv=aa;function nf(t){let e=i_.call(this,t);if(e)return e;let r=(0,or.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:a}=this.opts,i=new ir.CodeGen(this.scope,{es5:n,lines:s,ownProperties:a}),c;t.$async&&(c=i.scopeValue("Error",{ref:BR.default,code:(0,ir._)`require("ajv/dist/runtime/validation_error").default`}));let u=i.scopeName("validate");t.validateName=u;let d={gen:i,allErrors:this.opts.allErrors,data:fs.default.data,parentData:fs.default.parentData,parentDataProperty:fs.default.parentDataProperty,dataNames:[fs.default.data],dataPathArr:[ir.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ir.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:c,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ir.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ir._)`""`,opts:this.opts,self:this},f;try{this._compilations.add(t),(0,WR.validateFunctionCode)(d),i.optimize(this.opts.code.optimize);let m=i.toString();f=`${i.scopeRefs(fs.default.scope)}return ${m}`,this.opts.code.process&&(f=this.opts.code.process(f,t));let y=new Function(`${fs.default.self}`,`${fs.default.scope}`,f)(this,this.scope.get());if(this.scope.value(u,{ref:y}),y.errors=null,y.schema=t.schema,y.schemaEnv=t,t.$async&&(y.$async=!0),this.opts.code.source===!0&&(y.source={validateName:u,validateCode:m,scopeValues:i._values}),this.opts.unevaluated){let{props:g,items:_}=d;y.evaluated={props:g instanceof ir.Name?void 0:g,items:_ instanceof ir.Name?void 0:_,dynamicProps:g instanceof ir.Name,dynamicItems:_ instanceof ir.Name},y.source&&(y.source.evaluated=(0,ir.stringify)(y.evaluated))}return t.validate=y,t}catch(m){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),m}finally{this._compilations.delete(t)}}Ht.compileSchema=nf;function HR(t,e,r){var n;r=(0,or.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let a=ZR.call(this,t,r);if(a===void 0){let i=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:c}=this.opts;i&&(a=new aa({schema:i,schemaId:c,root:t,baseId:e}))}if(a!==void 0)return t.refs[r]=GR.call(this,a)}Ht.resolveRef=HR;function GR(t){return(0,or.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:nf.call(this,t)}function i_(t){for(let e of this._compilations)if(KR(e,t))return e}Ht.getCompilingSchema=i_;function KR(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function ZR(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Kc.call(this,t,e)}function Kc(t,e){let r=this.opts.uriResolver.parse(e),n=(0,or._getFullPath)(this.opts.uriResolver,r),s=(0,or.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return rf.call(this,r,t);let a=(0,or.normalizeId)(n),i=this.refs[a]||this.schemas[a];if(typeof i=="string"){let c=Kc.call(this,t,i);return typeof c?.schema!="object"?void 0:rf.call(this,r,c)}if(typeof i?.schema=="object"){if(i.validate||nf.call(this,i),a===(0,or.normalizeId)(e)){let{schema:c}=i,{schemaId:u}=this.opts,d=c[u];return d&&(s=(0,or.resolveUrl)(this.opts.uriResolver,s,d)),new aa({schema:c,schemaId:u,root:t,baseId:s})}return rf.call(this,r,i)}}Ht.resolveSchema=Kc;var JR=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function rf(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let c of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,a_.unescapeFragment)(c)];if(u===void 0)return;r=u;let d=typeof r=="object"&&r[this.opts.schemaId];!JR.has(c)&&d&&(e=(0,or.resolveUrl)(this.opts.uriResolver,e,d))}let a;if(typeof r!="boolean"&&r.$ref&&!(0,a_.schemaHasRulesButRef)(r,this.RULES)){let c=(0,or.resolveUrl)(this.opts.uriResolver,e,r.$ref);a=Kc.call(this,n,c)}let{schemaId:i}=this.opts;if(a=a||new aa({schema:r,schemaId:i,root:n,baseId:e}),a.schema!==a.root.schema)return a}});var o_=E((g3,YR)=>{YR.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var af=E((y3,d_)=>{"use strict";var QR=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),l_=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function sf(t){let e="",r=0,n=0;for(n=0;n<t.length;n++)if(r=t[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n];break}for(n+=1;n<t.length;n++){if(r=t[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n]}return e}var XR=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function c_(t){return t.length=0,!0}function eP(t,e,r){if(t.length){let n=sf(t);if(n!=="")e.push(n);else return r.error=!0,!1;t.length=0}return!0}function tP(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],a=!1,i=!1,c=eP;for(let u=0;u<t.length;u++){let d=t[u];if(!(d==="["||d==="]"))if(d===":"){if(a===!0&&(i=!0),!c(s,n,r))break;if(++e>7){r.error=!0;break}u>0&&t[u-1]===":"&&(a=!0),n.push(":");continue}else if(d==="%"){if(!c(s,n,r))break;c=c_}else{s.push(d);continue}}return s.length&&(c===c_?r.zone=s.join(""):i?n.push(s.join("")):n.push(sf(s))),r.address=n.join(""),r}function u_(t){if(rP(t,":")<2)return{host:t,isIPV6:!1};let e=tP(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,n=e.address;return e.zone&&(r+="%"+e.zone,n+="%25"+e.zone),{host:r,isIPV6:!0,escapedHost:n}}}function rP(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}function nP(t){let e=t,r=[],n=-1,s=0;for(;s=e.length;){if(s===1){if(e===".")break;if(e==="/"){r.push("/");break}else{r.push(e);break}}else if(s===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){r.push("/");break}}else if(s===3&&e==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),r.length!==0&&r.pop();continue}}if((n=e.indexOf("/",1))===-1){r.push(e);break}else r.push(e.slice(0,n)),e=e.slice(n)}return r.join("")}function sP(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function aP(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host);if(!l_(r)){let n=u_(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}d_.exports={nonSimpleDomain:XR,recomposeAuthority:aP,normalizeComponentEncoding:sP,removeDotSegments:nP,isIPv4:l_,isUUID:QR,normalizeIPv6:u_,stringArrayToHexStripped:sf}});var g_=E((_3,p_)=>{"use strict";var{isUUID:iP}=af(),oP=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,cP=["http","https","ws","wss","urn","urn:uuid"];function lP(t){return cP.indexOf(t)!==-1}function of(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function f_(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function h_(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function uP(t){return t.secure=of(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function dP(t){if((t.port===(of(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function fP(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(oP);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,a=cf(s);t.path=void 0,a&&(t=a.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function hP(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,a=cf(s);a&&(t=a.serialize(t,e));let i=t,c=t.nss;return i.path=`${n||e.nid}:${c}`,e.skipEscape=!0,i}function mP(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!iP(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function pP(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var m_={scheme:"http",domainHost:!0,parse:f_,serialize:h_},gP={scheme:"https",domainHost:m_.domainHost,parse:f_,serialize:h_},Jc={scheme:"ws",domainHost:!0,parse:uP,serialize:dP},yP={scheme:"wss",domainHost:Jc.domainHost,parse:Jc.parse,serialize:Jc.serialize},_P={scheme:"urn",parse:fP,serialize:hP,skipNormalize:!0},bP={scheme:"urn:uuid",parse:mP,serialize:pP,skipNormalize:!0},Yc={http:m_,https:gP,ws:Jc,wss:yP,urn:_P,"urn:uuid":bP};Object.setPrototypeOf(Yc,null);function cf(t){return t&&(Yc[t]||Yc[t.toLowerCase()])||void 0}p_.exports={wsIsSecure:of,SCHEMES:Yc,isValidSchemeName:lP,getSchemeHandler:cf}});var uf=E((b3,Xc)=>{"use strict";var{normalizeIPv6:vP,removeDotSegments:Ai,recomposeAuthority:wP,normalizeComponentEncoding:Qc,isIPv4:SP,nonSimpleDomain:$P}=af(),{SCHEMES:xP,getSchemeHandler:y_}=g_();function EP(t,e){return typeof t=="string"?t=kr(Qr(t,e),e):typeof t=="object"&&(t=Qr(kr(t,e),e)),t}function kP(t,e,r){let n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=__(Qr(t,n),Qr(e,n),n,!0);return n.skipEscape=!0,kr(s,n)}function __(t,e,r,n){let s={};return n||(t=Qr(kr(t,r),r),e=Qr(kr(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Ai(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Ai(e.path||""),s.query=e.query):(e.path?(e.path[0]==="/"?s.path=Ai(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Ai(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function TP(t,e,r){return typeof t=="string"?(t=unescape(t),t=kr(Qc(Qr(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=kr(Qc(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=kr(Qc(Qr(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=kr(Qc(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function kr(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],a=y_(n.scheme||r.scheme);a&&a.serialize&&a.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");let i=wP(r);if(i!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(i),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let c=r.path;!n.absolutePath&&(!a||!a.absolutePath)&&(c=Ai(c)),i===void 0&&c[0]==="/"&&c[1]==="/"&&(c="/%2F"+c.slice(2)),s.push(c)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}var RP=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Qr(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=!1;r.reference==="suffix"&&(r.scheme?t=r.scheme+":"+t:t="//"+t);let a=t.match(RP);if(a){if(n.scheme=a[1],n.userinfo=a[3],n.host=a[4],n.port=parseInt(a[5],10),n.path=a[6]||"",n.query=a[7],n.fragment=a[8],isNaN(n.port)&&(n.port=a[5]),n.host)if(SP(n.host)===!1){let u=vP(n.host);n.host=u.host.toLowerCase(),s=u.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let i=y_(r.scheme||n.scheme);if(!r.unicodeSupport&&(!i||!i.unicodeSupport)&&n.host&&(r.domainHost||i&&i.domainHost)&&s===!1&&$P(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII: "+c}(!i||i&&!i.skipNormalize)&&(t.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),i&&i.parse&&i.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var lf={SCHEMES:xP,normalize:EP,resolve:kP,resolveComponent:__,equal:TP,serialize:kr,parse:Qr};Xc.exports=lf;Xc.exports.default=lf;Xc.exports.fastUri=lf});var v_=E(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var b_=uf();b_.code='require("ajv/dist/runtime/uri").default';df.default=b_});var R_=E(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.CodeGen=He.Name=He.nil=He.stringify=He.str=He._=He.KeywordCxt=void 0;var PP=Pi();Object.defineProperty(He,"KeywordCxt",{enumerable:!0,get:function(){return PP.KeywordCxt}});var ia=ne();Object.defineProperty(He,"_",{enumerable:!0,get:function(){return ia._}});Object.defineProperty(He,"str",{enumerable:!0,get:function(){return ia.str}});Object.defineProperty(He,"stringify",{enumerable:!0,get:function(){return ia.stringify}});Object.defineProperty(He,"nil",{enumerable:!0,get:function(){return ia.nil}});Object.defineProperty(He,"Name",{enumerable:!0,get:function(){return ia.Name}});Object.defineProperty(He,"CodeGen",{enumerable:!0,get:function(){return ia.CodeGen}});var CP=Gc(),E_=Ci(),AP=Fd(),Oi=Zc(),OP=ne(),Ii=ki(),el=xi(),hf=_e(),w_=o_(),IP=v_(),k_=(t,e)=>new RegExp(t,e);k_.code="new RegExp";var NP=["removeAdditional","useDefaults","coerceTypes"],jP=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),MP={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},qP={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},S_=200;function DP(t){var e,r,n,s,a,i,c,u,d,f,m,b,y,g,_,w,S,T,P,R,k,N,ce,Ce,x;let q=t.strict,F=(e=t.code)===null||e===void 0?void 0:e.optimize,we=F===!0||F===void 0?1:F||0,Je=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:k_,Rt=(s=t.uriResolver)!==null&&s!==void 0?s:IP.default;return{strictSchema:(i=(a=t.strictSchema)!==null&&a!==void 0?a:q)!==null&&i!==void 0?i:!0,strictNumbers:(u=(c=t.strictNumbers)!==null&&c!==void 0?c:q)!==null&&u!==void 0?u:!0,strictTypes:(f=(d=t.strictTypes)!==null&&d!==void 0?d:q)!==null&&f!==void 0?f:"log",strictTuples:(b=(m=t.strictTuples)!==null&&m!==void 0?m:q)!==null&&b!==void 0?b:"log",strictRequired:(g=(y=t.strictRequired)!==null&&y!==void 0?y:q)!==null&&g!==void 0?g:!1,code:t.code?{...t.code,optimize:we,regExp:Je}:{optimize:we,regExp:Je},loopRequired:(_=t.loopRequired)!==null&&_!==void 0?_:S_,loopEnum:(w=t.loopEnum)!==null&&w!==void 0?w:S_,meta:(S=t.meta)!==null&&S!==void 0?S:!0,messages:(T=t.messages)!==null&&T!==void 0?T:!0,inlineRefs:(P=t.inlineRefs)!==null&&P!==void 0?P:!0,schemaId:(R=t.schemaId)!==null&&R!==void 0?R:"$id",addUsedSchema:(k=t.addUsedSchema)!==null&&k!==void 0?k:!0,validateSchema:(N=t.validateSchema)!==null&&N!==void 0?N:!0,validateFormats:(ce=t.validateFormats)!==null&&ce!==void 0?ce:!0,unicodeRegExp:(Ce=t.unicodeRegExp)!==null&&Ce!==void 0?Ce:!0,int32range:(x=t.int32range)!==null&&x!==void 0?x:!0,uriResolver:Rt}}var Ni=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...DP(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new OP.ValueScope({scope:{},prefixes:jP,es5:r,lines:n}),this.logger=BP(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,AP.getRules)(),$_.call(this,MP,e,"NOT SUPPORTED"),$_.call(this,qP,e,"DEPRECATED","warn"),this._metaOpts=LP.call(this),e.formats&&UP.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&zP.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),FP.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=w_;n==="id"&&(s={...w_},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(f,m){await a.call(this,f.$schema);let b=this._addSchema(f,m);return b.validate||i.call(this,b)}async function a(f){f&&!this.getSchema(f)&&await s.call(this,{$ref:f},!0)}async function i(f){try{return this._compileSchemaEnv(f)}catch(m){if(!(m instanceof E_.default))throw m;return c.call(this,m),await u.call(this,m.missingSchema),i.call(this,f)}}function c({missingSchema:f,missingRef:m}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${m} cannot be resolved`)}async function u(f){let m=await d.call(this,f);this.refs[f]||await a.call(this,m.$schema),this.refs[f]||this.addSchema(m,f,r)}async function d(f){let m=this._loading[f];if(m)return m;try{return await(this._loading[f]=n(f))}finally{delete this._loading[f]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,n,s);return this}let a;if(typeof e=="object"){let{schemaId:i}=this.opts;if(a=e[i],a!==void 0&&typeof a!="string")throw new Error(`schema ${i} must be string`)}return r=(0,Ii.normalizeId)(r||a),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let a="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(a);else throw new Error(a)}return s}getSchema(e){let r;for(;typeof(r=x_.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Oi.SchemaEnv({schema:{},schemaId:n});if(r=Oi.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=x_.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Ii.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(HP.call(this,n,r),!r)return(0,hf.eachItem)(n,a=>ff.call(this,a)),this;KP.call(this,r);let s={...r,type:(0,el.getJSONTypes)(r.type),schemaType:(0,el.getJSONTypes)(r.schemaType)};return(0,hf.eachItem)(n,s.type.length===0?a=>ff.call(this,a,s):a=>s.type.forEach(i=>ff.call(this,a,s,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(a=>a.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,a)=>s+r+a)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let a=s.split("/").slice(1),i=e;for(let c of a)i=i[c];for(let c in n){let u=n[c];if(typeof u!="object")continue;let{$data:d}=u.definition,f=i[c];d&&f&&(i[c]=T_(f))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,a=this.opts.addUsedSchema){let i,{schemaId:c}=this.opts;if(typeof e=="object")i=e[c];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Ii.normalizeId)(i||n);let d=Ii.getSchemaRefs.call(this,e,n);return u=new Oi.SchemaEnv({schema:e,schemaId:c,meta:r,baseId:n,localRefs:d}),this._cache.set(u.schema,u),a&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Oi.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Oi.compileSchema.call(this,e)}finally{this.opts=r}}};Ni.ValidationError=CP.default;Ni.MissingRefError=E_.default;He.default=Ni;function $_(t,e,r,n="error"){for(let s in t){let a=s;a in e&&this.logger[n](`${r}: option ${s}. ${t[a]}`)}}function x_(t){return t=(0,Ii.normalizeId)(t),this.schemas[t]||this.refs[t]}function FP(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function UP(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function zP(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function LP(){let t={...this.opts};for(let e of NP)delete t[e];return t}var VP={log(){},warn(){},error(){}};function BP(t){if(t===!1)return VP;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var WP=/^[a-z_$][a-z0-9_$:-]*$/i;function HP(t,e){let{RULES:r}=this;if((0,hf.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!WP.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function ff(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:a}=this,i=s?a.post:a.rules.find(({type:u})=>u===r);if(i||(i={type:r,rules:[]},a.rules.push(i)),a.keywords[t]=!0,!e)return;let c={keyword:t,definition:{...e,type:(0,el.getJSONTypes)(e.type),schemaType:(0,el.getJSONTypes)(e.schemaType)}};e.before?GP.call(this,i,c,e.before):i.rules.push(c),a.all[t]=c,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function GP(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function KP(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=T_(e)),t.validateSchema=this.compile(e,!0))}var ZP={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function T_(t){return{anyOf:[t,ZP]}}});var P_=E(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var JP={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};mf.default=JP});var I_=E(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.callRef=hs.getValidate=void 0;var YP=Ci(),C_=Wt(),$t=ne(),oa=Jr(),A_=Zc(),tl=_e(),QP={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:a,validateName:i,opts:c,self:u}=n,{root:d}=a;if((r==="#"||r==="#/")&&s===d.baseId)return m();let f=A_.resolveRef.call(u,d,s,r);if(f===void 0)throw new YP.default(n.opts.uriResolver,s,r);if(f instanceof A_.SchemaEnv)return b(f);return y(f);function m(){if(a===d)return rl(t,i,a,a.$async);let g=e.scopeValue("root",{ref:d});return rl(t,(0,$t._)`${g}.validate`,d,d.$async)}function b(g){let _=O_(t,g);rl(t,_,g,g.$async)}function y(g){let _=e.scopeValue("schema",c.code.source===!0?{ref:g,code:(0,$t.stringify)(g)}:{ref:g}),w=e.name("valid"),S=t.subschema({schema:g,dataTypes:[],schemaPath:$t.nil,topSchemaRef:_,errSchemaPath:r},w);t.mergeEvaluated(S),t.ok(w)}}};function O_(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,$t._)`${r.scopeValue("wrapper",{ref:e})}.validate`}hs.getValidate=O_;function rl(t,e,r,n){let{gen:s,it:a}=t,{allErrors:i,schemaEnv:c,opts:u}=a,d=u.passContext?oa.default.this:$t.nil;n?f():m();function f(){if(!c.$async)throw new Error("async schema referenced by sync schema");let g=s.let("valid");s.try(()=>{s.code((0,$t._)`await ${(0,C_.callValidateCode)(t,e,d)}`),y(e),i||s.assign(g,!0)},_=>{s.if((0,$t._)`!(${_} instanceof ${a.ValidationError})`,()=>s.throw(_)),b(_),i||s.assign(g,!1)}),t.ok(g)}function m(){t.result((0,C_.callValidateCode)(t,e,d),()=>y(e),()=>b(e))}function b(g){let _=(0,$t._)`${g}.errors`;s.assign(oa.default.vErrors,(0,$t._)`${oa.default.vErrors} === null ? ${_} : ${oa.default.vErrors}.concat(${_})`),s.assign(oa.default.errors,(0,$t._)`${oa.default.vErrors}.length`)}function y(g){var _;if(!a.opts.unevaluated)return;let w=(_=r?.validate)===null||_===void 0?void 0:_.evaluated;if(a.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(a.props=tl.mergeEvaluated.props(s,w.props,a.props));else{let S=s.var("props",(0,$t._)`${g}.evaluated.props`);a.props=tl.mergeEvaluated.props(s,S,a.props,$t.Name)}if(a.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(a.items=tl.mergeEvaluated.items(s,w.items,a.items));else{let S=s.var("items",(0,$t._)`${g}.evaluated.items`);a.items=tl.mergeEvaluated.items(s,S,a.items,$t.Name)}}}hs.callRef=rl;hs.default=QP});var N_=E(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});var XP=P_(),eC=I_(),tC=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",XP.default,eC.default];pf.default=tC});var j_=E(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});var nl=ne(),Sn=nl.operators,sl={maximum:{okStr:"<=",ok:Sn.LTE,fail:Sn.GT},minimum:{okStr:">=",ok:Sn.GTE,fail:Sn.LT},exclusiveMaximum:{okStr:"<",ok:Sn.LT,fail:Sn.GTE},exclusiveMinimum:{okStr:">",ok:Sn.GT,fail:Sn.LTE}},rC={message:({keyword:t,schemaCode:e})=>(0,nl.str)`must be ${sl[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,nl._)`{comparison: ${sl[t].okStr}, limit: ${e}}`},nC={keyword:Object.keys(sl),type:"number",schemaType:"number",$data:!0,error:rC,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,nl._)`${r} ${sl[e].fail} ${n} || isNaN(${r})`)}};gf.default=nC});var M_=E(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});var ji=ne(),sC={message:({schemaCode:t})=>(0,ji.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,ji._)`{multipleOf: ${t}}`},aC={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:sC,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,a=s.opts.multipleOfPrecision,i=e.let("res"),c=a?(0,ji._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${a}`:(0,ji._)`${i} !== parseInt(${i})`;t.fail$data((0,ji._)`(${n} === 0 || (${i} = ${r}/${n}, ${c}))`)}};yf.default=aC});var D_=E(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});function q_(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}_f.default=q_;q_.code='require("ajv/dist/runtime/ucs2length").default'});var F_=E(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});var ms=ne(),iC=_e(),oC=D_(),cC={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ms.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ms._)`{limit: ${t}}`},lC={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:cC,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,a=e==="maxLength"?ms.operators.GT:ms.operators.LT,i=s.opts.unicode===!1?(0,ms._)`${r}.length`:(0,ms._)`${(0,iC.useFunc)(t.gen,oC.default)}(${r})`;t.fail$data((0,ms._)`${i} ${a} ${n}`)}};bf.default=lC});var U_=E(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});var uC=Wt(),al=ne(),dC={message:({schemaCode:t})=>(0,al.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,al._)`{pattern: ${t}}`},fC={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:dC,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:a}=t,i=a.opts.unicodeRegExp?"u":"",c=r?(0,al._)`(new RegExp(${s}, ${i}))`:(0,uC.usePattern)(t,n);t.fail$data((0,al._)`!${c}.test(${e})`)}};vf.default=fC});var z_=E(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Mi=ne(),hC={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Mi.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Mi._)`{limit: ${t}}`},mC={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:hC,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Mi.operators.GT:Mi.operators.LT;t.fail$data((0,Mi._)`Object.keys(${r}).length ${s} ${n}`)}};wf.default=mC});var L_=E(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var qi=Wt(),Di=ne(),pC=_e(),gC={message:({params:{missingProperty:t}})=>(0,Di.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Di._)`{missingProperty: ${t}}`},yC={keyword:"required",type:"object",schemaType:"array",$data:!0,error:gC,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:a,it:i}=t,{opts:c}=i;if(!a&&r.length===0)return;let u=r.length>=c.loopRequired;if(i.allErrors?d():f(),c.strictRequired){let y=t.parentSchema.properties,{definedProperties:g}=t.it;for(let _ of r)if(y?.[_]===void 0&&!g.has(_)){let w=i.schemaEnv.baseId+i.errSchemaPath,S=`required property "${_}" is not defined at "${w}" (strictRequired)`;(0,pC.checkStrictMode)(i,S,i.opts.strictRequired)}}function d(){if(u||a)t.block$data(Di.nil,m);else for(let y of r)(0,qi.checkReportMissingProp)(t,y)}function f(){let y=e.let("missing");if(u||a){let g=e.let("valid",!0);t.block$data(g,()=>b(y,g)),t.ok(g)}else e.if((0,qi.checkMissingProp)(t,r,y)),(0,qi.reportMissingProp)(t,y),e.else()}function m(){e.forOf("prop",n,y=>{t.setParams({missingProperty:y}),e.if((0,qi.noPropertyInData)(e,s,y,c.ownProperties),()=>t.error())})}function b(y,g){t.setParams({missingProperty:y}),e.forOf(y,n,()=>{e.assign(g,(0,qi.propertyInData)(e,s,y,c.ownProperties)),e.if((0,Di.not)(g),()=>{t.error(),e.break()})},Di.nil)}}};Sf.default=yC});var V_=E($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});var Fi=ne(),_C={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Fi.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Fi._)`{limit: ${t}}`},bC={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:_C,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Fi.operators.GT:Fi.operators.LT;t.fail$data((0,Fi._)`${r}.length ${s} ${n}`)}};$f.default=bC});var il=E(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var B_=Ei();B_.code='require("ajv/dist/runtime/equal").default';xf.default=B_});var W_=E(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var Ef=xi(),Ge=ne(),vC=_e(),wC=il(),SC={message:({params:{i:t,j:e}})=>(0,Ge.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Ge._)`{i: ${t}, j: ${e}}`},$C={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:SC,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:a,schemaCode:i,it:c}=t;if(!n&&!s)return;let u=e.let("valid"),d=a.items?(0,Ef.getSchemaTypes)(a.items):[];t.block$data(u,f,(0,Ge._)`${i} === false`),t.ok(u);function f(){let g=e.let("i",(0,Ge._)`${r}.length`),_=e.let("j");t.setParams({i:g,j:_}),e.assign(u,!0),e.if((0,Ge._)`${g} > 1`,()=>(m()?b:y)(g,_))}function m(){return d.length>0&&!d.some(g=>g==="object"||g==="array")}function b(g,_){let w=e.name("item"),S=(0,Ef.checkDataTypes)(d,w,c.opts.strictNumbers,Ef.DataType.Wrong),T=e.const("indices",(0,Ge._)`{}`);e.for((0,Ge._)`;${g}--;`,()=>{e.let(w,(0,Ge._)`${r}[${g}]`),e.if(S,(0,Ge._)`continue`),d.length>1&&e.if((0,Ge._)`typeof ${w} == "string"`,(0,Ge._)`${w} += "_"`),e.if((0,Ge._)`typeof ${T}[${w}] == "number"`,()=>{e.assign(_,(0,Ge._)`${T}[${w}]`),t.error(),e.assign(u,!1).break()}).code((0,Ge._)`${T}[${w}] = ${g}`)})}function y(g,_){let w=(0,vC.useFunc)(e,wC.default),S=e.name("outer");e.label(S).for((0,Ge._)`;${g}--;`,()=>e.for((0,Ge._)`${_} = ${g}; ${_}--;`,()=>e.if((0,Ge._)`${w}(${r}[${g}], ${r}[${_}])`,()=>{t.error(),e.assign(u,!1).break(S)})))}}};kf.default=$C});var H_=E(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var Tf=ne(),xC=_e(),EC=il(),kC={message:"must be equal to constant",params:({schemaCode:t})=>(0,Tf._)`{allowedValue: ${t}}`},TC={keyword:"const",$data:!0,error:kC,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:a}=t;n||a&&typeof a=="object"?t.fail$data((0,Tf._)`!${(0,xC.useFunc)(e,EC.default)}(${r}, ${s})`):t.fail((0,Tf._)`${a} !== ${r}`)}};Rf.default=TC});var G_=E(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var Ui=ne(),RC=_e(),PC=il(),CC={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ui._)`{allowedValues: ${t}}`},AC={keyword:"enum",schemaType:"array",$data:!0,error:CC,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:a,it:i}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let c=s.length>=i.opts.loopEnum,u,d=()=>u??(u=(0,RC.useFunc)(e,PC.default)),f;if(c||n)f=e.let("valid"),t.block$data(f,m);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let y=e.const("vSchema",a);f=(0,Ui.or)(...s.map((g,_)=>b(y,_)))}t.pass(f);function m(){e.assign(f,!1),e.forOf("v",a,y=>e.if((0,Ui._)`${d()}(${r}, ${y})`,()=>e.assign(f,!0).break()))}function b(y,g){let _=s[g];return typeof _=="object"&&_!==null?(0,Ui._)`${d()}(${r}, ${y}[${g}])`:(0,Ui._)`${r} === ${_}`}}};Pf.default=AC});var K_=E(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var OC=j_(),IC=M_(),NC=F_(),jC=U_(),MC=z_(),qC=L_(),DC=V_(),FC=W_(),UC=H_(),zC=G_(),LC=[OC.default,IC.default,NC.default,jC.default,MC.default,qC.default,DC.default,FC.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},UC.default,zC.default];Cf.default=LC});var Of=E(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.validateAdditionalItems=void 0;var ps=ne(),Af=_e(),VC={message:({params:{len:t}})=>(0,ps.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ps._)`{limit: ${t}}`},BC={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:VC,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,Af.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Z_(t,n)}};function Z_(t,e){let{gen:r,schema:n,data:s,keyword:a,it:i}=t;i.items=!0;let c=r.const("len",(0,ps._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ps._)`${c} <= ${e.length}`);else if(typeof n=="object"&&!(0,Af.alwaysValidSchema)(i,n)){let d=r.var("valid",(0,ps._)`${c} <= ${e.length}`);r.if((0,ps.not)(d),()=>u(d)),t.ok(d)}function u(d){r.forRange("i",e.length,c,f=>{t.subschema({keyword:a,dataProp:f,dataPropType:Af.Type.Num},d),i.allErrors||r.if((0,ps.not)(d),()=>r.break())})}}zi.validateAdditionalItems=Z_;zi.default=BC});var If=E(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.validateTuple=void 0;var J_=ne(),ol=_e(),WC=Wt(),HC={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Y_(t,"additionalItems",e);r.items=!0,!(0,ol.alwaysValidSchema)(r,e)&&t.ok((0,WC.validateArray)(t))}};function Y_(t,e,r=t.schema){let{gen:n,parentSchema:s,data:a,keyword:i,it:c}=t;f(s),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=ol.mergeEvaluated.items(n,r.length,c.items));let u=n.name("valid"),d=n.const("len",(0,J_._)`${a}.length`);r.forEach((m,b)=>{(0,ol.alwaysValidSchema)(c,m)||(n.if((0,J_._)`${d} > ${b}`,()=>t.subschema({keyword:i,schemaProp:b,dataProp:b},u)),t.ok(u))});function f(m){let{opts:b,errSchemaPath:y}=c,g=r.length,_=g===m.minItems&&(g===m.maxItems||m[e]===!1);if(b.strictTuples&&!_){let w=`"${i}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${y}"`;(0,ol.checkStrictMode)(c,w,b.strictTuples)}}}Li.validateTuple=Y_;Li.default=HC});var Q_=E(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});var GC=If(),KC={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,GC.validateTuple)(t,"items")};Nf.default=KC});var eb=E(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var X_=ne(),ZC=_e(),JC=Wt(),YC=Of(),QC={message:({params:{len:t}})=>(0,X_.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,X_._)`{limit: ${t}}`},XC={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:QC,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,ZC.alwaysValidSchema)(n,e)&&(s?(0,YC.validateAdditionalItems)(t,s):t.ok((0,JC.validateArray)(t)))}};jf.default=XC});var tb=E(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var Gt=ne(),cl=_e(),eA={message:({params:{min:t,max:e}})=>e===void 0?(0,Gt.str)`must contain at least ${t} valid item(s)`:(0,Gt.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Gt._)`{minContains: ${t}}`:(0,Gt._)`{minContains: ${t}, maxContains: ${e}}`},tA={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:eA,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:a}=t,i,c,{minContains:u,maxContains:d}=n;a.opts.next?(i=u===void 0?1:u,c=d):i=1;let f=e.const("len",(0,Gt._)`${s}.length`);if(t.setParams({min:i,max:c}),c===void 0&&i===0){(0,cl.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&i>c){(0,cl.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,cl.alwaysValidSchema)(a,r)){let _=(0,Gt._)`${f} >= ${i}`;c!==void 0&&(_=(0,Gt._)`${_} && ${f} <= ${c}`),t.pass(_);return}a.items=!0;let m=e.name("valid");c===void 0&&i===1?y(m,()=>e.if(m,()=>e.break())):i===0?(e.let(m,!0),c!==void 0&&e.if((0,Gt._)`${s}.length > 0`,b)):(e.let(m,!1),b()),t.result(m,()=>t.reset());function b(){let _=e.name("_valid"),w=e.let("count",0);y(_,()=>e.if(_,()=>g(w)))}function y(_,w){e.forRange("i",0,f,S=>{t.subschema({keyword:"contains",dataProp:S,dataPropType:cl.Type.Num,compositeRule:!0},_),w()})}function g(_){e.code((0,Gt._)`${_}++`),c===void 0?e.if((0,Gt._)`${_} >= ${i}`,()=>e.assign(m,!0).break()):(e.if((0,Gt._)`${_} > ${c}`,()=>e.assign(m,!1).break()),i===1?e.assign(m,!0):e.if((0,Gt._)`${_} >= ${i}`,()=>e.assign(m,!0)))}}};Mf.default=tA});var sb=E(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.validateSchemaDeps=Tr.validatePropertyDeps=Tr.error=void 0;var qf=ne(),rA=_e(),Vi=Wt();Tr.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,qf.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,qf._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var nA={keyword:"dependencies",type:"object",schemaType:"object",error:Tr.error,code(t){let[e,r]=sA(t);rb(t,e),nb(t,r)}};function sA({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function rb(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let a=r.let("missing");for(let i in e){let c=e[i];if(c.length===0)continue;let u=(0,Vi.propertyInData)(r,n,i,s.opts.ownProperties);t.setParams({property:i,depsCount:c.length,deps:c.join(", ")}),s.allErrors?r.if(u,()=>{for(let d of c)(0,Vi.checkReportMissingProp)(t,d)}):(r.if((0,qf._)`${u} && (${(0,Vi.checkMissingProp)(t,c,a)})`),(0,Vi.reportMissingProp)(t,a),r.else())}}Tr.validatePropertyDeps=rb;function nb(t,e=t.schema){let{gen:r,data:n,keyword:s,it:a}=t,i=r.name("valid");for(let c in e)(0,rA.alwaysValidSchema)(a,e[c])||(r.if((0,Vi.propertyInData)(r,n,c,a.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:c},i);t.mergeValidEvaluated(u,i)},()=>r.var(i,!0)),t.ok(i))}Tr.validateSchemaDeps=nb;Tr.default=nA});var ib=E(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var ab=ne(),aA=_e(),iA={message:"property name must be valid",params:({params:t})=>(0,ab._)`{propertyName: ${t.propertyName}}`},oA={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:iA,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,aA.alwaysValidSchema)(s,r))return;let a=e.name("valid");e.forIn("key",n,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},a),e.if((0,ab.not)(a),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(a)}};Df.default=oA});var Uf=E(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var ll=Wt(),cr=ne(),cA=Jr(),ul=_e(),lA={message:"must NOT have additional properties",params:({params:t})=>(0,cr._)`{additionalProperty: ${t.additionalProperty}}`},uA={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:lA,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:a,it:i}=t;if(!a)throw new Error("ajv implementation error");let{allErrors:c,opts:u}=i;if(i.props=!0,u.removeAdditional!=="all"&&(0,ul.alwaysValidSchema)(i,r))return;let d=(0,ll.allSchemaProperties)(n.properties),f=(0,ll.allSchemaProperties)(n.patternProperties);m(),t.ok((0,cr._)`${a} === ${cA.default.errors}`);function m(){e.forIn("key",s,w=>{!d.length&&!f.length?g(w):e.if(b(w),()=>g(w))})}function b(w){let S;if(d.length>8){let T=(0,ul.schemaRefOrVal)(i,n.properties,"properties");S=(0,ll.isOwnProperty)(e,T,w)}else d.length?S=(0,cr.or)(...d.map(T=>(0,cr._)`${w} === ${T}`)):S=cr.nil;return f.length&&(S=(0,cr.or)(S,...f.map(T=>(0,cr._)`${(0,ll.usePattern)(t,T)}.test(${w})`))),(0,cr.not)(S)}function y(w){e.code((0,cr._)`delete ${s}[${w}]`)}function g(w){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){y(w);return}if(r===!1){t.setParams({additionalProperty:w}),t.error(),c||e.break();return}if(typeof r=="object"&&!(0,ul.alwaysValidSchema)(i,r)){let S=e.name("valid");u.removeAdditional==="failing"?(_(w,S,!1),e.if((0,cr.not)(S),()=>{t.reset(),y(w)})):(_(w,S),c||e.if((0,cr.not)(S),()=>e.break()))}}function _(w,S,T){let P={keyword:"additionalProperties",dataProp:w,dataPropType:ul.Type.Str};T===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(P,S)}}};Ff.default=uA});var lb=E(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var dA=Pi(),ob=Wt(),zf=_e(),cb=Uf(),fA={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:a}=t;a.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&cb.default.code(new dA.KeywordCxt(a,cb.default,"additionalProperties"));let i=(0,ob.allSchemaProperties)(r);for(let m of i)a.definedProperties.add(m);a.opts.unevaluated&&i.length&&a.props!==!0&&(a.props=zf.mergeEvaluated.props(e,(0,zf.toHash)(i),a.props));let c=i.filter(m=>!(0,zf.alwaysValidSchema)(a,r[m]));if(c.length===0)return;let u=e.name("valid");for(let m of c)d(m)?f(m):(e.if((0,ob.propertyInData)(e,s,m,a.opts.ownProperties)),f(m),a.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(u);function d(m){return a.opts.useDefaults&&!a.compositeRule&&r[m].default!==void 0}function f(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},u)}}};Lf.default=fA});var hb=E(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});var ub=Wt(),dl=ne(),db=_e(),fb=_e(),hA={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:a}=t,{opts:i}=a,c=(0,ub.allSchemaProperties)(r),u=c.filter(_=>(0,db.alwaysValidSchema)(a,r[_]));if(c.length===0||u.length===c.length&&(!a.opts.unevaluated||a.props===!0))return;let d=i.strictSchema&&!i.allowMatchingProperties&&s.properties,f=e.name("valid");a.props!==!0&&!(a.props instanceof dl.Name)&&(a.props=(0,fb.evaluatedPropsToName)(e,a.props));let{props:m}=a;b();function b(){for(let _ of c)d&&y(_),a.allErrors?g(_):(e.var(f,!0),g(_),e.if(f))}function y(_){for(let w in d)new RegExp(_).test(w)&&(0,db.checkStrictMode)(a,`property ${w} matches pattern ${_} (use allowMatchingProperties)`)}function g(_){e.forIn("key",n,w=>{e.if((0,dl._)`${(0,ub.usePattern)(t,_)}.test(${w})`,()=>{let S=u.includes(_);S||t.subschema({keyword:"patternProperties",schemaProp:_,dataProp:w,dataPropType:fb.Type.Str},f),a.opts.unevaluated&&m!==!0?e.assign((0,dl._)`${m}[${w}]`,!0):!S&&!a.allErrors&&e.if((0,dl.not)(f),()=>e.break())})})}}};Vf.default=hA});var mb=E(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var mA=_e(),pA={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,mA.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Bf.default=pA});var pb=E(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var gA=Wt(),yA={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:gA.validateUnion,error:{message:"must match a schema in anyOf"}};Wf.default=yA});var gb=E(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});var fl=ne(),_A=_e(),bA={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,fl._)`{passingSchemas: ${t.passing}}`},vA={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:bA,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let a=r,i=e.let("valid",!1),c=e.let("passing",null),u=e.name("_valid");t.setParams({passing:c}),e.block(d),t.result(i,()=>t.reset(),()=>t.error(!0));function d(){a.forEach((f,m)=>{let b;(0,_A.alwaysValidSchema)(s,f)?e.var(u,!0):b=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},u),m>0&&e.if((0,fl._)`${u} && ${i}`).assign(i,!1).assign(c,(0,fl._)`[${c}, ${m}]`).else(),e.if(u,()=>{e.assign(i,!0),e.assign(c,m),b&&t.mergeEvaluated(b,fl.Name)})})}}};Hf.default=vA});var yb=E(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});var wA=_e(),SA={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((a,i)=>{if((0,wA.alwaysValidSchema)(n,a))return;let c=t.subschema({keyword:"allOf",schemaProp:i},s);t.ok(s),t.mergeEvaluated(c)})}};Gf.default=SA});var vb=E(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var hl=ne(),bb=_e(),$A={message:({params:t})=>(0,hl.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,hl._)`{failingKeyword: ${t.ifClause}}`},xA={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:$A,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,bb.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=_b(n,"then"),a=_b(n,"else");if(!s&&!a)return;let i=e.let("valid",!0),c=e.name("_valid");if(u(),t.reset(),s&&a){let f=e.let("ifClause");t.setParams({ifClause:f}),e.if(c,d("then",f),d("else",f))}else s?e.if(c,d("then")):e.if((0,hl.not)(c),d("else"));t.pass(i,()=>t.error(!0));function u(){let f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);t.mergeEvaluated(f)}function d(f,m){return()=>{let b=t.subschema({keyword:f},c);e.assign(i,c),t.mergeValidEvaluated(b,i),m?e.assign(m,(0,hl._)`${f}`):t.setParams({ifClause:f})}}}};function _b(t,e){let r=t.schema[e];return r!==void 0&&!(0,bb.alwaysValidSchema)(t,r)}Kf.default=xA});var wb=E(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var EA=_e(),kA={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,EA.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Zf.default=kA});var Sb=E(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var TA=Of(),RA=Q_(),PA=If(),CA=eb(),AA=tb(),OA=sb(),IA=ib(),NA=Uf(),jA=lb(),MA=hb(),qA=mb(),DA=pb(),FA=gb(),UA=yb(),zA=vb(),LA=wb();function VA(t=!1){let e=[qA.default,DA.default,FA.default,UA.default,zA.default,LA.default,IA.default,NA.default,OA.default,jA.default,MA.default];return t?e.push(RA.default,CA.default):e.push(TA.default,PA.default),e.push(AA.default),e}Jf.default=VA});var $b=E(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var Ue=ne(),BA={message:({schemaCode:t})=>(0,Ue.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Ue._)`{format: ${t}}`},WA={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:BA,code(t,e){let{gen:r,data:n,$data:s,schema:a,schemaCode:i,it:c}=t,{opts:u,errSchemaPath:d,schemaEnv:f,self:m}=c;if(!u.validateFormats)return;s?b():y();function b(){let g=r.scopeValue("formats",{ref:m.formats,code:u.code.formats}),_=r.const("fDef",(0,Ue._)`${g}[${i}]`),w=r.let("fType"),S=r.let("format");r.if((0,Ue._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(w,(0,Ue._)`${_}.type || "string"`).assign(S,(0,Ue._)`${_}.validate`),()=>r.assign(w,(0,Ue._)`"string"`).assign(S,_)),t.fail$data((0,Ue.or)(T(),P()));function T(){return u.strictSchema===!1?Ue.nil:(0,Ue._)`${i} && !${S}`}function P(){let R=f.$async?(0,Ue._)`(${_}.async ? await ${S}(${n}) : ${S}(${n}))`:(0,Ue._)`${S}(${n})`,k=(0,Ue._)`(typeof ${S} == "function" ? ${R} : ${S}.test(${n}))`;return(0,Ue._)`${S} && ${S} !== true && ${w} === ${e} && !${k}`}}function y(){let g=m.formats[a];if(!g){T();return}if(g===!0)return;let[_,w,S]=P(g);_===e&&t.pass(R());function T(){if(u.strictSchema===!1){m.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${a}" ignored in schema at path "${d}"`}}function P(k){let N=k instanceof RegExp?(0,Ue.regexpCode)(k):u.code.formats?(0,Ue._)`${u.code.formats}${(0,Ue.getProperty)(a)}`:void 0,ce=r.scopeValue("formats",{key:a,ref:k,code:N});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,Ue._)`${ce}.validate`]:["string",k,ce]}function R(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!f.$async)throw new Error("async format in sync schema");return(0,Ue._)`await ${S}(${n})`}return typeof w=="function"?(0,Ue._)`${S}(${n})`:(0,Ue._)`${S}.test(${n})`}}}};Yf.default=WA});var xb=E(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var HA=$b(),GA=[HA.default];Qf.default=GA});var Eb=E(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.contentVocabulary=ca.metadataVocabulary=void 0;ca.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ca.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Tb=E(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});var KA=N_(),ZA=K_(),JA=Sb(),YA=xb(),kb=Eb(),QA=[KA.default,ZA.default,(0,JA.default)(),YA.default,kb.metadataVocabulary,kb.contentVocabulary];Xf.default=QA});var Pb=E(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.DiscrError=void 0;var Rb;(function(t){t.Tag="tag",t.Mapping="mapping"})(Rb||(ml.DiscrError=Rb={}))});var Ab=E(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});var la=ne(),eh=Pb(),Cb=Zc(),XA=Ci(),eO=_e(),tO={message:({params:{discrError:t,tagName:e}})=>t===eh.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,la._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},rO={keyword:"discriminator",type:"object",schemaType:"object",error:tO,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:a}=t,{oneOf:i}=s;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");let c=n.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),d=e.const("tag",(0,la._)`${r}${(0,la.getProperty)(c)}`);e.if((0,la._)`typeof ${d} == "string"`,()=>f(),()=>t.error(!1,{discrError:eh.DiscrError.Tag,tag:d,tagName:c})),t.ok(u);function f(){let y=b();e.if(!1);for(let g in y)e.elseIf((0,la._)`${d} === ${g}`),e.assign(u,m(y[g]));e.else(),t.error(!1,{discrError:eh.DiscrError.Mapping,tag:d,tagName:c}),e.endIf()}function m(y){let g=e.name("valid"),_=t.subschema({keyword:"oneOf",schemaProp:y},g);return t.mergeEvaluated(_,la.Name),g}function b(){var y;let g={},_=S(s),w=!0;for(let R=0;R<i.length;R++){let k=i[R];if(k?.$ref&&!(0,eO.schemaHasRulesButRef)(k,a.self.RULES)){let ce=k.$ref;if(k=Cb.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,ce),k instanceof Cb.SchemaEnv&&(k=k.schema),k===void 0)throw new XA.default(a.opts.uriResolver,a.baseId,ce)}let N=(y=k?.properties)===null||y===void 0?void 0:y[c];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);w=w&&(_||S(k)),T(N,R)}if(!w)throw new Error(`discriminator: "${c}" must be required`);return g;function S({required:R}){return Array.isArray(R)&&R.includes(c)}function T(R,k){if(R.const)P(R.const,k);else if(R.enum)for(let N of R.enum)P(N,k);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function P(R,k){if(typeof R!="string"||R in g)throw new Error(`discriminator: "${c}" values must be unique strings`);g[R]=k}}}};th.default=rO});var Ob=E((o9,nO)=>{nO.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Nb=E((Me,rh)=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.MissingRefError=Me.ValidationError=Me.CodeGen=Me.Name=Me.nil=Me.stringify=Me.str=Me._=Me.KeywordCxt=Me.Ajv=void 0;var sO=R_(),aO=Tb(),iO=Ab(),Ib=Ob(),oO=["/properties"],pl="http://json-schema.org/draft-07/schema",ua=class extends sO.default{_addVocabularies(){super._addVocabularies(),aO.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(iO.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(Ib,oO):Ib;this.addMetaSchema(e,pl,!1),this.refs["http://json-schema.org/schema"]=pl}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(pl)?pl:void 0)}};Me.Ajv=ua;rh.exports=Me=ua;rh.exports.Ajv=ua;Object.defineProperty(Me,"__esModule",{value:!0});Me.default=ua;var cO=Pi();Object.defineProperty(Me,"KeywordCxt",{enumerable:!0,get:function(){return cO.KeywordCxt}});var da=ne();Object.defineProperty(Me,"_",{enumerable:!0,get:function(){return da._}});Object.defineProperty(Me,"str",{enumerable:!0,get:function(){return da.str}});Object.defineProperty(Me,"stringify",{enumerable:!0,get:function(){return da.stringify}});Object.defineProperty(Me,"nil",{enumerable:!0,get:function(){return da.nil}});Object.defineProperty(Me,"Name",{enumerable:!0,get:function(){return da.Name}});Object.defineProperty(Me,"CodeGen",{enumerable:!0,get:function(){return da.CodeGen}});var lO=Gc();Object.defineProperty(Me,"ValidationError",{enumerable:!0,get:function(){return lO.default}});var uO=Ci();Object.defineProperty(Me,"MissingRefError",{enumerable:!0,get:function(){return uO.default}})});var Lb=E(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.formatNames=Pr.fastFormats=Pr.fullFormats=void 0;function Rr(t,e){return{validate:t,compare:e}}Pr.fullFormats={date:Rr(Db,ih),time:Rr(sh(!0),oh),"date-time":Rr(jb(!0),Ub),"iso-time":Rr(sh(),Fb),"iso-date-time":Rr(jb(),zb),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:gO,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:$O,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:yO,int32:{type:"number",validate:vO},int64:{type:"number",validate:wO},float:{type:"number",validate:qb},double:{type:"number",validate:qb},password:!0,binary:!0};Pr.fastFormats={...Pr.fullFormats,date:Rr(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,ih),time:Rr(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,oh),"date-time":Rr(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Ub),"iso-time":Rr(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Fb),"iso-date-time":Rr(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,zb),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Pr.formatNames=Object.keys(Pr.fullFormats);function dO(t){return t%4===0&&(t%100!==0||t%400===0)}var fO=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,hO=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Db(t){let e=fO.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&dO(r)?29:hO[n])}function ih(t,e){if(t&&e)return t>e?1:t<e?-1:0}var nh=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function sh(t){return function(r){let n=nh.exec(r);if(!n)return!1;let s=+n[1],a=+n[2],i=+n[3],c=n[4],u=n[5]==="-"?-1:1,d=+(n[6]||0),f=+(n[7]||0);if(d>23||f>59||t&&!c)return!1;if(s<=23&&a<=59&&i<60)return!0;let m=a-f*u,b=s-d*u-(m<0?1:0);return(b===23||b===-1)&&(m===59||m===-1)&&i<61}}function oh(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),n=new Date("2020-01-01T"+e).valueOf();if(r&&n)return r-n}function Fb(t,e){if(!(t&&e))return;let r=nh.exec(t),n=nh.exec(e);if(r&&n)return t=r[1]+r[2]+r[3],e=n[1]+n[2]+n[3],t>e?1:t<e?-1:0}var ah=/t|\s/i;function jb(t){let e=sh(t);return function(n){let s=n.split(ah);return s.length===2&&Db(s[0])&&e(s[1])}}function Ub(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),n=new Date(e).valueOf();if(r&&n)return r-n}function zb(t,e){if(!(t&&e))return;let[r,n]=t.split(ah),[s,a]=e.split(ah),i=ih(r,s);if(i!==void 0)return i||oh(n,a)}var mO=/\/|:/,pO=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function gO(t){return mO.test(t)&&pO.test(t)}var Mb=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function yO(t){return Mb.lastIndex=0,Mb.test(t)}var _O=-(2**31),bO=2**31-1;function vO(t){return Number.isInteger(t)&&t<=bO&&t>=_O}function wO(t){return Number.isInteger(t)}function qb(){return!0}var SO=/[^\\]\\Z/;function $O(t){if(SO.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var Hi=E(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.regexpCode=be.getEsmExportName=be.getProperty=be.safeStringify=be.stringify=be.strConcat=be.addCodeArg=be.str=be._=be.nil=be._Code=be.Name=be.IDENTIFIER=be._CodeOrName=void 0;var Bi=class{};be._CodeOrName=Bi;be.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var gs=class extends Bi{constructor(e){if(super(),!be.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};be.Name=gs;var Kt=class extends Bi{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof gs&&(r[n.str]=(r[n.str]||0)+1),r),{})}};be._Code=Kt;be.nil=new Kt("");function Vb(t,...e){let r=[t[0]],n=0;for(;n<e.length;)lh(r,e[n]),r.push(t[++n]);return new Kt(r)}be._=Vb;var ch=new Kt("+");function Bb(t,...e){let r=[Wi(t[0])],n=0;for(;n<e.length;)r.push(ch),lh(r,e[n]),r.push(ch,Wi(t[++n]));return xO(r),new Kt(r)}be.str=Bb;function lh(t,e){e instanceof Kt?t.push(...e._items):e instanceof gs?t.push(e):t.push(TO(e))}be.addCodeArg=lh;function xO(t){let e=1;for(;e<t.length-1;){if(t[e]===ch){let r=EO(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function EO(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof gs||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof gs))return`"${t}${e.slice(1)}`}function kO(t,e){return e.emptyStr()?t:t.emptyStr()?e:Bb`${t}${e}`}be.strConcat=kO;function TO(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Wi(Array.isArray(t)?t.join(","):t)}function RO(t){return new Kt(Wi(t))}be.stringify=RO;function Wi(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}be.safeStringify=Wi;function PO(t){return typeof t=="string"&&be.IDENTIFIER.test(t)?new Kt(`.${t}`):Vb`[${t}]`}be.getProperty=PO;function CO(t){if(typeof t=="string"&&be.IDENTIFIER.test(t))return new Kt(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}be.getEsmExportName=CO;function AO(t){return new Kt(t.toString())}be.regexpCode=AO});var fh=E(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.ValueScope=Et.ValueScopeName=Et.Scope=Et.varKinds=Et.UsedValueState=void 0;var xt=Hi(),uh=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},gl;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(gl||(Et.UsedValueState=gl={}));Et.varKinds={const:new xt.Name("const"),let:new xt.Name("let"),var:new xt.Name("var")};var yl=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof xt.Name?e:this.name(e)}name(e){return new xt.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Et.Scope=yl;var _l=class extends xt.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,xt._)`.${new xt.Name(r)}[${n}]`}};Et.ValueScopeName=_l;var OO=(0,xt._)`\n`,dh=class extends yl{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?OO:xt.nil}}get(){return this._scope}name(e){return new _l(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:a}=s,i=(n=r.key)!==null&&n!==void 0?n:r.ref,c=this._values[a];if(c){let f=c.get(i);if(f)return f}else c=this._values[a]=new Map;c.set(i,s);let u=this._scope[a]||(this._scope[a]=[]),d=u.length;return u[d]=r.ref,s.setValue(r,{property:a,itemIndex:d}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,xt._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let a=xt.nil;for(let i in e){let c=e[i];if(!c)continue;let u=n[i]=n[i]||new Map;c.forEach(d=>{if(u.has(d))return;u.set(d,gl.Started);let f=r(d);if(f){let m=this.opts.es5?Et.varKinds.var:Et.varKinds.const;a=(0,xt._)`${a}${m} ${d} = ${f};${this.opts._n}`}else if(f=s?.(d))a=(0,xt._)`${a}${f}${this.opts._n}`;else throw new uh(d);u.set(d,gl.Completed)})}return a}};Et.ValueScope=dh});var ee=E(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.or=re.and=re.not=re.CodeGen=re.operators=re.varKinds=re.ValueScopeName=re.ValueScope=re.Scope=re.Name=re.regexpCode=re.stringify=re.getProperty=re.nil=re.strConcat=re.str=re._=void 0;var de=Hi(),lr=fh(),$n=Hi();Object.defineProperty(re,"_",{enumerable:!0,get:function(){return $n._}});Object.defineProperty(re,"str",{enumerable:!0,get:function(){return $n.str}});Object.defineProperty(re,"strConcat",{enumerable:!0,get:function(){return $n.strConcat}});Object.defineProperty(re,"nil",{enumerable:!0,get:function(){return $n.nil}});Object.defineProperty(re,"getProperty",{enumerable:!0,get:function(){return $n.getProperty}});Object.defineProperty(re,"stringify",{enumerable:!0,get:function(){return $n.stringify}});Object.defineProperty(re,"regexpCode",{enumerable:!0,get:function(){return $n.regexpCode}});Object.defineProperty(re,"Name",{enumerable:!0,get:function(){return $n.Name}});var Sl=fh();Object.defineProperty(re,"Scope",{enumerable:!0,get:function(){return Sl.Scope}});Object.defineProperty(re,"ValueScope",{enumerable:!0,get:function(){return Sl.ValueScope}});Object.defineProperty(re,"ValueScopeName",{enumerable:!0,get:function(){return Sl.ValueScopeName}});Object.defineProperty(re,"varKinds",{enumerable:!0,get:function(){return Sl.varKinds}});re.operators={GT:new de._Code(">"),GTE:new de._Code(">="),LT:new de._Code("<"),LTE:new de._Code("<="),EQ:new de._Code("==="),NEQ:new de._Code("!=="),NOT:new de._Code("!"),OR:new de._Code("||"),AND:new de._Code("&&"),ADD:new de._Code("+")};var Xr=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},hh=class extends Xr{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?lr.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=ha(this.rhs,e,r)),this}get names(){return this.rhs instanceof de._CodeOrName?this.rhs.names:{}}},bl=class extends Xr{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof de.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=ha(this.rhs,e,r),this}get names(){let e=this.lhs instanceof de.Name?{}:{...this.lhs.names};return wl(e,this.rhs)}},mh=class extends bl{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},ph=class extends Xr{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},gh=class extends Xr{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},yh=class extends Xr{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},_h=class extends Xr{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=ha(this.code,e,r),this}get names(){return this.code instanceof de._CodeOrName?this.code.names:{}}},Gi=class extends Xr{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let a=n[s];a.optimizeNames(e,r)||(IO(e,a.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>bs(e,r.names),{})}},en=class extends Gi{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},bh=class extends Gi{},fa=class extends en{};fa.kind="else";var ys=class t extends en{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new fa(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(Wb(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=ha(this.condition,e,r),this}get names(){let e=super.names;return wl(e,this.condition),this.else&&bs(e,this.else.names),e}};ys.kind="if";var _s=class extends en{};_s.kind="for";var vh=class extends _s{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=ha(this.iteration,e,r),this}get names(){return bs(super.names,this.iteration.names)}},wh=class extends _s{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?lr.varKinds.var:this.varKind,{name:n,from:s,to:a}=this;return`for(${r} ${n}=${s}; ${n}<${a}; ${n}++)`+super.render(e)}get names(){let e=wl(super.names,this.from);return wl(e,this.to)}},vl=class extends _s{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=ha(this.iterable,e,r),this}get names(){return bs(super.names,this.iterable.names)}},Ki=class extends en{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Ki.kind="func";var Zi=class extends Gi{render(e){return"return "+super.render(e)}};Zi.kind="return";var Sh=class extends en{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&bs(e,this.catch.names),this.finally&&bs(e,this.finally.names),e}},Ji=class extends en{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Ji.kind="catch";var Yi=class extends en{render(e){return"finally"+super.render(e)}};Yi.kind="finally";var $h=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new lr.Scope({parent:e}),this._nodes=[new bh]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let a=this._scope.toName(r);return n!==void 0&&s&&(this._constants[a.str]=n),this._leafNode(new hh(e,a,n)),a}const(e,r,n){return this._def(lr.varKinds.const,e,r,n)}let(e,r,n){return this._def(lr.varKinds.let,e,r,n)}var(e,r,n){return this._def(lr.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new bl(e,r,n))}add(e,r){return this._leafNode(new mh(e,re.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==de.nil&&this._leafNode(new _h(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,de.addCodeArg)(r,s));return r.push("}"),new de._Code(r)}if(e,r,n){if(this._blockNode(new ys(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new ys(e))}else(){return this._elseNode(new fa)}endIf(){return this._endBlockNode(ys,fa)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new vh(e),r)}forRange(e,r,n,s,a=this.opts.es5?lr.varKinds.var:lr.varKinds.let){let i=this._scope.toName(e);return this._for(new wh(a,i,r,n),()=>s(i))}forOf(e,r,n,s=lr.varKinds.const){let a=this._scope.toName(e);if(this.opts.es5){let i=r instanceof de.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,de._)`${i}.length`,c=>{this.var(a,(0,de._)`${i}[${c}]`),n(a)})}return this._for(new vl("of",s,a,r),()=>n(a))}forIn(e,r,n,s=this.opts.es5?lr.varKinds.var:lr.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,de._)`Object.keys(${r})`,n);let a=this._scope.toName(e);return this._for(new vl("in",s,a,r),()=>n(a))}endFor(){return this._endBlockNode(_s)}label(e){return this._leafNode(new ph(e))}break(e){return this._leafNode(new gh(e))}return(e){let r=new Zi;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Zi)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Sh;if(this._blockNode(s),this.code(e),r){let a=this.name("e");this._currNode=s.catch=new Ji(a),r(a)}return n&&(this._currNode=s.finally=new Yi,this.code(n)),this._endBlockNode(Ji,Yi)}throw(e){return this._leafNode(new yh(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=de.nil,n,s){return this._blockNode(new Ki(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Ki)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof ys))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};re.CodeGen=$h;function bs(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function wl(t,e){return e instanceof de._CodeOrName?bs(t,e.names):t}function ha(t,e,r){if(t instanceof de.Name)return n(t);if(!s(t))return t;return new de._Code(t._items.reduce((a,i)=>(i instanceof de.Name&&(i=n(i)),i instanceof de._Code?a.push(...i._items):a.push(i),a),[]));function n(a){let i=r[a.str];return i===void 0||e[a.str]!==1?a:(delete e[a.str],i)}function s(a){return a instanceof de._Code&&a._items.some(i=>i instanceof de.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function IO(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Wb(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,de._)`!${xh(t)}`}re.not=Wb;var NO=Hb(re.operators.AND);function jO(...t){return t.reduce(NO)}re.and=jO;var MO=Hb(re.operators.OR);function qO(...t){return t.reduce(MO)}re.or=qO;function Hb(t){return(e,r)=>e===de.nil?r:r===de.nil?e:(0,de._)`${xh(e)} ${t} ${xh(r)}`}function xh(t){return t instanceof de.Name?t:(0,de._)`(${t})`}});var ve=E(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.checkStrictMode=ae.getErrorPath=ae.Type=ae.useFunc=ae.setEvaluated=ae.evaluatedPropsToName=ae.mergeEvaluated=ae.eachItem=ae.unescapeJsonPointer=ae.escapeJsonPointer=ae.escapeFragment=ae.unescapeFragment=ae.schemaRefOrVal=ae.schemaHasRulesButRef=ae.schemaHasRules=ae.checkUnknownRules=ae.alwaysValidSchema=ae.toHash=void 0;var Oe=ee(),DO=Hi();function FO(t){let e={};for(let r of t)e[r]=!0;return e}ae.toHash=FO;function UO(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Zb(t,e),!Jb(e,t.self.RULES.all))}ae.alwaysValidSchema=UO;function Zb(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let a in e)s[a]||Xb(t,`unknown keyword: "${a}"`)}ae.checkUnknownRules=Zb;function Jb(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}ae.schemaHasRules=Jb;function zO(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}ae.schemaHasRulesButRef=zO;function LO({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Oe._)`${r}`}return(0,Oe._)`${t}${e}${(0,Oe.getProperty)(n)}`}ae.schemaRefOrVal=LO;function VO(t){return Yb(decodeURIComponent(t))}ae.unescapeFragment=VO;function BO(t){return encodeURIComponent(kh(t))}ae.escapeFragment=BO;function kh(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}ae.escapeJsonPointer=kh;function Yb(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}ae.unescapeJsonPointer=Yb;function WO(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}ae.eachItem=WO;function Gb({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,a,i,c)=>{let u=i===void 0?a:i instanceof Oe.Name?(a instanceof Oe.Name?t(s,a,i):e(s,a,i),i):a instanceof Oe.Name?(e(s,i,a),a):r(a,i);return c===Oe.Name&&!(u instanceof Oe.Name)?n(s,u):u}}ae.mergeEvaluated={props:Gb({mergeNames:(t,e,r)=>t.if((0,Oe._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Oe._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Oe._)`${r} || {}`).code((0,Oe._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Oe._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Oe._)`${r} || {}`),Th(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Qb}),items:Gb({mergeNames:(t,e,r)=>t.if((0,Oe._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Oe._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Oe._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Oe._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Qb(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Oe._)`{}`);return e!==void 0&&Th(t,r,e),r}ae.evaluatedPropsToName=Qb;function Th(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Oe._)`${e}${(0,Oe.getProperty)(n)}`,!0))}ae.setEvaluated=Th;var Kb={};function HO(t,e){return t.scopeValue("func",{ref:e,code:Kb[e.code]||(Kb[e.code]=new DO._Code(e.code))})}ae.useFunc=HO;var Eh;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Eh||(ae.Type=Eh={}));function GO(t,e,r){if(t instanceof Oe.Name){let n=e===Eh.Num;return r?n?(0,Oe._)`"[" + ${t} + "]"`:(0,Oe._)`"['" + ${t} + "']"`:n?(0,Oe._)`"/" + ${t}`:(0,Oe._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Oe.getProperty)(t).toString():"/"+kh(t)}ae.getErrorPath=GO;function Xb(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}ae.checkStrictMode=Xb});var tn=E(Rh=>{"use strict";Object.defineProperty(Rh,"__esModule",{value:!0});var rt=ee(),KO={data:new rt.Name("data"),valCxt:new rt.Name("valCxt"),instancePath:new rt.Name("instancePath"),parentData:new rt.Name("parentData"),parentDataProperty:new rt.Name("parentDataProperty"),rootData:new rt.Name("rootData"),dynamicAnchors:new rt.Name("dynamicAnchors"),vErrors:new rt.Name("vErrors"),errors:new rt.Name("errors"),this:new rt.Name("this"),self:new rt.Name("self"),scope:new rt.Name("scope"),json:new rt.Name("json"),jsonPos:new rt.Name("jsonPos"),jsonLen:new rt.Name("jsonLen"),jsonPart:new rt.Name("jsonPart")};Rh.default=KO});var Qi=E(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.extendErrors=nt.resetErrorsCount=nt.reportExtraError=nt.reportError=nt.keyword$DataError=nt.keywordError=void 0;var ge=ee(),$l=ve(),dt=tn();nt.keywordError={message:({keyword:t})=>(0,ge.str)`must pass "${t}" keyword validation`};nt.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,ge.str)`"${t}" keyword must be ${e} ($data)`:(0,ge.str)`"${t}" keyword is invalid ($data)`};function ZO(t,e=nt.keywordError,r,n){let{it:s}=t,{gen:a,compositeRule:i,allErrors:c}=s,u=rv(t,e,r);n??(i||c)?ev(a,u):tv(s,(0,ge._)`[${u}]`)}nt.reportError=ZO;function JO(t,e=nt.keywordError,r){let{it:n}=t,{gen:s,compositeRule:a,allErrors:i}=n,c=rv(t,e,r);ev(s,c),a||i||tv(n,dt.default.vErrors)}nt.reportExtraError=JO;function YO(t,e){t.assign(dt.default.errors,e),t.if((0,ge._)`${dt.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,ge._)`${dt.default.vErrors}.length`,e),()=>t.assign(dt.default.vErrors,null)))}nt.resetErrorsCount=YO;function QO({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:a}){if(s===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",s,dt.default.errors,c=>{t.const(i,(0,ge._)`${dt.default.vErrors}[${c}]`),t.if((0,ge._)`${i}.instancePath === undefined`,()=>t.assign((0,ge._)`${i}.instancePath`,(0,ge.strConcat)(dt.default.instancePath,a.errorPath))),t.assign((0,ge._)`${i}.schemaPath`,(0,ge.str)`${a.errSchemaPath}/${e}`),a.opts.verbose&&(t.assign((0,ge._)`${i}.schema`,r),t.assign((0,ge._)`${i}.data`,n))})}nt.extendErrors=QO;function ev(t,e){let r=t.const("err",e);t.if((0,ge._)`${dt.default.vErrors} === null`,()=>t.assign(dt.default.vErrors,(0,ge._)`[${r}]`),(0,ge._)`${dt.default.vErrors}.push(${r})`),t.code((0,ge._)`${dt.default.errors}++`)}function tv(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,ge._)`new ${t.ValidationError}(${e})`):(r.assign((0,ge._)`${n}.errors`,e),r.return(!1))}var vs={keyword:new ge.Name("keyword"),schemaPath:new ge.Name("schemaPath"),params:new ge.Name("params"),propertyName:new ge.Name("propertyName"),message:new ge.Name("message"),schema:new ge.Name("schema"),parentSchema:new ge.Name("parentSchema")};function rv(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,ge._)`{}`:XO(t,e,r)}function XO(t,e,r={}){let{gen:n,it:s}=t,a=[e2(s,r),t2(t,r)];return r2(t,e,a),n.object(...a)}function e2({errorPath:t},{instancePath:e}){let r=e?(0,ge.str)`${t}${(0,$l.getErrorPath)(e,$l.Type.Str)}`:t;return[dt.default.instancePath,(0,ge.strConcat)(dt.default.instancePath,r)]}function t2({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,ge.str)`${e}/${t}`;return r&&(s=(0,ge.str)`${s}${(0,$l.getErrorPath)(r,$l.Type.Str)}`),[vs.schemaPath,s]}function r2(t,{params:e,message:r},n){let{keyword:s,data:a,schemaValue:i,it:c}=t,{opts:u,propertyName:d,topSchemaRef:f,schemaPath:m}=c;n.push([vs.keyword,s],[vs.params,typeof e=="function"?e(t):e||(0,ge._)`{}`]),u.messages&&n.push([vs.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([vs.schema,i],[vs.parentSchema,(0,ge._)`${f}${m}`],[dt.default.data,a]),d&&n.push([vs.propertyName,d])}});var sv=E(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.boolOrEmptySchema=ma.topBoolOrEmptySchema=void 0;var n2=Qi(),s2=ee(),a2=tn(),i2={message:"boolean schema is false"};function o2(t){let{gen:e,schema:r,validateName:n}=t;r===!1?nv(t,!1):typeof r=="object"&&r.$async===!0?e.return(a2.default.data):(e.assign((0,s2._)`${n}.errors`,null),e.return(!0))}ma.topBoolOrEmptySchema=o2;function c2(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),nv(t)):r.var(e,!0)}ma.boolOrEmptySchema=c2;function nv(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,n2.reportError)(s,i2,void 0,e)}});var Ph=E(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.getRules=pa.isJSONType=void 0;var l2=["string","number","integer","boolean","null","object","array"],u2=new Set(l2);function d2(t){return typeof t=="string"&&u2.has(t)}pa.isJSONType=d2;function f2(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}pa.getRules=f2});var Ch=E(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.shouldUseRule=xn.shouldUseGroup=xn.schemaHasRulesForType=void 0;function h2({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&av(t,n)}xn.schemaHasRulesForType=h2;function av(t,e){return e.rules.some(r=>iv(t,r))}xn.shouldUseGroup=av;function iv(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}xn.shouldUseRule=iv});var Xi=E(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.reportTypeError=st.checkDataTypes=st.checkDataType=st.coerceAndCheckDataType=st.getJSONTypes=st.getSchemaTypes=st.DataType=void 0;var m2=Ph(),p2=Ch(),g2=Qi(),Q=ee(),ov=ve(),ga;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(ga||(st.DataType=ga={}));function y2(t){let e=cv(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}st.getSchemaTypes=y2;function cv(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(m2.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}st.getJSONTypes=cv;function _2(t,e){let{gen:r,data:n,opts:s}=t,a=b2(e,s.coerceTypes),i=e.length>0&&!(a.length===0&&e.length===1&&(0,p2.schemaHasRulesForType)(t,e[0]));if(i){let c=Oh(e,n,s.strictNumbers,ga.Wrong);r.if(c,()=>{a.length?v2(t,e,a):Ih(t)})}return i}st.coerceAndCheckDataType=_2;var lv=new Set(["string","number","integer","boolean","null"]);function b2(t,e){return e?t.filter(r=>lv.has(r)||e==="array"&&r==="array"):[]}function v2(t,e,r){let{gen:n,data:s,opts:a}=t,i=n.let("dataType",(0,Q._)`typeof ${s}`),c=n.let("coerced",(0,Q._)`undefined`);a.coerceTypes==="array"&&n.if((0,Q._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,Q._)`${s}[0]`).assign(i,(0,Q._)`typeof ${s}`).if(Oh(e,s,a.strictNumbers),()=>n.assign(c,s))),n.if((0,Q._)`${c} !== undefined`);for(let d of r)(lv.has(d)||d==="array"&&a.coerceTypes==="array")&&u(d);n.else(),Ih(t),n.endIf(),n.if((0,Q._)`${c} !== undefined`,()=>{n.assign(s,c),w2(t,c)});function u(d){switch(d){case"string":n.elseIf((0,Q._)`${i} == "number" || ${i} == "boolean"`).assign(c,(0,Q._)`"" + ${s}`).elseIf((0,Q._)`${s} === null`).assign(c,(0,Q._)`""`);return;case"number":n.elseIf((0,Q._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(c,(0,Q._)`+${s}`);return;case"integer":n.elseIf((0,Q._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(c,(0,Q._)`+${s}`);return;case"boolean":n.elseIf((0,Q._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(c,!1).elseIf((0,Q._)`${s} === "true" || ${s} === 1`).assign(c,!0);return;case"null":n.elseIf((0,Q._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(c,null);return;case"array":n.elseIf((0,Q._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(c,(0,Q._)`[${s}]`)}}}function w2({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Q._)`${e} !== undefined`,()=>t.assign((0,Q._)`${e}[${r}]`,n))}function Ah(t,e,r,n=ga.Correct){let s=n===ga.Correct?Q.operators.EQ:Q.operators.NEQ,a;switch(t){case"null":return(0,Q._)`${e} ${s} null`;case"array":a=(0,Q._)`Array.isArray(${e})`;break;case"object":a=(0,Q._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=i((0,Q._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=i();break;default:return(0,Q._)`typeof ${e} ${s} ${t}`}return n===ga.Correct?a:(0,Q.not)(a);function i(c=Q.nil){return(0,Q.and)((0,Q._)`typeof ${e} == "number"`,c,r?(0,Q._)`isFinite(${e})`:Q.nil)}}st.checkDataType=Ah;function Oh(t,e,r,n){if(t.length===1)return Ah(t[0],e,r,n);let s,a=(0,ov.toHash)(t);if(a.array&&a.object){let i=(0,Q._)`typeof ${e} != "object"`;s=a.null?i:(0,Q._)`!${e} || ${i}`,delete a.null,delete a.array,delete a.object}else s=Q.nil;a.number&&delete a.integer;for(let i in a)s=(0,Q.and)(s,Ah(i,e,r,n));return s}st.checkDataTypes=Oh;var S2={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Q._)`{type: ${t}}`:(0,Q._)`{type: ${e}}`};function Ih(t){let e=$2(t);(0,g2.reportError)(e,S2)}st.reportTypeError=Ih;function $2(t){let{gen:e,data:r,schema:n}=t,s=(0,ov.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var dv=E(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.assignDefaults=void 0;var ya=ee(),x2=ve();function E2(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)uv(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,a)=>uv(t,a,s.default))}xl.assignDefaults=E2;function uv(t,e,r){let{gen:n,compositeRule:s,data:a,opts:i}=t;if(r===void 0)return;let c=(0,ya._)`${a}${(0,ya.getProperty)(e)}`;if(s){(0,x2.checkStrictMode)(t,`default is ignored for: ${c}`);return}let u=(0,ya._)`${c} === undefined`;i.useDefaults==="empty"&&(u=(0,ya._)`${u} || ${c} === null || ${c} === ""`),n.if(u,(0,ya._)`${c} = ${(0,ya.stringify)(r)}`)}});var Zt=E(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.validateUnion=Pe.validateArray=Pe.usePattern=Pe.callValidateCode=Pe.schemaProperties=Pe.allSchemaProperties=Pe.noPropertyInData=Pe.propertyInData=Pe.isOwnProperty=Pe.hasPropFunc=Pe.reportMissingProp=Pe.checkMissingProp=Pe.checkReportMissingProp=void 0;var qe=ee(),Nh=ve(),En=tn(),k2=ve();function T2(t,e){let{gen:r,data:n,it:s}=t;r.if(Mh(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,qe._)`${e}`},!0),t.error()})}Pe.checkReportMissingProp=T2;function R2({gen:t,data:e,it:{opts:r}},n,s){return(0,qe.or)(...n.map(a=>(0,qe.and)(Mh(t,e,a,r.ownProperties),(0,qe._)`${s} = ${a}`)))}Pe.checkMissingProp=R2;function P2(t,e){t.setParams({missingProperty:e},!0),t.error()}Pe.reportMissingProp=P2;function fv(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,qe._)`Object.prototype.hasOwnProperty`})}Pe.hasPropFunc=fv;function jh(t,e,r){return(0,qe._)`${fv(t)}.call(${e}, ${r})`}Pe.isOwnProperty=jh;function C2(t,e,r,n){let s=(0,qe._)`${e}${(0,qe.getProperty)(r)} !== undefined`;return n?(0,qe._)`${s} && ${jh(t,e,r)}`:s}Pe.propertyInData=C2;function Mh(t,e,r,n){let s=(0,qe._)`${e}${(0,qe.getProperty)(r)} === undefined`;return n?(0,qe.or)(s,(0,qe.not)(jh(t,e,r))):s}Pe.noPropertyInData=Mh;function hv(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Pe.allSchemaProperties=hv;function A2(t,e){return hv(e).filter(r=>!(0,Nh.alwaysValidSchema)(t,e[r]))}Pe.schemaProperties=A2;function O2({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:a},it:i},c,u,d){let f=d?(0,qe._)`${t}, ${e}, ${n}${s}`:e,m=[[En.default.instancePath,(0,qe.strConcat)(En.default.instancePath,a)],[En.default.parentData,i.parentData],[En.default.parentDataProperty,i.parentDataProperty],[En.default.rootData,En.default.rootData]];i.opts.dynamicRef&&m.push([En.default.dynamicAnchors,En.default.dynamicAnchors]);let b=(0,qe._)`${f}, ${r.object(...m)}`;return u!==qe.nil?(0,qe._)`${c}.call(${u}, ${b})`:(0,qe._)`${c}(${b})`}Pe.callValidateCode=O2;var I2=(0,qe._)`new RegExp`;function N2({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,a=s(r,n);return t.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,qe._)`${s.code==="new RegExp"?I2:(0,k2.useFunc)(t,s)}(${r}, ${n})`})}Pe.usePattern=N2;function j2(t){let{gen:e,data:r,keyword:n,it:s}=t,a=e.name("valid");if(s.allErrors){let c=e.let("valid",!0);return i(()=>e.assign(c,!1)),c}return e.var(a,!0),i(()=>e.break()),a;function i(c){let u=e.const("len",(0,qe._)`${r}.length`);e.forRange("i",0,u,d=>{t.subschema({keyword:n,dataProp:d,dataPropType:Nh.Type.Num},a),e.if((0,qe.not)(a),c)})}}Pe.validateArray=j2;function M2(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Nh.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let i=e.let("valid",!1),c=e.name("_valid");e.block(()=>r.forEach((u,d)=>{let f=t.subschema({keyword:n,schemaProp:d,compositeRule:!0},c);e.assign(i,(0,qe._)`${i} || ${c}`),t.mergeValidEvaluated(f,c)||e.if((0,qe.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}Pe.validateUnion=M2});var gv=E(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.validateKeywordUsage=Cr.validSchemaType=Cr.funcKeywordCode=Cr.macroKeywordCode=void 0;var ft=ee(),ws=tn(),q2=Zt(),D2=Qi();function F2(t,e){let{gen:r,keyword:n,schema:s,parentSchema:a,it:i}=t,c=e.macro.call(i.self,s,a,i),u=pv(r,n,c);i.opts.validateSchema!==!1&&i.self.validateSchema(c,!0);let d=r.name("valid");t.subschema({schema:c,schemaPath:ft.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}Cr.macroKeywordCode=F2;function U2(t,e){var r;let{gen:n,keyword:s,schema:a,parentSchema:i,$data:c,it:u}=t;L2(u,e);let d=!c&&e.compile?e.compile.call(u.self,a,i,u):e.validate,f=pv(n,s,d),m=n.let("valid");t.block$data(m,b),t.ok((r=e.valid)!==null&&r!==void 0?r:m);function b(){if(e.errors===!1)_(),e.modifying&&mv(t),w(()=>t.error());else{let S=e.async?y():g();e.modifying&&mv(t),w(()=>z2(t,S))}}function y(){let S=n.let("ruleErrs",null);return n.try(()=>_((0,ft._)`await `),T=>n.assign(m,!1).if((0,ft._)`${T} instanceof ${u.ValidationError}`,()=>n.assign(S,(0,ft._)`${T}.errors`),()=>n.throw(T))),S}function g(){let S=(0,ft._)`${f}.errors`;return n.assign(S,null),_(ft.nil),S}function _(S=e.async?(0,ft._)`await `:ft.nil){let T=u.opts.passContext?ws.default.this:ws.default.self,P=!("compile"in e&&!c||e.schema===!1);n.assign(m,(0,ft._)`${S}${(0,q2.callValidateCode)(t,f,T,P)}`,e.modifying)}function w(S){var T;n.if((0,ft.not)((T=e.valid)!==null&&T!==void 0?T:m),S)}}Cr.funcKeywordCode=U2;function mv(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,ft._)`${n.parentData}[${n.parentDataProperty}]`))}function z2(t,e){let{gen:r}=t;r.if((0,ft._)`Array.isArray(${e})`,()=>{r.assign(ws.default.vErrors,(0,ft._)`${ws.default.vErrors} === null ? ${e} : ${ws.default.vErrors}.concat(${e})`).assign(ws.default.errors,(0,ft._)`${ws.default.vErrors}.length`),(0,D2.extendErrors)(t)},()=>t.error())}function L2({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function pv(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ft.stringify)(r)})}function V2(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Cr.validSchemaType=V2;function B2({schema:t,opts:e,self:r,errSchemaPath:n},s,a){if(Array.isArray(s.keyword)?!s.keyword.includes(a):s.keyword!==a)throw new Error("ajv implementation error");let i=s.dependencies;if(i?.some(c=>!Object.prototype.hasOwnProperty.call(t,c)))throw new Error(`parent schema must have dependencies of ${a}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[a])){let u=`keyword "${a}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Cr.validateKeywordUsage=B2});var _v=E(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.extendSubschemaMode=kn.extendSubschemaData=kn.getSubschema=void 0;var Ar=ee(),yv=ve();function W2(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:a,topSchemaRef:i}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let c=t.schema[e];return r===void 0?{schema:c,schemaPath:(0,Ar._)`${t.schemaPath}${(0,Ar.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:c[r],schemaPath:(0,Ar._)`${t.schemaPath}${(0,Ar.getProperty)(e)}${(0,Ar.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,yv.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||a===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:i,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}kn.getSubschema=W2;function H2(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:a,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=e;if(r!==void 0){let{errorPath:d,dataPathArr:f,opts:m}=e,b=c.let("data",(0,Ar._)`${e.data}${(0,Ar.getProperty)(r)}`,!0);u(b),t.errorPath=(0,Ar.str)`${d}${(0,yv.getErrorPath)(r,n,m.jsPropertySyntax)}`,t.parentDataProperty=(0,Ar._)`${r}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){let d=s instanceof Ar.Name?s:c.let("data",s,!0);u(d),i!==void 0&&(t.propertyName=i)}a&&(t.dataTypes=a);function u(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}kn.extendSubschemaData=H2;function G2(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:a}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),a!==void 0&&(t.allErrors=a),t.jtdDiscriminator=e,t.jtdMetadata=r}kn.extendSubschemaMode=G2});var vv=E(($9,bv)=>{"use strict";var Tn=bv.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};El(e,n,s,t,"",t)};Tn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Tn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Tn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Tn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function El(t,e,r,n,s,a,i,c,u,d){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,a,i,c,u,d);for(var f in n){var m=n[f];if(Array.isArray(m)){if(f in Tn.arrayKeywords)for(var b=0;b<m.length;b++)El(t,e,r,m[b],s+"/"+f+"/"+b,a,s,f,n,b)}else if(f in Tn.propsKeywords){if(m&&typeof m=="object")for(var y in m)El(t,e,r,m[y],s+"/"+f+"/"+K2(y),a,s,f,n,y)}else(f in Tn.keywords||t.allKeys&&!(f in Tn.skipKeywords))&&El(t,e,r,m,s+"/"+f,a,s,f,n)}r(n,s,a,i,c,u,d)}}function K2(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var eo=E(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.getSchemaRefs=kt.resolveUrl=kt.normalizeId=kt._getFullPath=kt.getFullPath=kt.inlineRef=void 0;var Z2=ve(),J2=Ei(),Y2=vv(),Q2=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function X2(t,e=!0){return typeof t=="boolean"?!0:e===!0?!qh(t):e?wv(t)<=e:!1}kt.inlineRef=X2;var eI=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function qh(t){for(let e in t){if(eI.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(qh)||typeof r=="object"&&qh(r))return!0}return!1}function wv(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Q2.has(r)&&(typeof t[r]=="object"&&(0,Z2.eachItem)(t[r],n=>e+=wv(n)),e===1/0))return 1/0}return e}function Sv(t,e="",r){r!==!1&&(e=_a(e));let n=t.parse(e);return $v(t,n)}kt.getFullPath=Sv;function $v(t,e){return t.serialize(e).split("#")[0]+"#"}kt._getFullPath=$v;var tI=/#\/?$/;function _a(t){return t?t.replace(tI,""):""}kt.normalizeId=_a;function rI(t,e,r){return r=_a(r),t.resolve(e,r)}kt.resolveUrl=rI;var nI=/^[a-z_][-a-z0-9._]*$/i;function sI(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=_a(t[r]||e),a={"":s},i=Sv(n,s,!1),c={},u=new Set;return Y2(t,{allKeys:!0},(m,b,y,g)=>{if(g===void 0)return;let _=i+b,w=a[g];typeof m[r]=="string"&&(w=S.call(this,m[r])),T.call(this,m.$anchor),T.call(this,m.$dynamicAnchor),a[b]=w;function S(P){let R=this.opts.uriResolver.resolve;if(P=_a(w?R(w,P):P),u.has(P))throw f(P);u.add(P);let k=this.refs[P];return typeof k=="string"&&(k=this.refs[k]),typeof k=="object"?d(m,k.schema,P):P!==_a(_)&&(P[0]==="#"?(d(m,c[P],P),c[P]=m):this.refs[P]=_),P}function T(P){if(typeof P=="string"){if(!nI.test(P))throw new Error(`invalid anchor "${P}"`);S.call(this,`#${P}`)}}}),c;function d(m,b,y){if(b!==void 0&&!J2(m,b))throw f(y)}function f(m){return new Error(`reference "${m}" resolves to more than one schema`)}}kt.getSchemaRefs=sI});var no=E(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.getData=Rn.KeywordCxt=Rn.validateFunctionCode=void 0;var Rv=sv(),xv=Xi(),Fh=Ch(),kl=Xi(),aI=dv(),ro=gv(),Dh=_v(),L=ee(),K=tn(),iI=eo(),rn=ve(),to=Qi();function oI(t){if(Av(t)&&(Ov(t),Cv(t))){uI(t);return}Pv(t,()=>(0,Rv.topBoolOrEmptySchema)(t))}Rn.validateFunctionCode=oI;function Pv({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},a){s.code.es5?t.func(e,(0,L._)`${K.default.data}, ${K.default.valCxt}`,n.$async,()=>{t.code((0,L._)`"use strict"; ${Ev(r,s)}`),lI(t,s),t.code(a)}):t.func(e,(0,L._)`${K.default.data}, ${cI(s)}`,n.$async,()=>t.code(Ev(r,s)).code(a))}function cI(t){return(0,L._)`{${K.default.instancePath}="", ${K.default.parentData}, ${K.default.parentDataProperty}, ${K.default.rootData}=${K.default.data}${t.dynamicRef?(0,L._)`, ${K.default.dynamicAnchors}={}`:L.nil}}={}`}function lI(t,e){t.if(K.default.valCxt,()=>{t.var(K.default.instancePath,(0,L._)`${K.default.valCxt}.${K.default.instancePath}`),t.var(K.default.parentData,(0,L._)`${K.default.valCxt}.${K.default.parentData}`),t.var(K.default.parentDataProperty,(0,L._)`${K.default.valCxt}.${K.default.parentDataProperty}`),t.var(K.default.rootData,(0,L._)`${K.default.valCxt}.${K.default.rootData}`),e.dynamicRef&&t.var(K.default.dynamicAnchors,(0,L._)`${K.default.valCxt}.${K.default.dynamicAnchors}`)},()=>{t.var(K.default.instancePath,(0,L._)`""`),t.var(K.default.parentData,(0,L._)`undefined`),t.var(K.default.parentDataProperty,(0,L._)`undefined`),t.var(K.default.rootData,K.default.data),e.dynamicRef&&t.var(K.default.dynamicAnchors,(0,L._)`{}`)})}function uI(t){let{schema:e,opts:r,gen:n}=t;Pv(t,()=>{r.$comment&&e.$comment&&Nv(t),pI(t),n.let(K.default.vErrors,null),n.let(K.default.errors,0),r.unevaluated&&dI(t),Iv(t),_I(t)})}function dI(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,L._)`${r}.evaluated`),e.if((0,L._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,L._)`${t.evaluated}.props`,(0,L._)`undefined`)),e.if((0,L._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,L._)`${t.evaluated}.items`,(0,L._)`undefined`))}function Ev(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,L._)`/*# sourceURL=${r} */`:L.nil}function fI(t,e){if(Av(t)&&(Ov(t),Cv(t))){hI(t,e);return}(0,Rv.boolOrEmptySchema)(t,e)}function Cv({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Av(t){return typeof t.schema!="boolean"}function hI(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&Nv(t),gI(t),yI(t);let a=n.const("_errs",K.default.errors);Iv(t,a),n.var(e,(0,L._)`${a} === ${K.default.errors}`)}function Ov(t){(0,rn.checkUnknownRules)(t),mI(t)}function Iv(t,e){if(t.opts.jtd)return kv(t,[],!1,e);let r=(0,xv.getSchemaTypes)(t.schema),n=(0,xv.coerceAndCheckDataType)(t,r);kv(t,r,!n,e)}function mI(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,rn.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function pI(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,rn.checkStrictMode)(t,"default is ignored in the schema root")}function gI(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,iI.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function yI(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Nv({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let a=r.$comment;if(s.$comment===!0)t.code((0,L._)`${K.default.self}.logger.log(${a})`);else if(typeof s.$comment=="function"){let i=(0,L.str)`${n}/$comment`,c=t.scopeValue("root",{ref:e.root});t.code((0,L._)`${K.default.self}.opts.$comment(${a}, ${i}, ${c}.schema)`)}}function _I(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:a}=t;r.$async?e.if((0,L._)`${K.default.errors} === 0`,()=>e.return(K.default.data),()=>e.throw((0,L._)`new ${s}(${K.default.vErrors})`)):(e.assign((0,L._)`${n}.errors`,K.default.vErrors),a.unevaluated&&bI(t),e.return((0,L._)`${K.default.errors} === 0`))}function bI({gen:t,evaluated:e,props:r,items:n}){r instanceof L.Name&&t.assign((0,L._)`${e}.props`,r),n instanceof L.Name&&t.assign((0,L._)`${e}.items`,n)}function kv(t,e,r,n){let{gen:s,schema:a,data:i,allErrors:c,opts:u,self:d}=t,{RULES:f}=d;if(a.$ref&&(u.ignoreKeywordsWithRef||!(0,rn.schemaHasRulesButRef)(a,f))){s.block(()=>Mv(t,"$ref",f.all.$ref.definition));return}u.jtd||vI(t,e),s.block(()=>{for(let b of f.rules)m(b);m(f.post)});function m(b){(0,Fh.shouldUseGroup)(a,b)&&(b.type?(s.if((0,kl.checkDataType)(b.type,i,u.strictNumbers)),Tv(t,b),e.length===1&&e[0]===b.type&&r&&(s.else(),(0,kl.reportTypeError)(t)),s.endIf()):Tv(t,b),c||s.if((0,L._)`${K.default.errors} === ${n||0}`))}}function Tv(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,aI.assignDefaults)(t,e.type),r.block(()=>{for(let a of e.rules)(0,Fh.shouldUseRule)(n,a)&&Mv(t,a.keyword,a.definition,e.type)})}function vI(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(wI(t,e),t.opts.allowUnionTypes||SI(t,e),$I(t,t.dataTypes))}function wI(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{jv(t.dataTypes,r)||Uh(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),EI(t,e)}}function SI(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Uh(t,"use allowUnionTypes to allow union type keyword")}function $I(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Fh.shouldUseRule)(t.schema,s)){let{type:a}=s.definition;a.length&&!a.some(i=>xI(e,i))&&Uh(t,`missing type "${a.join(",")}" for keyword "${n}"`)}}}function xI(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function jv(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function EI(t,e){let r=[];for(let n of t.dataTypes)jv(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Uh(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,rn.checkStrictMode)(t,e,t.opts.strictTypes)}var Tl=class{constructor(e,r,n){if((0,ro.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,rn.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",qv(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,ro.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",K.default.errors))}result(e,r,n){this.failResult((0,L.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,L.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,L._)`${r} !== undefined && (${(0,L.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?to.reportExtraError:to.reportError)(this,this.def.error,r)}$dataError(){(0,to.reportError)(this,this.def.$dataError||to.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,to.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=L.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=L.nil,r=L.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:a,def:i}=this;n.if((0,L.or)((0,L._)`${s} === undefined`,r)),e!==L.nil&&n.assign(e,!0),(a.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==L.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:a}=this;return(0,L.or)(i(),c());function i(){if(n.length){if(!(r instanceof L.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,L._)`${(0,kl.checkDataTypes)(u,r,a.opts.strictNumbers,kl.DataType.Wrong)}`}return L.nil}function c(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,L._)`!${u}(${r})`}return L.nil}}subschema(e,r){let n=(0,Dh.getSubschema)(this.it,e);(0,Dh.extendSubschemaData)(n,this.it,e),(0,Dh.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return fI(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=rn.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=rn.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,L.Name)),!0}};Rn.KeywordCxt=Tl;function Mv(t,e,r,n){let s=new Tl(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ro.funcKeywordCode)(s,r):"macro"in r?(0,ro.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ro.funcKeywordCode)(s,r)}var kI=/^\/(?:[^~]|~0|~1)*$/,TI=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function qv(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,a;if(t==="")return K.default.rootData;if(t[0]==="/"){if(!kI.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,a=K.default.rootData}else{let d=TI.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);let f=+d[1];if(s=d[2],s==="#"){if(f>=e)throw new Error(u("property/index",f));return n[e-f]}if(f>e)throw new Error(u("data",f));if(a=r[e-f],!s)return a}let i=a,c=s.split("/");for(let d of c)d&&(a=(0,L._)`${a}${(0,L.getProperty)((0,rn.unescapeJsonPointer)(d))}`,i=(0,L._)`${i} && ${a}`);return i;function u(d,f){return`Cannot access ${d} ${f} levels up, current level is ${e}`}}Rn.getData=qv});var Rl=E(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});var zh=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Lh.default=zh});var so=E(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});var Vh=eo(),Bh=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Vh.resolveUrl)(e,r,n),this.missingSchema=(0,Vh.normalizeId)((0,Vh.getFullPath)(e,this.missingRef))}};Wh.default=Bh});var Cl=E(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.resolveSchema=Jt.getCompilingSchema=Jt.resolveRef=Jt.compileSchema=Jt.SchemaEnv=void 0;var ur=ee(),RI=Rl(),Ss=tn(),dr=eo(),Dv=ve(),PI=no(),ba=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,dr.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Jt.SchemaEnv=ba;function Gh(t){let e=Fv.call(this,t);if(e)return e;let r=(0,dr.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:a}=this.opts,i=new ur.CodeGen(this.scope,{es5:n,lines:s,ownProperties:a}),c;t.$async&&(c=i.scopeValue("Error",{ref:RI.default,code:(0,ur._)`require("ajv/dist/runtime/validation_error").default`}));let u=i.scopeName("validate");t.validateName=u;let d={gen:i,allErrors:this.opts.allErrors,data:Ss.default.data,parentData:Ss.default.parentData,parentDataProperty:Ss.default.parentDataProperty,dataNames:[Ss.default.data],dataPathArr:[ur.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ur.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:c,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ur.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ur._)`""`,opts:this.opts,self:this},f;try{this._compilations.add(t),(0,PI.validateFunctionCode)(d),i.optimize(this.opts.code.optimize);let m=i.toString();f=`${i.scopeRefs(Ss.default.scope)}return ${m}`,this.opts.code.process&&(f=this.opts.code.process(f,t));let y=new Function(`${Ss.default.self}`,`${Ss.default.scope}`,f)(this,this.scope.get());if(this.scope.value(u,{ref:y}),y.errors=null,y.schema=t.schema,y.schemaEnv=t,t.$async&&(y.$async=!0),this.opts.code.source===!0&&(y.source={validateName:u,validateCode:m,scopeValues:i._values}),this.opts.unevaluated){let{props:g,items:_}=d;y.evaluated={props:g instanceof ur.Name?void 0:g,items:_ instanceof ur.Name?void 0:_,dynamicProps:g instanceof ur.Name,dynamicItems:_ instanceof ur.Name},y.source&&(y.source.evaluated=(0,ur.stringify)(y.evaluated))}return t.validate=y,t}catch(m){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),m}finally{this._compilations.delete(t)}}Jt.compileSchema=Gh;function CI(t,e,r){var n;r=(0,dr.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let a=II.call(this,t,r);if(a===void 0){let i=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:c}=this.opts;i&&(a=new ba({schema:i,schemaId:c,root:t,baseId:e}))}if(a!==void 0)return t.refs[r]=AI.call(this,a)}Jt.resolveRef=CI;function AI(t){return(0,dr.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Gh.call(this,t)}function Fv(t){for(let e of this._compilations)if(OI(e,t))return e}Jt.getCompilingSchema=Fv;function OI(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function II(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Pl.call(this,t,e)}function Pl(t,e){let r=this.opts.uriResolver.parse(e),n=(0,dr._getFullPath)(this.opts.uriResolver,r),s=(0,dr.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Hh.call(this,r,t);let a=(0,dr.normalizeId)(n),i=this.refs[a]||this.schemas[a];if(typeof i=="string"){let c=Pl.call(this,t,i);return typeof c?.schema!="object"?void 0:Hh.call(this,r,c)}if(typeof i?.schema=="object"){if(i.validate||Gh.call(this,i),a===(0,dr.normalizeId)(e)){let{schema:c}=i,{schemaId:u}=this.opts,d=c[u];return d&&(s=(0,dr.resolveUrl)(this.opts.uriResolver,s,d)),new ba({schema:c,schemaId:u,root:t,baseId:s})}return Hh.call(this,r,i)}}Jt.resolveSchema=Pl;var NI=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Hh(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let c of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,Dv.unescapeFragment)(c)];if(u===void 0)return;r=u;let d=typeof r=="object"&&r[this.opts.schemaId];!NI.has(c)&&d&&(e=(0,dr.resolveUrl)(this.opts.uriResolver,e,d))}let a;if(typeof r!="boolean"&&r.$ref&&!(0,Dv.schemaHasRulesButRef)(r,this.RULES)){let c=(0,dr.resolveUrl)(this.opts.uriResolver,e,r.$ref);a=Pl.call(this,n,c)}let{schemaId:i}=this.opts;if(a=a||new ba({schema:r,schemaId:i,root:n,baseId:e}),a.schema!==a.root.schema)return a}});var Uv=E((P9,jI)=>{jI.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Lv=E(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});var zv=uf();zv.code='require("ajv/dist/runtime/uri").default';Kh.default=zv});var Jv=E(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.CodeGen=Ke.Name=Ke.nil=Ke.stringify=Ke.str=Ke._=Ke.KeywordCxt=void 0;var MI=no();Object.defineProperty(Ke,"KeywordCxt",{enumerable:!0,get:function(){return MI.KeywordCxt}});var va=ee();Object.defineProperty(Ke,"_",{enumerable:!0,get:function(){return va._}});Object.defineProperty(Ke,"str",{enumerable:!0,get:function(){return va.str}});Object.defineProperty(Ke,"stringify",{enumerable:!0,get:function(){return va.stringify}});Object.defineProperty(Ke,"nil",{enumerable:!0,get:function(){return va.nil}});Object.defineProperty(Ke,"Name",{enumerable:!0,get:function(){return va.Name}});Object.defineProperty(Ke,"CodeGen",{enumerable:!0,get:function(){return va.CodeGen}});var qI=Rl(),Gv=so(),DI=Ph(),ao=Cl(),FI=ee(),io=eo(),Al=Xi(),Jh=ve(),Vv=Uv(),UI=Lv(),Kv=(t,e)=>new RegExp(t,e);Kv.code="new RegExp";var zI=["removeAdditional","useDefaults","coerceTypes"],LI=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),VI={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},BI={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Bv=200;function WI(t){var e,r,n,s,a,i,c,u,d,f,m,b,y,g,_,w,S,T,P,R,k,N,ce,Ce,x;let q=t.strict,F=(e=t.code)===null||e===void 0?void 0:e.optimize,we=F===!0||F===void 0?1:F||0,Je=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Kv,Rt=(s=t.uriResolver)!==null&&s!==void 0?s:UI.default;return{strictSchema:(i=(a=t.strictSchema)!==null&&a!==void 0?a:q)!==null&&i!==void 0?i:!0,strictNumbers:(u=(c=t.strictNumbers)!==null&&c!==void 0?c:q)!==null&&u!==void 0?u:!0,strictTypes:(f=(d=t.strictTypes)!==null&&d!==void 0?d:q)!==null&&f!==void 0?f:"log",strictTuples:(b=(m=t.strictTuples)!==null&&m!==void 0?m:q)!==null&&b!==void 0?b:"log",strictRequired:(g=(y=t.strictRequired)!==null&&y!==void 0?y:q)!==null&&g!==void 0?g:!1,code:t.code?{...t.code,optimize:we,regExp:Je}:{optimize:we,regExp:Je},loopRequired:(_=t.loopRequired)!==null&&_!==void 0?_:Bv,loopEnum:(w=t.loopEnum)!==null&&w!==void 0?w:Bv,meta:(S=t.meta)!==null&&S!==void 0?S:!0,messages:(T=t.messages)!==null&&T!==void 0?T:!0,inlineRefs:(P=t.inlineRefs)!==null&&P!==void 0?P:!0,schemaId:(R=t.schemaId)!==null&&R!==void 0?R:"$id",addUsedSchema:(k=t.addUsedSchema)!==null&&k!==void 0?k:!0,validateSchema:(N=t.validateSchema)!==null&&N!==void 0?N:!0,validateFormats:(ce=t.validateFormats)!==null&&ce!==void 0?ce:!0,unicodeRegExp:(Ce=t.unicodeRegExp)!==null&&Ce!==void 0?Ce:!0,int32range:(x=t.int32range)!==null&&x!==void 0?x:!0,uriResolver:Rt}}var oo=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...WI(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new FI.ValueScope({scope:{},prefixes:LI,es5:r,lines:n}),this.logger=YI(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,DI.getRules)(),Wv.call(this,VI,e,"NOT SUPPORTED"),Wv.call(this,BI,e,"DEPRECATED","warn"),this._metaOpts=ZI.call(this),e.formats&&GI.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&KI.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),HI.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=Vv;n==="id"&&(s={...Vv},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(f,m){await a.call(this,f.$schema);let b=this._addSchema(f,m);return b.validate||i.call(this,b)}async function a(f){f&&!this.getSchema(f)&&await s.call(this,{$ref:f},!0)}async function i(f){try{return this._compileSchemaEnv(f)}catch(m){if(!(m instanceof Gv.default))throw m;return c.call(this,m),await u.call(this,m.missingSchema),i.call(this,f)}}function c({missingSchema:f,missingRef:m}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${m} cannot be resolved`)}async function u(f){let m=await d.call(this,f);this.refs[f]||await a.call(this,m.$schema),this.refs[f]||this.addSchema(m,f,r)}async function d(f){let m=this._loading[f];if(m)return m;try{return await(this._loading[f]=n(f))}finally{delete this._loading[f]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,n,s);return this}let a;if(typeof e=="object"){let{schemaId:i}=this.opts;if(a=e[i],a!==void 0&&typeof a!="string")throw new Error(`schema ${i} must be string`)}return r=(0,io.normalizeId)(r||a),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let a="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(a);else throw new Error(a)}return s}getSchema(e){let r;for(;typeof(r=Hv.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new ao.SchemaEnv({schema:{},schemaId:n});if(r=ao.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Hv.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,io.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(XI.call(this,n,r),!r)return(0,Jh.eachItem)(n,a=>Zh.call(this,a)),this;tN.call(this,r);let s={...r,type:(0,Al.getJSONTypes)(r.type),schemaType:(0,Al.getJSONTypes)(r.schemaType)};return(0,Jh.eachItem)(n,s.type.length===0?a=>Zh.call(this,a,s):a=>s.type.forEach(i=>Zh.call(this,a,s,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(a=>a.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,a)=>s+r+a)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let a=s.split("/").slice(1),i=e;for(let c of a)i=i[c];for(let c in n){let u=n[c];if(typeof u!="object")continue;let{$data:d}=u.definition,f=i[c];d&&f&&(i[c]=Zv(f))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,a=this.opts.addUsedSchema){let i,{schemaId:c}=this.opts;if(typeof e=="object")i=e[c];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,io.normalizeId)(i||n);let d=io.getSchemaRefs.call(this,e,n);return u=new ao.SchemaEnv({schema:e,schemaId:c,meta:r,baseId:n,localRefs:d}),this._cache.set(u.schema,u),a&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):ao.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{ao.compileSchema.call(this,e)}finally{this.opts=r}}};oo.ValidationError=qI.default;oo.MissingRefError=Gv.default;Ke.default=oo;function Wv(t,e,r,n="error"){for(let s in t){let a=s;a in e&&this.logger[n](`${r}: option ${s}. ${t[a]}`)}}function Hv(t){return t=(0,io.normalizeId)(t),this.schemas[t]||this.refs[t]}function HI(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function GI(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function KI(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function ZI(){let t={...this.opts};for(let e of zI)delete t[e];return t}var JI={log(){},warn(){},error(){}};function YI(t){if(t===!1)return JI;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var QI=/^[a-z_$][a-z0-9_$:-]*$/i;function XI(t,e){let{RULES:r}=this;if((0,Jh.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!QI.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Zh(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:a}=this,i=s?a.post:a.rules.find(({type:u})=>u===r);if(i||(i={type:r,rules:[]},a.rules.push(i)),a.keywords[t]=!0,!e)return;let c={keyword:t,definition:{...e,type:(0,Al.getJSONTypes)(e.type),schemaType:(0,Al.getJSONTypes)(e.schemaType)}};e.before?eN.call(this,i,c,e.before):i.rules.push(c),a.all[t]=c,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function eN(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function tN(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Zv(e)),t.validateSchema=this.compile(e,!0))}var rN={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Zv(t){return{anyOf:[t,rN]}}});var Yv=E(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});var nN={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Yh.default=nN});var tw=E($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.callRef=$s.getValidate=void 0;var sN=so(),Qv=Zt(),Tt=ee(),wa=tn(),Xv=Cl(),Ol=ve(),aN={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:a,validateName:i,opts:c,self:u}=n,{root:d}=a;if((r==="#"||r==="#/")&&s===d.baseId)return m();let f=Xv.resolveRef.call(u,d,s,r);if(f===void 0)throw new sN.default(n.opts.uriResolver,s,r);if(f instanceof Xv.SchemaEnv)return b(f);return y(f);function m(){if(a===d)return Il(t,i,a,a.$async);let g=e.scopeValue("root",{ref:d});return Il(t,(0,Tt._)`${g}.validate`,d,d.$async)}function b(g){let _=ew(t,g);Il(t,_,g,g.$async)}function y(g){let _=e.scopeValue("schema",c.code.source===!0?{ref:g,code:(0,Tt.stringify)(g)}:{ref:g}),w=e.name("valid"),S=t.subschema({schema:g,dataTypes:[],schemaPath:Tt.nil,topSchemaRef:_,errSchemaPath:r},w);t.mergeEvaluated(S),t.ok(w)}}};function ew(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Tt._)`${r.scopeValue("wrapper",{ref:e})}.validate`}$s.getValidate=ew;function Il(t,e,r,n){let{gen:s,it:a}=t,{allErrors:i,schemaEnv:c,opts:u}=a,d=u.passContext?wa.default.this:Tt.nil;n?f():m();function f(){if(!c.$async)throw new Error("async schema referenced by sync schema");let g=s.let("valid");s.try(()=>{s.code((0,Tt._)`await ${(0,Qv.callValidateCode)(t,e,d)}`),y(e),i||s.assign(g,!0)},_=>{s.if((0,Tt._)`!(${_} instanceof ${a.ValidationError})`,()=>s.throw(_)),b(_),i||s.assign(g,!1)}),t.ok(g)}function m(){t.result((0,Qv.callValidateCode)(t,e,d),()=>y(e),()=>b(e))}function b(g){let _=(0,Tt._)`${g}.errors`;s.assign(wa.default.vErrors,(0,Tt._)`${wa.default.vErrors} === null ? ${_} : ${wa.default.vErrors}.concat(${_})`),s.assign(wa.default.errors,(0,Tt._)`${wa.default.vErrors}.length`)}function y(g){var _;if(!a.opts.unevaluated)return;let w=(_=r?.validate)===null||_===void 0?void 0:_.evaluated;if(a.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(a.props=Ol.mergeEvaluated.props(s,w.props,a.props));else{let S=s.var("props",(0,Tt._)`${g}.evaluated.props`);a.props=Ol.mergeEvaluated.props(s,S,a.props,Tt.Name)}if(a.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(a.items=Ol.mergeEvaluated.items(s,w.items,a.items));else{let S=s.var("items",(0,Tt._)`${g}.evaluated.items`);a.items=Ol.mergeEvaluated.items(s,S,a.items,Tt.Name)}}}$s.callRef=Il;$s.default=aN});var rw=E(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});var iN=Yv(),oN=tw(),cN=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",iN.default,oN.default];Qh.default=cN});var nw=E(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});var Nl=ee(),Pn=Nl.operators,jl={maximum:{okStr:"<=",ok:Pn.LTE,fail:Pn.GT},minimum:{okStr:">=",ok:Pn.GTE,fail:Pn.LT},exclusiveMaximum:{okStr:"<",ok:Pn.LT,fail:Pn.GTE},exclusiveMinimum:{okStr:">",ok:Pn.GT,fail:Pn.LTE}},lN={message:({keyword:t,schemaCode:e})=>(0,Nl.str)`must be ${jl[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Nl._)`{comparison: ${jl[t].okStr}, limit: ${e}}`},uN={keyword:Object.keys(jl),type:"number",schemaType:"number",$data:!0,error:lN,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Nl._)`${r} ${jl[e].fail} ${n} || isNaN(${r})`)}};Xh.default=uN});var sw=E(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});var co=ee(),dN={message:({schemaCode:t})=>(0,co.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,co._)`{multipleOf: ${t}}`},fN={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:dN,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,a=s.opts.multipleOfPrecision,i=e.let("res"),c=a?(0,co._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${a}`:(0,co._)`${i} !== parseInt(${i})`;t.fail$data((0,co._)`(${n} === 0 || (${i} = ${r}/${n}, ${c}))`)}};em.default=fN});var iw=E(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});function aw(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}tm.default=aw;aw.code='require("ajv/dist/runtime/ucs2length").default'});var ow=E(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});var xs=ee(),hN=ve(),mN=iw(),pN={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,xs.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,xs._)`{limit: ${t}}`},gN={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:pN,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,a=e==="maxLength"?xs.operators.GT:xs.operators.LT,i=s.opts.unicode===!1?(0,xs._)`${r}.length`:(0,xs._)`${(0,hN.useFunc)(t.gen,mN.default)}(${r})`;t.fail$data((0,xs._)`${i} ${a} ${n}`)}};rm.default=gN});var cw=E(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});var yN=Zt(),Ml=ee(),_N={message:({schemaCode:t})=>(0,Ml.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Ml._)`{pattern: ${t}}`},bN={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:_N,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:a}=t,i=a.opts.unicodeRegExp?"u":"",c=r?(0,Ml._)`(new RegExp(${s}, ${i}))`:(0,yN.usePattern)(t,n);t.fail$data((0,Ml._)`!${c}.test(${e})`)}};nm.default=bN});var lw=E(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});var lo=ee(),vN={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,lo.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,lo._)`{limit: ${t}}`},wN={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:vN,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?lo.operators.GT:lo.operators.LT;t.fail$data((0,lo._)`Object.keys(${r}).length ${s} ${n}`)}};sm.default=wN});var uw=E(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});var uo=Zt(),fo=ee(),SN=ve(),$N={message:({params:{missingProperty:t}})=>(0,fo.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,fo._)`{missingProperty: ${t}}`},xN={keyword:"required",type:"object",schemaType:"array",$data:!0,error:$N,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:a,it:i}=t,{opts:c}=i;if(!a&&r.length===0)return;let u=r.length>=c.loopRequired;if(i.allErrors?d():f(),c.strictRequired){let y=t.parentSchema.properties,{definedProperties:g}=t.it;for(let _ of r)if(y?.[_]===void 0&&!g.has(_)){let w=i.schemaEnv.baseId+i.errSchemaPath,S=`required property "${_}" is not defined at "${w}" (strictRequired)`;(0,SN.checkStrictMode)(i,S,i.opts.strictRequired)}}function d(){if(u||a)t.block$data(fo.nil,m);else for(let y of r)(0,uo.checkReportMissingProp)(t,y)}function f(){let y=e.let("missing");if(u||a){let g=e.let("valid",!0);t.block$data(g,()=>b(y,g)),t.ok(g)}else e.if((0,uo.checkMissingProp)(t,r,y)),(0,uo.reportMissingProp)(t,y),e.else()}function m(){e.forOf("prop",n,y=>{t.setParams({missingProperty:y}),e.if((0,uo.noPropertyInData)(e,s,y,c.ownProperties),()=>t.error())})}function b(y,g){t.setParams({missingProperty:y}),e.forOf(y,n,()=>{e.assign(g,(0,uo.propertyInData)(e,s,y,c.ownProperties)),e.if((0,fo.not)(g),()=>{t.error(),e.break()})},fo.nil)}}};am.default=xN});var dw=E(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});var ho=ee(),EN={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,ho.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,ho._)`{limit: ${t}}`},kN={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:EN,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?ho.operators.GT:ho.operators.LT;t.fail$data((0,ho._)`${r}.length ${s} ${n}`)}};im.default=kN});var ql=E(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});var fw=Ei();fw.code='require("ajv/dist/runtime/equal").default';om.default=fw});var hw=E(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});var cm=Xi(),Ze=ee(),TN=ve(),RN=ql(),PN={message:({params:{i:t,j:e}})=>(0,Ze.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Ze._)`{i: ${t}, j: ${e}}`},CN={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:PN,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:a,schemaCode:i,it:c}=t;if(!n&&!s)return;let u=e.let("valid"),d=a.items?(0,cm.getSchemaTypes)(a.items):[];t.block$data(u,f,(0,Ze._)`${i} === false`),t.ok(u);function f(){let g=e.let("i",(0,Ze._)`${r}.length`),_=e.let("j");t.setParams({i:g,j:_}),e.assign(u,!0),e.if((0,Ze._)`${g} > 1`,()=>(m()?b:y)(g,_))}function m(){return d.length>0&&!d.some(g=>g==="object"||g==="array")}function b(g,_){let w=e.name("item"),S=(0,cm.checkDataTypes)(d,w,c.opts.strictNumbers,cm.DataType.Wrong),T=e.const("indices",(0,Ze._)`{}`);e.for((0,Ze._)`;${g}--;`,()=>{e.let(w,(0,Ze._)`${r}[${g}]`),e.if(S,(0,Ze._)`continue`),d.length>1&&e.if((0,Ze._)`typeof ${w} == "string"`,(0,Ze._)`${w} += "_"`),e.if((0,Ze._)`typeof ${T}[${w}] == "number"`,()=>{e.assign(_,(0,Ze._)`${T}[${w}]`),t.error(),e.assign(u,!1).break()}).code((0,Ze._)`${T}[${w}] = ${g}`)})}function y(g,_){let w=(0,TN.useFunc)(e,RN.default),S=e.name("outer");e.label(S).for((0,Ze._)`;${g}--;`,()=>e.for((0,Ze._)`${_} = ${g}; ${_}--;`,()=>e.if((0,Ze._)`${w}(${r}[${g}], ${r}[${_}])`,()=>{t.error(),e.assign(u,!1).break(S)})))}}};lm.default=CN});var mw=E(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});var um=ee(),AN=ve(),ON=ql(),IN={message:"must be equal to constant",params:({schemaCode:t})=>(0,um._)`{allowedValue: ${t}}`},NN={keyword:"const",$data:!0,error:IN,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:a}=t;n||a&&typeof a=="object"?t.fail$data((0,um._)`!${(0,AN.useFunc)(e,ON.default)}(${r}, ${s})`):t.fail((0,um._)`${a} !== ${r}`)}};dm.default=NN});var pw=E(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});var mo=ee(),jN=ve(),MN=ql(),qN={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,mo._)`{allowedValues: ${t}}`},DN={keyword:"enum",schemaType:"array",$data:!0,error:qN,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:a,it:i}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let c=s.length>=i.opts.loopEnum,u,d=()=>u??(u=(0,jN.useFunc)(e,MN.default)),f;if(c||n)f=e.let("valid"),t.block$data(f,m);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let y=e.const("vSchema",a);f=(0,mo.or)(...s.map((g,_)=>b(y,_)))}t.pass(f);function m(){e.assign(f,!1),e.forOf("v",a,y=>e.if((0,mo._)`${d()}(${r}, ${y})`,()=>e.assign(f,!0).break()))}function b(y,g){let _=s[g];return typeof _=="object"&&_!==null?(0,mo._)`${d()}(${r}, ${y}[${g}])`:(0,mo._)`${r} === ${_}`}}};fm.default=DN});var gw=E(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});var FN=nw(),UN=sw(),zN=ow(),LN=cw(),VN=lw(),BN=uw(),WN=dw(),HN=hw(),GN=mw(),KN=pw(),ZN=[FN.default,UN.default,zN.default,LN.default,VN.default,BN.default,WN.default,HN.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},GN.default,KN.default];hm.default=ZN});var pm=E(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.validateAdditionalItems=void 0;var Es=ee(),mm=ve(),JN={message:({params:{len:t}})=>(0,Es.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Es._)`{limit: ${t}}`},YN={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:JN,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,mm.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}yw(t,n)}};function yw(t,e){let{gen:r,schema:n,data:s,keyword:a,it:i}=t;i.items=!0;let c=r.const("len",(0,Es._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Es._)`${c} <= ${e.length}`);else if(typeof n=="object"&&!(0,mm.alwaysValidSchema)(i,n)){let d=r.var("valid",(0,Es._)`${c} <= ${e.length}`);r.if((0,Es.not)(d),()=>u(d)),t.ok(d)}function u(d){r.forRange("i",e.length,c,f=>{t.subschema({keyword:a,dataProp:f,dataPropType:mm.Type.Num},d),i.allErrors||r.if((0,Es.not)(d),()=>r.break())})}}po.validateAdditionalItems=yw;po.default=YN});var gm=E(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.validateTuple=void 0;var _w=ee(),Dl=ve(),QN=Zt(),XN={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return bw(t,"additionalItems",e);r.items=!0,!(0,Dl.alwaysValidSchema)(r,e)&&t.ok((0,QN.validateArray)(t))}};function bw(t,e,r=t.schema){let{gen:n,parentSchema:s,data:a,keyword:i,it:c}=t;f(s),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=Dl.mergeEvaluated.items(n,r.length,c.items));let u=n.name("valid"),d=n.const("len",(0,_w._)`${a}.length`);r.forEach((m,b)=>{(0,Dl.alwaysValidSchema)(c,m)||(n.if((0,_w._)`${d} > ${b}`,()=>t.subschema({keyword:i,schemaProp:b,dataProp:b},u)),t.ok(u))});function f(m){let{opts:b,errSchemaPath:y}=c,g=r.length,_=g===m.minItems&&(g===m.maxItems||m[e]===!1);if(b.strictTuples&&!_){let w=`"${i}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${y}"`;(0,Dl.checkStrictMode)(c,w,b.strictTuples)}}}go.validateTuple=bw;go.default=XN});var vw=E(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});var e4=gm(),t4={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,e4.validateTuple)(t,"items")};ym.default=t4});var Sw=E(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});var ww=ee(),r4=ve(),n4=Zt(),s4=pm(),a4={message:({params:{len:t}})=>(0,ww.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ww._)`{limit: ${t}}`},i4={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:a4,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,r4.alwaysValidSchema)(n,e)&&(s?(0,s4.validateAdditionalItems)(t,s):t.ok((0,n4.validateArray)(t)))}};_m.default=i4});var $w=E(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});var Yt=ee(),Fl=ve(),o4={message:({params:{min:t,max:e}})=>e===void 0?(0,Yt.str)`must contain at least ${t} valid item(s)`:(0,Yt.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Yt._)`{minContains: ${t}}`:(0,Yt._)`{minContains: ${t}, maxContains: ${e}}`},c4={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:o4,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:a}=t,i,c,{minContains:u,maxContains:d}=n;a.opts.next?(i=u===void 0?1:u,c=d):i=1;let f=e.const("len",(0,Yt._)`${s}.length`);if(t.setParams({min:i,max:c}),c===void 0&&i===0){(0,Fl.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&i>c){(0,Fl.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Fl.alwaysValidSchema)(a,r)){let _=(0,Yt._)`${f} >= ${i}`;c!==void 0&&(_=(0,Yt._)`${_} && ${f} <= ${c}`),t.pass(_);return}a.items=!0;let m=e.name("valid");c===void 0&&i===1?y(m,()=>e.if(m,()=>e.break())):i===0?(e.let(m,!0),c!==void 0&&e.if((0,Yt._)`${s}.length > 0`,b)):(e.let(m,!1),b()),t.result(m,()=>t.reset());function b(){let _=e.name("_valid"),w=e.let("count",0);y(_,()=>e.if(_,()=>g(w)))}function y(_,w){e.forRange("i",0,f,S=>{t.subschema({keyword:"contains",dataProp:S,dataPropType:Fl.Type.Num,compositeRule:!0},_),w()})}function g(_){e.code((0,Yt._)`${_}++`),c===void 0?e.if((0,Yt._)`${_} >= ${i}`,()=>e.assign(m,!0).break()):(e.if((0,Yt._)`${_} > ${c}`,()=>e.assign(m,!1).break()),i===1?e.assign(m,!0):e.if((0,Yt._)`${_} >= ${i}`,()=>e.assign(m,!0)))}}};bm.default=c4});var kw=E(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.validateSchemaDeps=Or.validatePropertyDeps=Or.error=void 0;var vm=ee(),l4=ve(),yo=Zt();Or.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,vm.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,vm._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var u4={keyword:"dependencies",type:"object",schemaType:"object",error:Or.error,code(t){let[e,r]=d4(t);xw(t,e),Ew(t,r)}};function d4({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function xw(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let a=r.let("missing");for(let i in e){let c=e[i];if(c.length===0)continue;let u=(0,yo.propertyInData)(r,n,i,s.opts.ownProperties);t.setParams({property:i,depsCount:c.length,deps:c.join(", ")}),s.allErrors?r.if(u,()=>{for(let d of c)(0,yo.checkReportMissingProp)(t,d)}):(r.if((0,vm._)`${u} && (${(0,yo.checkMissingProp)(t,c,a)})`),(0,yo.reportMissingProp)(t,a),r.else())}}Or.validatePropertyDeps=xw;function Ew(t,e=t.schema){let{gen:r,data:n,keyword:s,it:a}=t,i=r.name("valid");for(let c in e)(0,l4.alwaysValidSchema)(a,e[c])||(r.if((0,yo.propertyInData)(r,n,c,a.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:c},i);t.mergeValidEvaluated(u,i)},()=>r.var(i,!0)),t.ok(i))}Or.validateSchemaDeps=Ew;Or.default=u4});var Rw=E(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});var Tw=ee(),f4=ve(),h4={message:"property name must be valid",params:({params:t})=>(0,Tw._)`{propertyName: ${t.propertyName}}`},m4={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:h4,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,f4.alwaysValidSchema)(s,r))return;let a=e.name("valid");e.forIn("key",n,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},a),e.if((0,Tw.not)(a),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(a)}};wm.default=m4});var $m=E(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});var Ul=Zt(),fr=ee(),p4=tn(),zl=ve(),g4={message:"must NOT have additional properties",params:({params:t})=>(0,fr._)`{additionalProperty: ${t.additionalProperty}}`},y4={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:g4,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:a,it:i}=t;if(!a)throw new Error("ajv implementation error");let{allErrors:c,opts:u}=i;if(i.props=!0,u.removeAdditional!=="all"&&(0,zl.alwaysValidSchema)(i,r))return;let d=(0,Ul.allSchemaProperties)(n.properties),f=(0,Ul.allSchemaProperties)(n.patternProperties);m(),t.ok((0,fr._)`${a} === ${p4.default.errors}`);function m(){e.forIn("key",s,w=>{!d.length&&!f.length?g(w):e.if(b(w),()=>g(w))})}function b(w){let S;if(d.length>8){let T=(0,zl.schemaRefOrVal)(i,n.properties,"properties");S=(0,Ul.isOwnProperty)(e,T,w)}else d.length?S=(0,fr.or)(...d.map(T=>(0,fr._)`${w} === ${T}`)):S=fr.nil;return f.length&&(S=(0,fr.or)(S,...f.map(T=>(0,fr._)`${(0,Ul.usePattern)(t,T)}.test(${w})`))),(0,fr.not)(S)}function y(w){e.code((0,fr._)`delete ${s}[${w}]`)}function g(w){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){y(w);return}if(r===!1){t.setParams({additionalProperty:w}),t.error(),c||e.break();return}if(typeof r=="object"&&!(0,zl.alwaysValidSchema)(i,r)){let S=e.name("valid");u.removeAdditional==="failing"?(_(w,S,!1),e.if((0,fr.not)(S),()=>{t.reset(),y(w)})):(_(w,S),c||e.if((0,fr.not)(S),()=>e.break()))}}function _(w,S,T){let P={keyword:"additionalProperties",dataProp:w,dataPropType:zl.Type.Str};T===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(P,S)}}};Sm.default=y4});var Aw=E(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});var _4=no(),Pw=Zt(),xm=ve(),Cw=$m(),b4={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:a}=t;a.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Cw.default.code(new _4.KeywordCxt(a,Cw.default,"additionalProperties"));let i=(0,Pw.allSchemaProperties)(r);for(let m of i)a.definedProperties.add(m);a.opts.unevaluated&&i.length&&a.props!==!0&&(a.props=xm.mergeEvaluated.props(e,(0,xm.toHash)(i),a.props));let c=i.filter(m=>!(0,xm.alwaysValidSchema)(a,r[m]));if(c.length===0)return;let u=e.name("valid");for(let m of c)d(m)?f(m):(e.if((0,Pw.propertyInData)(e,s,m,a.opts.ownProperties)),f(m),a.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(u);function d(m){return a.opts.useDefaults&&!a.compositeRule&&r[m].default!==void 0}function f(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},u)}}};Em.default=b4});var jw=E(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});var Ow=Zt(),Ll=ee(),Iw=ve(),Nw=ve(),v4={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:a}=t,{opts:i}=a,c=(0,Ow.allSchemaProperties)(r),u=c.filter(_=>(0,Iw.alwaysValidSchema)(a,r[_]));if(c.length===0||u.length===c.length&&(!a.opts.unevaluated||a.props===!0))return;let d=i.strictSchema&&!i.allowMatchingProperties&&s.properties,f=e.name("valid");a.props!==!0&&!(a.props instanceof Ll.Name)&&(a.props=(0,Nw.evaluatedPropsToName)(e,a.props));let{props:m}=a;b();function b(){for(let _ of c)d&&y(_),a.allErrors?g(_):(e.var(f,!0),g(_),e.if(f))}function y(_){for(let w in d)new RegExp(_).test(w)&&(0,Iw.checkStrictMode)(a,`property ${w} matches pattern ${_} (use allowMatchingProperties)`)}function g(_){e.forIn("key",n,w=>{e.if((0,Ll._)`${(0,Ow.usePattern)(t,_)}.test(${w})`,()=>{let S=u.includes(_);S||t.subschema({keyword:"patternProperties",schemaProp:_,dataProp:w,dataPropType:Nw.Type.Str},f),a.opts.unevaluated&&m!==!0?e.assign((0,Ll._)`${m}[${w}]`,!0):!S&&!a.allErrors&&e.if((0,Ll.not)(f),()=>e.break())})})}}};km.default=v4});var Mw=E(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});var w4=ve(),S4={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,w4.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Tm.default=S4});var qw=E(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});var $4=Zt(),x4={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:$4.validateUnion,error:{message:"must match a schema in anyOf"}};Rm.default=x4});var Dw=E(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});var Vl=ee(),E4=ve(),k4={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Vl._)`{passingSchemas: ${t.passing}}`},T4={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:k4,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let a=r,i=e.let("valid",!1),c=e.let("passing",null),u=e.name("_valid");t.setParams({passing:c}),e.block(d),t.result(i,()=>t.reset(),()=>t.error(!0));function d(){a.forEach((f,m)=>{let b;(0,E4.alwaysValidSchema)(s,f)?e.var(u,!0):b=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},u),m>0&&e.if((0,Vl._)`${u} && ${i}`).assign(i,!1).assign(c,(0,Vl._)`[${c}, ${m}]`).else(),e.if(u,()=>{e.assign(i,!0),e.assign(c,m),b&&t.mergeEvaluated(b,Vl.Name)})})}}};Pm.default=T4});var Fw=E(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});var R4=ve(),P4={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((a,i)=>{if((0,R4.alwaysValidSchema)(n,a))return;let c=t.subschema({keyword:"allOf",schemaProp:i},s);t.ok(s),t.mergeEvaluated(c)})}};Cm.default=P4});var Lw=E(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});var Bl=ee(),zw=ve(),C4={message:({params:t})=>(0,Bl.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Bl._)`{failingKeyword: ${t.ifClause}}`},A4={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:C4,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,zw.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=Uw(n,"then"),a=Uw(n,"else");if(!s&&!a)return;let i=e.let("valid",!0),c=e.name("_valid");if(u(),t.reset(),s&&a){let f=e.let("ifClause");t.setParams({ifClause:f}),e.if(c,d("then",f),d("else",f))}else s?e.if(c,d("then")):e.if((0,Bl.not)(c),d("else"));t.pass(i,()=>t.error(!0));function u(){let f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);t.mergeEvaluated(f)}function d(f,m){return()=>{let b=t.subschema({keyword:f},c);e.assign(i,c),t.mergeValidEvaluated(b,i),m?e.assign(m,(0,Bl._)`${f}`):t.setParams({ifClause:f})}}}};function Uw(t,e){let r=t.schema[e];return r!==void 0&&!(0,zw.alwaysValidSchema)(t,r)}Am.default=A4});var Vw=E(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});var O4=ve(),I4={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,O4.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Om.default=I4});var Bw=E(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});var N4=pm(),j4=vw(),M4=gm(),q4=Sw(),D4=$w(),F4=kw(),U4=Rw(),z4=$m(),L4=Aw(),V4=jw(),B4=Mw(),W4=qw(),H4=Dw(),G4=Fw(),K4=Lw(),Z4=Vw();function J4(t=!1){let e=[B4.default,W4.default,H4.default,G4.default,K4.default,Z4.default,U4.default,z4.default,F4.default,L4.default,V4.default];return t?e.push(j4.default,q4.default):e.push(N4.default,M4.default),e.push(D4.default),e}Im.default=J4});var Ww=E(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});var ze=ee(),Y4={message:({schemaCode:t})=>(0,ze.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,ze._)`{format: ${t}}`},Q4={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Y4,code(t,e){let{gen:r,data:n,$data:s,schema:a,schemaCode:i,it:c}=t,{opts:u,errSchemaPath:d,schemaEnv:f,self:m}=c;if(!u.validateFormats)return;s?b():y();function b(){let g=r.scopeValue("formats",{ref:m.formats,code:u.code.formats}),_=r.const("fDef",(0,ze._)`${g}[${i}]`),w=r.let("fType"),S=r.let("format");r.if((0,ze._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(w,(0,ze._)`${_}.type || "string"`).assign(S,(0,ze._)`${_}.validate`),()=>r.assign(w,(0,ze._)`"string"`).assign(S,_)),t.fail$data((0,ze.or)(T(),P()));function T(){return u.strictSchema===!1?ze.nil:(0,ze._)`${i} && !${S}`}function P(){let R=f.$async?(0,ze._)`(${_}.async ? await ${S}(${n}) : ${S}(${n}))`:(0,ze._)`${S}(${n})`,k=(0,ze._)`(typeof ${S} == "function" ? ${R} : ${S}.test(${n}))`;return(0,ze._)`${S} && ${S} !== true && ${w} === ${e} && !${k}`}}function y(){let g=m.formats[a];if(!g){T();return}if(g===!0)return;let[_,w,S]=P(g);_===e&&t.pass(R());function T(){if(u.strictSchema===!1){m.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${a}" ignored in schema at path "${d}"`}}function P(k){let N=k instanceof RegExp?(0,ze.regexpCode)(k):u.code.formats?(0,ze._)`${u.code.formats}${(0,ze.getProperty)(a)}`:void 0,ce=r.scopeValue("formats",{key:a,ref:k,code:N});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,ze._)`${ce}.validate`]:["string",k,ce]}function R(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!f.$async)throw new Error("async format in sync schema");return(0,ze._)`await ${S}(${n})`}return typeof w=="function"?(0,ze._)`${S}(${n})`:(0,ze._)`${S}.test(${n})`}}}};Nm.default=Q4});var Hw=E(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});var X4=Ww(),ej=[X4.default];jm.default=ej});var Gw=E(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.contentVocabulary=Sa.metadataVocabulary=void 0;Sa.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Sa.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Zw=E(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});var tj=rw(),rj=gw(),nj=Bw(),sj=Hw(),Kw=Gw(),aj=[tj.default,rj.default,(0,nj.default)(),sj.default,Kw.metadataVocabulary,Kw.contentVocabulary];Mm.default=aj});var Yw=E(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.DiscrError=void 0;var Jw;(function(t){t.Tag="tag",t.Mapping="mapping"})(Jw||(Wl.DiscrError=Jw={}))});var Xw=E(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});var $a=ee(),qm=Yw(),Qw=Cl(),ij=so(),oj=ve(),cj={message:({params:{discrError:t,tagName:e}})=>t===qm.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,$a._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},lj={keyword:"discriminator",type:"object",schemaType:"object",error:cj,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:a}=t,{oneOf:i}=s;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");let c=n.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),d=e.const("tag",(0,$a._)`${r}${(0,$a.getProperty)(c)}`);e.if((0,$a._)`typeof ${d} == "string"`,()=>f(),()=>t.error(!1,{discrError:qm.DiscrError.Tag,tag:d,tagName:c})),t.ok(u);function f(){let y=b();e.if(!1);for(let g in y)e.elseIf((0,$a._)`${d} === ${g}`),e.assign(u,m(y[g]));e.else(),t.error(!1,{discrError:qm.DiscrError.Mapping,tag:d,tagName:c}),e.endIf()}function m(y){let g=e.name("valid"),_=t.subschema({keyword:"oneOf",schemaProp:y},g);return t.mergeEvaluated(_,$a.Name),g}function b(){var y;let g={},_=S(s),w=!0;for(let R=0;R<i.length;R++){let k=i[R];if(k?.$ref&&!(0,oj.schemaHasRulesButRef)(k,a.self.RULES)){let ce=k.$ref;if(k=Qw.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,ce),k instanceof Qw.SchemaEnv&&(k=k.schema),k===void 0)throw new ij.default(a.opts.uriResolver,a.baseId,ce)}let N=(y=k?.properties)===null||y===void 0?void 0:y[c];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);w=w&&(_||S(k)),T(N,R)}if(!w)throw new Error(`discriminator: "${c}" must be required`);return g;function S({required:R}){return Array.isArray(R)&&R.includes(c)}function T(R,k){if(R.const)P(R.const,k);else if(R.enum)for(let N of R.enum)P(N,k);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function P(R,k){if(typeof R!="string"||R in g)throw new Error(`discriminator: "${c}" values must be unique strings`);g[R]=k}}}};Dm.default=lj});var eS=E((yD,uj)=>{uj.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var rS=E((De,Fm)=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.MissingRefError=De.ValidationError=De.CodeGen=De.Name=De.nil=De.stringify=De.str=De._=De.KeywordCxt=De.Ajv=void 0;var dj=Jv(),fj=Zw(),hj=Xw(),tS=eS(),mj=["/properties"],Hl="http://json-schema.org/draft-07/schema",xa=class extends dj.default{_addVocabularies(){super._addVocabularies(),fj.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(hj.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(tS,mj):tS;this.addMetaSchema(e,Hl,!1),this.refs["http://json-schema.org/schema"]=Hl}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Hl)?Hl:void 0)}};De.Ajv=xa;Fm.exports=De=xa;Fm.exports.Ajv=xa;Object.defineProperty(De,"__esModule",{value:!0});De.default=xa;var pj=no();Object.defineProperty(De,"KeywordCxt",{enumerable:!0,get:function(){return pj.KeywordCxt}});var Ea=ee();Object.defineProperty(De,"_",{enumerable:!0,get:function(){return Ea._}});Object.defineProperty(De,"str",{enumerable:!0,get:function(){return Ea.str}});Object.defineProperty(De,"stringify",{enumerable:!0,get:function(){return Ea.stringify}});Object.defineProperty(De,"nil",{enumerable:!0,get:function(){return Ea.nil}});Object.defineProperty(De,"Name",{enumerable:!0,get:function(){return Ea.Name}});Object.defineProperty(De,"CodeGen",{enumerable:!0,get:function(){return Ea.CodeGen}});var gj=Rl();Object.defineProperty(De,"ValidationError",{enumerable:!0,get:function(){return gj.default}});var yj=so();Object.defineProperty(De,"MissingRefError",{enumerable:!0,get:function(){return yj.default}})});var nS=E(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.formatLimitDefinition=void 0;var _j=rS(),hr=ee(),Cn=hr.operators,Gl={formatMaximum:{okStr:"<=",ok:Cn.LTE,fail:Cn.GT},formatMinimum:{okStr:">=",ok:Cn.GTE,fail:Cn.LT},formatExclusiveMaximum:{okStr:"<",ok:Cn.LT,fail:Cn.GTE},formatExclusiveMinimum:{okStr:">",ok:Cn.GT,fail:Cn.LTE}},bj={message:({keyword:t,schemaCode:e})=>(0,hr.str)`should be ${Gl[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,hr._)`{comparison: ${Gl[t].okStr}, limit: ${e}}`};ka.formatLimitDefinition={keyword:Object.keys(Gl),type:"string",schemaType:"string",$data:!0,error:bj,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:a}=t,{opts:i,self:c}=a;if(!i.validateFormats)return;let u=new _j.KeywordCxt(a,c.RULES.all.format.definition,"format");u.$data?d():f();function d(){let b=e.scopeValue("formats",{ref:c.formats,code:i.code.formats}),y=e.const("fmt",(0,hr._)`${b}[${u.schemaCode}]`);t.fail$data((0,hr.or)((0,hr._)`typeof ${y} != "object"`,(0,hr._)`${y} instanceof RegExp`,(0,hr._)`typeof ${y}.compare != "function"`,m(y)))}function f(){let b=u.schema,y=c.formats[b];if(!y||y===!0)return;if(typeof y!="object"||y instanceof RegExp||typeof y.compare!="function")throw new Error(`"${s}": format "${b}" does not define "compare" function`);let g=e.scopeValue("formats",{key:b,ref:y,code:i.code.formats?(0,hr._)`${i.code.formats}${(0,hr.getProperty)(b)}`:void 0});t.fail$data(m(g))}function m(b){return(0,hr._)`${b}.compare(${r}, ${n}) ${Gl[s].fail} 0`}},dependencies:["format"]};var vj=t=>(t.addKeyword(ka.formatLimitDefinition),t);ka.default=vj});var oS=E((_o,iS)=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var Ta=Lb(),wj=nS(),Um=ee(),sS=new Um.Name("fullFormats"),Sj=new Um.Name("fastFormats"),zm=(t,e={keywords:!0})=>{if(Array.isArray(e))return aS(t,e,Ta.fullFormats,sS),t;let[r,n]=e.mode==="fast"?[Ta.fastFormats,Sj]:[Ta.fullFormats,sS],s=e.formats||Ta.formatNames;return aS(t,s,r,n),e.keywords&&(0,wj.default)(t),t};zm.get=(t,e="full")=>{let n=(e==="fast"?Ta.fastFormats:Ta.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function aS(t,e,r,n){var s,a;(s=(a=t.opts.code).formats)!==null&&s!==void 0||(a.formats=(0,Um._)`require("ajv-formats/dist/formats").${n}`);for(let i of e)t.addFormat(i,r[i])}iS.exports=_o=zm;Object.defineProperty(_o,"__esModule",{value:!0});_o.default=zm});var mS=E((xD,hS)=>{hS.exports=fS;fS.sync=Ej;var uS=require("fs");function xj(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var s=r[n].toLowerCase();if(s&&t.substr(-s.length).toLowerCase()===s)return!0}return!1}function dS(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:xj(e,r)}function fS(t,e,r){uS.stat(t,function(n,s){r(n,n?!1:dS(s,t,e))})}function Ej(t,e){return dS(uS.statSync(t),t,e)}});var bS=E((ED,_S)=>{_S.exports=gS;gS.sync=kj;var pS=require("fs");function gS(t,e,r){pS.stat(t,function(n,s){r(n,n?!1:yS(s,e))})}function kj(t,e){return yS(pS.statSync(t),e)}function yS(t,e){return t.isFile()&&Tj(t,e)}function Tj(t,e){var r=t.mode,n=t.uid,s=t.gid,a=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),i=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),u=parseInt("010",8),d=parseInt("001",8),f=c|u,m=r&d||r&u&&s===i||r&c&&n===a||r&f&&a===0;return m}});var wS=E((TD,vS)=>{var kD=require("fs"),Jl;process.platform==="win32"||global.TESTING_WINDOWS?Jl=mS():Jl=bS();vS.exports=Lm;Lm.sync=Rj;function Lm(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,s){Lm(t,e||{},function(a,i){a?s(a):n(i)})})}Jl(t,e||{},function(n,s){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,s=!1),r(n,s)})}function Rj(t,e){try{return Jl.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var RS=E((RD,TS)=>{var Ra=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",SS=require("path"),Pj=Ra?";":":",$S=wS(),xS=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),ES=(t,e)=>{let r=e.colon||Pj,n=t.match(/\//)||Ra&&t.match(/\\/)?[""]:[...Ra?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],s=Ra?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=Ra?s.split(r):[""];return Ra&&t.indexOf(".")!==-1&&a[0]!==""&&a.unshift(""),{pathEnv:n,pathExt:a,pathExtExe:s}},kS=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:s,pathExtExe:a}=ES(t,e),i=[],c=d=>new Promise((f,m)=>{if(d===n.length)return e.all&&i.length?f(i):m(xS(t));let b=n[d],y=/^".*"$/.test(b)?b.slice(1,-1):b,g=SS.join(y,t),_=!y&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;f(u(_,d,0))}),u=(d,f,m)=>new Promise((b,y)=>{if(m===s.length)return b(c(f+1));let g=s[m];$S(d+g,{pathExt:a},(_,w)=>{if(!_&&w)if(e.all)i.push(d+g);else return b(d+g);return b(u(d,f,m+1))})});return r?c(0).then(d=>r(null,d),r):c(0)},Cj=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:s}=ES(t,e),a=[];for(let i=0;i<r.length;i++){let c=r[i],u=/^".*"$/.test(c)?c.slice(1,-1):c,d=SS.join(u,t),f=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+d:d;for(let m=0;m<n.length;m++){let b=f+n[m];try{if($S.sync(b,{pathExt:s}))if(e.all)a.push(b);else return b}catch{}}}if(e.all&&a.length)return a;if(e.nothrow)return null;throw xS(t)};TS.exports=kS;kS.sync=Cj});var CS=E((PD,Vm)=>{"use strict";var PS=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};Vm.exports=PS;Vm.exports.default=PS});var NS=E((CD,IS)=>{"use strict";var AS=require("path"),Aj=RS(),Oj=CS();function OS(t,e){let r=t.options.env||process.env,n=process.cwd(),s=t.options.cwd!=null,a=s&&process.chdir!==void 0&&!process.chdir.disabled;if(a)try{process.chdir(t.options.cwd)}catch{}let i;try{i=Aj.sync(t.command,{path:r[Oj({env:r})],pathExt:e?AS.delimiter:void 0})}catch{}finally{a&&process.chdir(n)}return i&&(i=AS.resolve(s?t.options.cwd:"",i)),i}function Ij(t){return OS(t)||OS(t,!0)}IS.exports=Ij});var jS=E((AD,Wm)=>{"use strict";var Bm=/([()\][%!^"`<>&|;, *?])/g;function Nj(t){return t=t.replace(Bm,"^$1"),t}function jj(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(Bm,"^$1"),e&&(t=t.replace(Bm,"^$1")),t}Wm.exports.command=Nj;Wm.exports.argument=jj});var qS=E((OD,MS)=>{"use strict";MS.exports=/^#!(.*)/});var FS=E((ID,DS)=>{"use strict";var Mj=qS();DS.exports=(t="")=>{let e=t.match(Mj);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),s=r.split("/").pop();return s==="env"?n:n?`${s} ${n}`:s}});var zS=E((ND,US)=>{"use strict";var Hm=require("fs"),qj=FS();function Dj(t){let r=Buffer.alloc(150),n;try{n=Hm.openSync(t,"r"),Hm.readSync(n,r,0,150,0),Hm.closeSync(n)}catch{}return qj(r.toString())}US.exports=Dj});var WS=E((jD,BS)=>{"use strict";var Fj=require("path"),LS=NS(),VS=jS(),Uj=zS(),zj=process.platform==="win32",Lj=/\.(?:com|exe)$/i,Vj=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Bj(t){t.file=LS(t);let e=t.file&&Uj(t.file);return e?(t.args.unshift(t.file),t.command=e,LS(t)):t.file}function Wj(t){if(!zj)return t;let e=Bj(t),r=!Lj.test(e);if(t.options.forceShell||r){let n=Vj.test(e);t.command=Fj.normalize(t.command),t.command=VS.command(t.command),t.args=t.args.map(a=>VS.argument(a,n));let s=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${s}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function Hj(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:Wj(n)}BS.exports=Hj});var KS=E((MD,GS)=>{"use strict";var Gm=process.platform==="win32";function Km(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function Gj(t,e){if(!Gm)return;let r=t.emit;t.emit=function(n,s){if(n==="exit"){let a=HS(s,e);if(a)return r.call(t,"error",a)}return r.apply(t,arguments)}}function HS(t,e){return Gm&&t===1&&!e.file?Km(e.original,"spawn"):null}function Kj(t,e){return Gm&&t===1&&!e.file?Km(e.original,"spawnSync"):null}GS.exports={hookChildProcess:Gj,verifyENOENT:HS,verifyENOENTSync:Kj,notFoundError:Km}});var YS=E((qD,Pa)=>{"use strict";var ZS=require("child_process"),Zm=WS(),Jm=KS();function JS(t,e,r){let n=Zm(t,e,r),s=ZS.spawn(n.command,n.args,n.options);return Jm.hookChildProcess(s,n),s}function Zj(t,e,r){let n=Zm(t,e,r),s=ZS.spawnSync(n.command,n.args,n.options);return s.error=s.error||Jm.verifyENOENTSync(s.status,n),s}Pa.exports=JS;Pa.exports.spawn=JS;Pa.exports.sync=Zj;Pa.exports._parse=Zm;Pa.exports._enoent=Jm});var iM={};mg(iM,{default:()=>l$});module.exports=Fx(iM);var c$=require("@raycast/api");var ht=Ve(require("react")),j=require("@raycast/api");var he=Ve(require("react")),Ee=require("@raycast/api");var gg=Object.prototype.hasOwnProperty;function ec(t,e){var r,n;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&ec(t[n],e[n]););return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(gg.call(t,r)&&++n&&!gg.call(e,r)||!(r in e)||!ec(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}var qn=Ve(require("node:fs")),tc=Ve(require("node:path"));var _g=require("react/jsx-runtime");function Ux(t){let e=(0,he.useRef)(t),r=(0,he.useRef)(0);return ec(t,e.current)||(e.current=t,r.current+=1),(0,he.useMemo)(()=>e.current,[r.current])}function gr(t){let e=(0,he.useRef)(t);return e.current=t,e}function Iu(t,e){let r=t instanceof Error?t.message:String(t);return(0,Ee.showToast)({style:Ee.Toast.Style.Failure,title:e?.title??"Something went wrong",message:e?.message??r,primaryAction:e?.primaryAction??yg(t),secondaryAction:e?.primaryAction?yg(t):void 0})}var yg=t=>{let e=!0,r="[Extension Name]...",n="";try{let i=JSON.parse((0,qn.readFileSync)((0,tc.join)(Ee.environment.assetsPath,"..","package.json"),"utf8"));r=`[${i.title}]...`,n=`https://raycast.com/${i.owner||i.author}/${i.name}`,(!i.owner||i.access==="public")&&(e=!1)}catch{}let s=Ee.environment.isDevelopment||e,a=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:s?"Copy Logs":"Report Error",onAction(i){i.hide(),s?Ee.Clipboard.copy(a):(0,Ee.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${a}
\`\`\`
`)}`)}}};function Ga(t,e,r){let n=(0,he.useRef)(0),[s,a]=(0,he.useState)({isLoading:!0}),i=gr(t),c=gr(r?.abortable),u=gr(e||[]),d=gr(r?.onError),f=gr(r?.onData),m=gr(r?.onWillExecute),b=gr(r?.failureToastOptions),y=gr(s.data),g=(0,he.useRef)(null),_=(0,he.useRef)({page:0}),w=(0,he.useRef)(!1),S=(0,he.useRef)(!0),T=(0,he.useRef)(50),P=(0,he.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),R=(0,he.useCallback)((...F)=>{let we=P();m.current?.(F),a(xe=>({...xe,isLoading:!0}));let Je=zx(i.current)(...F);function Rt(xe){return xe.name=="AbortError"||we===n.current&&(d.current?d.current(xe):Ee.environment.launchType!==Ee.LaunchType.Background&&Iu(xe,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(Qt){Qt.hide(),g.current?.(...u.current||[])}},...b.current}),a({error:xe,isLoading:!1})),xe}return typeof Je=="function"?(w.current=!0,Je(_.current).then(({data:xe,hasMore:Qt,cursor:ru})=>(we===n.current&&(_.current&&(_.current.cursor=ru,_.current.lastItem=xe?.[xe.length-1]),f.current&&f.current(xe,_.current),Qt&&(T.current=xe.length),S.current=Qt,a(vo=>_.current.page===0?{data:xe,isLoading:!1}:{data:(vo.data||[])?.concat(xe),isLoading:!1})),xe),xe=>(S.current=!1,Rt(xe)))):(w.current=!1,Je.then(xe=>(we===n.current&&(f.current&&f.current(xe),a({data:xe,isLoading:!1})),xe),Rt))},[f,d,u,i,a,g,m,_,b,P]);g.current=R;let k=(0,he.useCallback)(()=>{_.current={page:0};let F=u.current||[];return R(...F)},[R,u]),N=(0,he.useCallback)(async(F,we)=>{let Je;try{if(we?.optimisticUpdate){P(),typeof we?.rollbackOnError!="function"&&we?.rollbackOnError!==!1&&(Je=structuredClone(y.current?.value));let Rt=we.optimisticUpdate;a(xe=>({...xe,data:Rt(xe.data)}))}return await F}catch(Rt){if(typeof we?.rollbackOnError=="function"){let xe=we.rollbackOnError;a(Qt=>({...Qt,data:xe(Qt.data)}))}else we?.optimisticUpdate&&we?.rollbackOnError!==!1&&a(xe=>({...xe,data:Je}));throw Rt}finally{we?.shouldRevalidateAfter!==!1&&(Ee.environment.launchType===Ee.LaunchType.Background||Ee.environment.commandMode==="menu-bar"?await k():k())}},[k,y,a,P]),ce=(0,he.useCallback)(()=>{_.current.page+=1;let F=u.current||[];R(...F)},[_,u,R]);(0,he.useEffect)(()=>{_.current={page:0},r?.execute!==!1?R(...e||[]):P()},[Ux([e,r?.execute,R]),c,_]),(0,he.useEffect)(()=>()=>{P()},[P]);let Ce=r?.execute!==!1?s.isLoading:!1,x={...s,isLoading:Ce},q=w.current?{pageSize:T.current,hasMore:S.current,onLoadMore:ce}:void 0;return{...x,revalidate:k,mutate:N,pagination:q}}function zx(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function Lx(t,e){let r=this[t];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:e}function Vx(t,e){return typeof e=="string"&&e.startsWith("__raycast_cached_date__")?new Date(e.replace("__raycast_cached_date__","")):typeof e=="string"&&e.startsWith("__raycast_cached_buffer__")?Buffer.from(e.replace("__raycast_cached_buffer__",""),"base64"):e}var Dr=(function(t){return t.Required="required",t})({});function Ou(t,e){if(t){if(typeof t=="function")return t(e);if(t==="required"){let r=typeof e<"u"&&e!==null;if(r)switch(typeof e){case"string":r=e.length>0;break;case"object":Array.isArray(e)?r=e.length>0:e instanceof Date&&(r=e.getTime()>0);break;default:break}if(!r)return"The item is required"}}}function rc(t){let{onSubmit:e,validation:r,initialValues:n={}}=t,[s,a]=(0,he.useState)(n),[i,c]=(0,he.useState)({}),u=(0,he.useRef)({}),d=gr(r||{}),f=gr(e),m=(0,he.useCallback)(S=>{u.current[S]?.focus()},[u]),b=(0,he.useCallback)(async S=>{let T=!1;for(let[R,k]of Object.entries(d.current)){let N=Ou(k,S[R]);N&&(T||(T={},m(R)),T[R]=N)}if(T)return c(T),!1;let P=await f.current(S);return typeof P=="boolean"?P:!0},[d,f,m]),y=(0,he.useCallback)((S,T)=>{c(P=>({...P,[S]:T}))},[c]),g=(0,he.useCallback)(function(S,T){a(P=>({...P,[S]:typeof T=="function"?T(P[S]):T}))},[a]),_=(0,he.useMemo)(()=>new Proxy({},{get(S,T){let P=d.current[T],R=s[T];return{onChange(k){i[T]&&(Ou(P,k)||y(T,void 0)),g(T,k)},onBlur(k){let N=Ou(P,k.target.value);N&&y(T,N)},error:i[T],id:T,value:typeof R>"u"?null:R,ref:k=>{u.current[T]=k}}}}),[i,d,y,s,u,g]),w=(0,he.useCallback)(S=>{c({}),Object.entries(u.current).forEach(([T,P])=>{S?.[T]||P?.reset()}),S&&a(S)},[a,c,u]);return{handleSubmit:b,setValidationError:y,setValue:g,values:s,itemProps:_,focus:m,reset:w}}function bg(t,e){let{data:r,isLoading:n,mutate:s}=Ga(async c=>{let u=await Ee.LocalStorage.getItem(c);return typeof u<"u"?JSON.parse(u,Vx):e},[t]);async function a(c){try{await s(Ee.LocalStorage.setItem(t,JSON.stringify(c,Lx)),{optimisticUpdate(u){return u}})}catch(u){await Iu(u,{title:"Failed to set value in local storage"})}}async function i(){try{await s(Ee.LocalStorage.removeItem(t),{optimisticUpdate(){}})}catch(c){await Iu(c,{title:"Failed to remove value from local storage"})}}return{value:r,setValue:a,removeValue:i,isLoading:n}}var Ct=require("@raycast/api");async function vg(){let t=new Map;t.set("Local",{url:"http://127.0.0.1:11434"});let e=await Ct.LocalStorage.getItem("settings_ollama_servers");return e&&(t=new Map([...t,...JSON.parse(e)])),t}async function Fs(t){if(t==="Local")return{url:"http://127.0.0.1:11434"};let e=await Ct.LocalStorage.getItem("settings_ollama_servers");if(!e)throw new Error("Given Ollama Server doesn't exist");let r=new Map([...JSON.parse(e)]);if(!r.has(t))throw new Error("Given Ollama Server doesn't exist");return r.get(t)}async function nc(){let t=await Za();if(t.length===0)throw new Error("No Saved Chat");return t.map(e=>e.name)}async function wg(t){let e=await Za();if(e[t])return e[t];throw new Error("Chat on given index doesn't exist")}async function Us(t,e){let r=await Za();if(!r[t])throw new Error("Chat on given index doesn't exist");r[t]=e,await Nu(r)}async function Ka(t){let e=await Za().catch(()=>[]);e.unshift(t),await Nu(e)}async function Sg(t){let e=await Za();e=e.filter((r,n)=>n!==t),await Nu(e)}async function Za(){let t=await Ct.LocalStorage.getItem("setting_command_chat");if(t)return JSON.parse(t);let e=await Bx().catch(()=>{});if(e)return e;throw new Error("No saved chat")}async function Nu(t){await Ct.LocalStorage.setItem("setting_command_chat",JSON.stringify(t))}async function Bx(){let t=await Ct.LocalStorage.getItem("chat_history");t&&await Ct.LocalStorage.removeItem("chat_history");let e=await Ct.LocalStorage.getItem("chat_model_generate");e&&await Ct.LocalStorage.removeItem("chat_model_generate");let r=await Ct.LocalStorage.getItem("chat_model_embedding");r&&await Ct.LocalStorage.removeItem("chat_model_embedding");let n=await Ct.LocalStorage.getItem("chat_model_image");if(n&&await Ct.LocalStorage.removeItem("chat_model_image"),t&&e)return[...new Map(JSON.parse(t)).entries()].map(a=>({name:a[0],models:{main:{server_name:"Local",server:{url:"http://127.0.0.1:11434"},tag:String(e)},embedding:r?{server_name:"Local",server:{url:"http://127.0.0.1:11434"},tag:String(r)}:void 0,vision:n?{server_name:"Local",server:{url:"http://127.0.0.1:11434"},tag:String(n)}:void 0},messages:a[1].map(i=>({images:i.images,files:i.sources,...i}))}));throw new Error("No saved chat")}var Be=require("@raycast/api");var $g=new Error("Model is not Installed."),xg=new Error("Ollama version not supported, update at least at v0.1.14."),yr=new Error("Verify Ollama is Installed and Currently Running."),hM=new Error("Ollama Models Registry is Unreachable."),sc=class extends Error{constructor(e,r){super(e),this.model=r,this.suggest="Select a different model or install throw 'Manage Models' command"}},Dn=class extends Error{constructor(e,r,n,s){super(e),this.route=r,this.code=n,this.req=s}};var ry=Ve(require("node:http"),1),ny=Ve(require("node:https"),1),Ln=Ve(require("node:zlib"),1),Ot=Ve(require("node:stream"),1),ri=require("node:buffer");function Gx(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",s=!1,a=r[0]||"text/plain",i=a;for(let f=1;f<r.length;f++)r[f]==="base64"?s=!0:r[f]&&(i+=`;${r[f]}`,r[f].indexOf("charset=")===0&&(n=r[f].substring(8)));!r[0]&&!n.length&&(i+=";charset=US-ASCII",n="US-ASCII");let c=s?"base64":"ascii",u=unescape(t.substring(e+1)),d=Buffer.from(u,c);return d.type=a,d.typeFull=i,d.charset=n,d}var Eg=Gx;var qt=Ve(require("node:stream"),1),zr=require("node:util"),At=require("node:buffer");Ja();ic();var Ur=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var Fe=class extends Ur{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var oc=Symbol.toStringTag,Fu=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[oc]==="URLSearchParams",Qa=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[oc]),Ng=t=>typeof t=="object"&&(t[oc]==="AbortSignal"||t[oc]==="EventTarget"),jg=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},Mg=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n};var c1=(0,zr.promisify)(qt.default.pipeline),pt=Symbol("Body internals"),br=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Fu(e)?e=At.Buffer.from(e.toString()):Qa(e)||At.Buffer.isBuffer(e)||(zr.types.isAnyArrayBuffer(e)?e=At.Buffer.from(e):ArrayBuffer.isView(e)?e=At.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof qt.default||(e instanceof Un?(e=Ig(e),n=e.type.split("=")[1]):e=At.Buffer.from(String(e))));let s=e;At.Buffer.isBuffer(e)?s=qt.default.Readable.from(e):Qa(e)&&(s=qt.default.Readable.from(e.stream())),this[pt]={body:e,stream:s,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof qt.default&&e.on("error",a=>{let i=a instanceof Ur?a:new Fe(`Invalid response body while trying to fetch ${this.url}: ${a.message}`,"system",a);this[pt].error=i})}get body(){return this[pt].stream}get bodyUsed(){return this[pt].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await Lu(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new Un,s=new URLSearchParams(await this.text());for(let[a,i]of s)n.append(a,i);return n}let{toFormData:r}=await Promise.resolve().then(()=>(zg(),Ug));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[pt].body&&this[pt].body.type||"",r=await this.arrayBuffer();return new Fr([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Lu(this);return new TextDecoder().decode(e)}buffer(){return Lu(this)}};br.prototype.buffer=(0,zr.deprecate)(br.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(br.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,zr.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Lu(t){if(t[pt].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[pt].disturbed=!0,t[pt].error)throw t[pt].error;let{body:e}=t;if(e===null)return At.Buffer.alloc(0);if(!(e instanceof qt.default))return At.Buffer.alloc(0);let r=[],n=0;try{for await(let s of e){if(t.size>0&&n+s.length>t.size){let a=new Fe(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(a),a}n+=s.length,r.push(s)}}catch(s){throw s instanceof Ur?s:new Fe(`Invalid response body while trying to fetch ${t.url}: ${s.message}`,"system",s)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(s=>typeof s=="string")?At.Buffer.from(r.join("")):At.Buffer.concat(r,n)}catch(s){throw new Fe(`Could not create Buffer from response body for ${t.url}: ${s.message}`,"system",s)}else throw new Fe(`Premature close of server response while trying to fetch ${t.url}`)}var Ls=(t,e)=>{let r,n,{body:s}=t[pt];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof qt.default&&typeof s.getBoundary!="function"&&(r=new qt.PassThrough({highWaterMark:e}),n=new qt.PassThrough({highWaterMark:e}),s.pipe(r),s.pipe(n),t[pt].stream=r,s=n),s},l1=(0,zr.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),dc=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Fu(t)?"application/x-www-form-urlencoded;charset=UTF-8":Qa(t)?t.type||null:At.Buffer.isBuffer(t)||zr.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof Un?`multipart/form-data; boundary=${e[pt].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${l1(t)}`:t instanceof qt.default?null:"text/plain;charset=UTF-8",Lg=t=>{let{body:e}=t[pt];return e===null?0:Qa(e)?e.size:At.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},Vg=async(t,{body:e})=>{e===null?t.end():await c1(e,t)};var Vu=require("node:util"),ei=Ve(require("node:http"),1),fc=typeof ei.default.validateHeaderName=="function"?ei.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Bu=typeof ei.default.validateHeaderValue=="function"?ei.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},ot=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[s,a]of Object.entries(n))r.push(...a.map(i=>[s,i]))}else if(e!=null)if(typeof e=="object"&&!Vu.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(s=>{if(typeof s!="object"||Vu.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,s])=>(fc(n),Bu(n,String(s)),[String(n).toLowerCase(),String(s)])):void 0,super(r),new Proxy(this,{get(n,s,a){switch(s){case"append":case"set":return(i,c)=>(fc(i),Bu(i,String(c)),URLSearchParams.prototype[s].call(n,String(i).toLowerCase(),String(c)));case"delete":case"has":case"getAll":return i=>(fc(i),URLSearchParams.prototype[s].call(n,String(i).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,s,a)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(ot.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function Bg(t=[]){return new ot(t.reduce((e,r,n,s)=>(n%2===0&&e.push(s.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return fc(e),Bu(e,String(r)),!0}catch{return!1}}))}var u1=new Set([301,302,303,307,308]),hc=t=>u1.has(t);var nr=Symbol("Response internals"),gt=class t extends br{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,s=new ot(r.headers);if(e!==null&&!s.has("Content-Type")){let a=dc(e,this);a&&s.append("Content-Type",a)}this[nr]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:s,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[nr].type}get url(){return this[nr].url||""}get status(){return this[nr].status}get ok(){return this[nr].status>=200&&this[nr].status<300}get redirected(){return this[nr].counter>0}get statusText(){return this[nr].statusText}get headers(){return this[nr].headers}get highWaterMark(){return this[nr].highWaterMark}clone(){return new t(Ls(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!hc(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[nr].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let s=new ot(r&&r.headers);return s.has("content-type")||s.set("content-type","application/json"),new t(n,{...r,headers:s})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(gt.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Xg=require("node:url"),ey=require("node:util");var Wg=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""};var Gg=require("node:net");function Hg(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}var Kg=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Zg="strict-origin-when-cross-origin";function Jg(t){if(!Kg.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function d1(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=(0,Gg.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function Vs(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:d1(t)}function Yg(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let s=t.referrer,a=Hg(s),i=Hg(s,!0);a.toString().length>4096&&(a=i),e&&(a=e(a)),r&&(i=r(i));let c=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return i;case"unsafe-url":return a;case"strict-origin":return Vs(a)&&!Vs(c)?"no-referrer":i.toString();case"strict-origin-when-cross-origin":return a.origin===c.origin?a:Vs(a)&&!Vs(c)?"no-referrer":i;case"same-origin":return a.origin===c.origin?a:"no-referrer";case"origin-when-cross-origin":return a.origin===c.origin?a:i;case"no-referrer-when-downgrade":return Vs(a)&&!Vs(c)?"no-referrer":a;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function Qg(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&Kg.has(n)&&(r=n);return r}var We=Symbol("Request internals"),ti=t=>typeof t=="object"&&typeof t[We]=="object",f1=(0,ey.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Lr=class t extends br{constructor(e,r={}){let n;if(ti(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let s=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!ti(r)&&"data"in r&&f1(),(r.body!=null||ti(e)&&e.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body?r.body:ti(e)&&e.body!==null?Ls(e):null;super(a,{size:r.size||e.size||0});let i=new ot(r.headers||e.headers||{});if(a!==null&&!i.has("Content-Type")){let d=dc(a,this);d&&i.set("Content-Type",d)}let c=ti(e)?e.signal:null;if("signal"in r&&(c=r.signal),c!=null&&!Ng(c))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let u=r.referrer==null?e.referrer:r.referrer;if(u==="")u="no-referrer";else if(u){let d=new URL(u);u=/^about:(\/\/)?client$/.test(d)?"client":d}else u=void 0;this[We]={method:s,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:n,signal:c,referrer:u},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[We].method}get url(){return(0,Xg.format)(this[We].parsedURL)}get headers(){return this[We].headers}get redirect(){return this[We].redirect}get signal(){return this[We].signal}get referrer(){if(this[We].referrer==="no-referrer")return"";if(this[We].referrer==="client")return"about:client";if(this[We].referrer)return this[We].referrer.toString()}get referrerPolicy(){return this[We].referrerPolicy}set referrerPolicy(e){this[We].referrerPolicy=Jg(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Lr.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ty=t=>{let{parsedURL:e}=t[We],r=new ot(t[We].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let c=Lg(t);typeof c=="number"&&!Number.isNaN(c)&&(n=String(c))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=Zg),t.referrer&&t.referrer!=="no-referrer"?t[We].referrer=Yg(t):t[We].referrer="no-referrer",t[We].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=t;typeof s=="function"&&(s=s(e));let a=Wg(e),i={path:e.pathname+a,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:s};return{parsedURL:e,options:i}};var mc=class extends Ur{constructor(e,r="aborted"){super(e,r)}};ic();Uu();var h1=new Set(["data:","http:","https:"]);async function Ye(t,e){return new Promise((r,n)=>{let s=new Lr(t,e),{parsedURL:a,options:i}=ty(s);if(!h1.has(a.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${a.protocol.replace(/:$/,"")}" is not supported.`);if(a.protocol==="data:"){let g=Eg(s.url),_=new gt(g,{headers:{"Content-Type":g.typeFull}});r(_);return}let c=(a.protocol==="https:"?ny.default:ry.default).request,{signal:u}=s,d=null,f=()=>{let g=new mc("The operation was aborted.");n(g),s.body&&s.body instanceof Ot.default.Readable&&s.body.destroy(g),!(!d||!d.body)&&d.body.emit("error",g)};if(u&&u.aborted){f();return}let m=()=>{f(),y()},b=c(a.toString(),i);u&&u.addEventListener("abort",m);let y=()=>{b.abort(),u&&u.removeEventListener("abort",m)};b.on("error",g=>{n(new Fe(`request to ${s.url} failed, reason: ${g.message}`,"system",g)),y()}),m1(b,g=>{d&&d.body&&d.body.destroy(g)}),process.version<"v14"&&b.on("socket",g=>{let _;g.prependListener("end",()=>{_=g._eventsCount}),g.prependListener("close",w=>{if(d&&_<g._eventsCount&&!w){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",S)}})}),b.on("response",g=>{b.setTimeout(0);let _=Bg(g.rawHeaders);if(hc(g.statusCode)){let R=_.get("Location"),k=null;try{k=R===null?null:new URL(R,s.url)}catch{if(s.redirect!=="manual"){n(new Fe(`uri requested responds with an invalid redirect URL: ${R}`,"invalid-redirect")),y();return}}switch(s.redirect){case"error":n(new Fe(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),y();return;case"manual":break;case"follow":{if(k===null)break;if(s.counter>=s.follow){n(new Fe(`maximum redirect reached at: ${s.url}`,"max-redirect")),y();return}let N={headers:new ot(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:Ls(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!jg(s.url,k)||!Mg(s.url,k))for(let Ce of["authorization","www-authenticate","cookie","cookie2"])N.headers.delete(Ce);if(g.statusCode!==303&&s.body&&e.body instanceof Ot.default.Readable){n(new Fe("Cannot follow redirect with body being a readable stream","unsupported-redirect")),y();return}(g.statusCode===303||(g.statusCode===301||g.statusCode===302)&&s.method==="POST")&&(N.method="GET",N.body=void 0,N.headers.delete("content-length"));let ce=Qg(_);ce&&(N.referrerPolicy=ce),r(Ye(new Lr(k,N))),y();return}default:return n(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}u&&g.once("end",()=>{u.removeEventListener("abort",m)});let w=(0,Ot.pipeline)(g,new Ot.PassThrough,R=>{R&&n(R)});process.version<"v12.10"&&g.on("aborted",m);let S={url:s.url,status:g.statusCode,statusText:g.statusMessage,headers:_,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},T=_.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||T===null||g.statusCode===204||g.statusCode===304){d=new gt(w,S),r(d);return}let P={flush:Ln.default.Z_SYNC_FLUSH,finishFlush:Ln.default.Z_SYNC_FLUSH};if(T==="gzip"||T==="x-gzip"){w=(0,Ot.pipeline)(w,Ln.default.createGunzip(P),R=>{R&&n(R)}),d=new gt(w,S),r(d);return}if(T==="deflate"||T==="x-deflate"){let R=(0,Ot.pipeline)(g,new Ot.PassThrough,k=>{k&&n(k)});R.once("data",k=>{(k[0]&15)===8?w=(0,Ot.pipeline)(w,Ln.default.createInflate(),N=>{N&&n(N)}):w=(0,Ot.pipeline)(w,Ln.default.createInflateRaw(),N=>{N&&n(N)}),d=new gt(w,S),r(d)}),R.once("end",()=>{d||(d=new gt(w,S),r(d))});return}if(T==="br"){w=(0,Ot.pipeline)(w,Ln.default.createBrotliDecompress(),R=>{R&&n(R)}),d=new gt(w,S),r(d);return}d=new gt(w,S),r(d)}),Vg(b,s).catch(n)})}function m1(t,e){let r=ri.Buffer.from(`0\r
\r
`),n=!1,s=!1,a;t.on("response",i=>{let{headers:c}=i;n=c["transfer-encoding"]==="chunked"&&!c["content-length"]}),t.on("socket",i=>{let c=()=>{if(n&&!s){let d=new Error("Premature close");d.code="ERR_STREAM_PREMATURE_CLOSE",e(d)}},u=d=>{s=ri.Buffer.compare(d.slice(-5),r)===0,!s&&a&&(s=ri.Buffer.compare(a.slice(-3),r.slice(0,3))===0&&ri.Buffer.compare(d.slice(-2),r.slice(3))===0),a=d};i.prependListener("close",c),i.on("data",u),t.on("close",()=>{i.removeListener("close",c),i.removeListener("data",u)})})}var Wu=require("stream");var fn=class{constructor(e={url:"http://127.0.0.1:11434"}){this._RouteApiVersion="/api/version";this._RouteApiTags="/api/tags";this._RouteApiShow="/api/show";this._RouteApiDelete="/api/delete";this._RouteApiPull="/api/pull";this._RouteApiGenerate="/api/generate";this._RouteApiChat="/api/chat";this._RouteApiEmbeddings="/api/embeddings";this._RouteApiPs="/api/ps";this._signal=AbortSignal.timeout(1800),this._server=e.url,e.auth&&e.auth.mode==="Basic"&&(this._headers={Authorization:`${e.auth.mode} ${btoa(`${e.auth.username}:${e.auth.password}`)}`}),e.auth&&e.auth.mode==="Bearer"&&(this._headers={Authorization:`${e.auth.mode} ${e.auth.token}`})}set server(e){this._server=e.url,e.auth&&e.auth.mode==="Basic"&&(this._headers={Authorization:`${e.auth.mode} ${btoa(`${e.auth.username}:${e.auth.password}`)}`}),e.auth&&e.auth.mode==="Bearer"&&(this._headers={Authorization:`${e.auth.mode} ${e.auth.token}`})}_ErrorLogger(e){e instanceof Dn?console.error(`Error: Route '${e.route}', Code '${e.code}', Message: ${e.message}${e.req&&` Req: ${e.req}`}`):console.error(`Error: ${e.message}`),e.stack&&console.error(`Stack trace: ${e.stack}`)}_ErrorHandlerOllamaServer(e,r,n,s,a){throw e in[this._RouteApiShow,this._RouteApiGenerate,this._RouteApiChat]&&r===404?new sc($g.message,a):r===400?new Dn(n.error,e,r,s):r===500?new Dn(n.error,e,r):new Dn(n.error,e,r)}async OllamaApiVersion(){let e=this._RouteApiVersion,r=`${this._server}${e}`,n={headers:this._headers,signal:this._signal};return(await Ye(r,n).then(a=>a.json()).then(a=>a).catch(a=>{throw this._ErrorLogger(a),a.type==="ECONNREFUSED"?yr:xg})).version}async OllamaApiTags(){let e=this._RouteApiTags,r=`${this._server}${e}`,n={headers:this._headers,signal:this._signal};return await Ye(r,n).then(async a=>{if(!a.ok){let i=await a.json();this._ErrorHandlerOllamaServer(e,a.status,i)}return a.json()}).then(a=>a).catch(a=>{throw this._ErrorLogger(a),a instanceof Fe&&a.type==="ECONNREFUSED"?yr:a})}async OllamaApiShow(e){let r=this._RouteApiShow,n=`${this._server}${r}`,a={method:"POST",headers:{"Content-Type":"application/json",...this._headers},body:JSON.stringify({name:e})};return await Ye(n,a).then(async c=>{if(!c.ok){let u=await c.json();this._ErrorHandlerOllamaServer(r,c.status,u,a,e)}return c.json()}).then(c=>c).catch(c=>{throw this._ErrorLogger(c),c instanceof Fe&&c.type==="ECONNREFUSED"?yr:c})}_OllamaApiShowParseModelfileFrom(e){let r=e.match(/^FROM[ ]+([a-zA-Z0-9:./]+)\n/m);return r?r[0]:""}_OllamaApiShowParseModelfileSystem(e){let r=e.search(/^SYSTEM[  ]+(.*)/m);if(r!==-1)return e.substring(r).split('"""')?.[1]}_OllamaApiShowParseModelfileLicense(e){let r=e.search(/^LICENSE[  ]+(.*)/m);if(r!==-1)return e.substring(r).split('"""')?.[1]}_OllamaApiShowParseModelfileParameterSplit(e){if(!e)return[];let r=e.split(`
`);return r||[]}_OllamaApiShowParseModelfileParameterMirostat(e){let r=e.filter(n=>n.search(/^mirostat[  ]+(.*)/m)!==-1).map(n=>n.match(/^mirostat[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):0}_OllamaApiShowParseModelfileParameterMirostatEta(e){let r=e.filter(n=>n.search(/^mirostat_eta[  ]+(.*)/m)!==-1).map(n=>n.match(/^mirostat_eta[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):.1}_OllamaApiShowParseModelfileParameterMirostatTau(e){let r=e.filter(n=>n.search(/^mirostat_tau[  ]+(.*)/m)!==-1).map(n=>n.match(/^mirostat_tau[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):5}_OllamaApiShowParseModelfileParameterNumCtx(e){let r=e.filter(n=>n.search(/^num_ctx[  ]+(.*)/m)!==-1).map(n=>n.match(/^num_ctx[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):2048}_OllamaApiShowParseModelfileParameterNumGqa(e){let r=e.filter(n=>n.search(/^num_gqa[  ]+(.*)/m)!==-1).map(n=>n.match(/^num_gqa[  ]+(.*)/m)?.[1])?.[0];if(r)return Number(r)}_OllamaApiShowParseModelfileParameterNumGpu(e){let r=e.filter(n=>n.search(/^num_gpu[  ]+(.*)/m)!==-1).map(n=>n.match(/^num_gpu[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):1}_OllamaApiShowParseModelfileParameterNumThread(e){let r=e.filter(n=>n.search(/^num_thread[  ]+(.*)/m)!==-1).map(n=>n.match(/^num_thread[  ]+(.*)/m)?.[1])?.[0];if(r)return Number(r)}_OllamaApiShowParseModelfileParameterRepeatLastN(e){let r=e.filter(n=>n.search(/^repeat_last_n[  ]+(.*)/m)!==-1).map(n=>n.match(/^repeat_last_n[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):64}_OllamaApiShowParseModelfileParameterRepeatPenalty(e){let r=e.filter(n=>n.search(/^repeat_penalty[  ]+(.*)/m)!==-1).map(n=>n.match(/^repeat_penalty[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):1.1}_OllamaApiShowParseModelfileParameterTemperature(e){let r=e.filter(n=>n.search(/^temperature[  ]+(.*)/m)!==-1).map(n=>n.match(/^temperature[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):.8}_OllamaApiShowParseModelfileParameterSeed(e){let r=e.filter(n=>n.search(/^seed[  ]+(.*)/m)!==-1).map(n=>n.match(/^seed[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):0}_OllamaApiShowParseModelfileParameterStop(e){let r=e.filter(n=>n.search(/^stop[  ]+(.*)/m)!==-1).map(n=>n.match(/^stop[  ]+(.*)/m)?.[1]);return r||[]}_OllamaApiShowParseModelfileParameterTfsZ(e){let r=e.filter(n=>n.search(/^tfs_z[  ]+(.*)/m)!==-1).map(n=>n.match(/^tfs_z[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):1}_OllamaApiShowParseModelfileParameterNumPredict(e){let r=e.filter(n=>n.search(/^num_predict[  ]+(.*)/m)!==-1).map(n=>n.match(/^num_predict[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):128}_OllamaApiShowParseModelfileParameterTopK(e){let r=e.filter(n=>n.search(/^top_k[  ]+(.*)/m)!==-1).map(n=>n.match(/^top_k[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):40}_OllamaApiShowParseModelfileParameterTopP(e){let r=e.filter(n=>n.search(/^top_p[  ]+(.*)/m)!==-1).map(n=>n.match(/^top_p[  ]+(.*)/m)?.[1])?.[0];return r?Number(r):.9}_OllamaApiShowParseModelfileParameterAdapter(e){let r=e.filter(n=>n.search(/^ADAPTER[  ]+(.*)/m)!==-1).map(n=>n.match(/^ADAPTER[  ]+(.*)/m)?.[1])?.[0];if(r)return r}OllamaApiShowParseModelfile(e){let r=this._OllamaApiShowParseModelfileParameterSplit(e.parameters);return{from:e.template&&this._OllamaApiShowParseModelfileFrom(e.template),parameter:{mirostat:r.length>0?this._OllamaApiShowParseModelfileParameterMirostat(r):0,mirostat_eta:r.length>0?this._OllamaApiShowParseModelfileParameterMirostatEta(r):.1,mirostat_tau:r.length>0?this._OllamaApiShowParseModelfileParameterMirostatTau(r):5,num_ctx:r.length>0?this._OllamaApiShowParseModelfileParameterNumCtx(r):2048,num_gqa:r.length>0?this._OllamaApiShowParseModelfileParameterNumGqa(r):void 0,num_gpu:r.length>0?this._OllamaApiShowParseModelfileParameterNumGpu(r):1,num_thread:r.length>0?this._OllamaApiShowParseModelfileParameterNumThread(r):void 0,repeat_last_n:r.length>0?this._OllamaApiShowParseModelfileParameterRepeatLastN(r):64,repeat_penalty:r.length>0?this._OllamaApiShowParseModelfileParameterRepeatPenalty(r):1.1,temperature:r.length>0?this._OllamaApiShowParseModelfileParameterTemperature(r):.8,seed:r.length>0?this._OllamaApiShowParseModelfileParameterSeed(r):0,stop:r.length>0?this._OllamaApiShowParseModelfileParameterStop(r):[],tfs_z:r.length>0?this._OllamaApiShowParseModelfileParameterTfsZ(r):1,num_predict:r.length>0?this._OllamaApiShowParseModelfileParameterNumPredict(r):128,top_k:r.length>0?this._OllamaApiShowParseModelfileParameterTopK(r):40,top_p:r.length>0?this._OllamaApiShowParseModelfileParameterTopP(r):.9},template:e.template,system:e.template&&this._OllamaApiShowParseModelfileSystem(e.template),adapter:this._OllamaApiShowParseModelfileParameterAdapter(r),license:e.template&&this._OllamaApiShowParseModelfileLicense(e.template)}}async OllamaApiDelete(e){let r=this._RouteApiDelete,n=`${this._server}${r}`,a={method:"DELETE",headers:{"Content-Type":"application/json",...this._headers},body:JSON.stringify({model:e})};await Ye(n,a).then(async i=>{if(!i.ok){let c=await i.json();this._ErrorHandlerOllamaServer(r,i.status,c,a,e)}}).catch(i=>{throw this._ErrorLogger(i),i instanceof Fe&&i.type==="ECONNREFUSED"?yr:i})}async OllamaApiPull(e){let r=this._RouteApiPull,n=`${this._server}${r}`,s={method:"POST",headers:this._headers,body:JSON.stringify({name:e})},a;for(;a===void 0;)a=await Ye(n,s).then(async i=>{if(!i.ok){let c=await i.json();this._ErrorHandlerOllamaServer(r,i.status,c,s,e)}return i.body}).then(i=>{if(i===void 0)return;let c=new Wu.EventEmitter;return i?.on("data",u=>{if(u!==void 0){let d,f=Buffer.from(u);try{d=JSON.parse(f.toString())}catch(m){console.error(m)}d&&("total"in d&&d.total&&"completed"in d&&d.completed?c.emit("downloading",d.completed/d.total):"status"in d&&d.status==="success"?c.emit("done","Download completed"):"error"in d?c.emit("error",d.error):c.emit("message",d.status))}}),c}).catch(i=>{throw this._ErrorLogger(i),i instanceof Fe&&i.type==="ECONNREFUSED"?yr:i});return a}async _OllamaApiStream(e,r,n){let s=`${this._server}${e}`,a={method:"POST",headers:this._headers,body:JSON.stringify(r)},i;for(;i===void 0;){let c="";i=await Ye(s,a).then(async u=>{if(!u.ok){let d=await u.json();this._ErrorHandlerOllamaServer(e,u.status,d,a,r.model)}return u.body}).then(u=>{if(u===void 0)return;let d=new Wu.EventEmitter,f=m=>{if(m)if("done"in m)if(m.done)d.emit("done",m);else{let b=n(m);b&&d.emit("data",b)}else"error"in m&&m.error&&d.emit("error",m)};return u?.on("data",m=>{if(m!==void 0){let y=Buffer.from(m).toString();c!==""&&(y=c+y);for(let g of y.split(`
`).filter(_=>_!==""))try{let _=JSON.parse(g);f(_),c=""}catch(_){console.error(_),c+=g}}}),d}).catch(u=>{throw this._ErrorLogger(u),u instanceof Fe&&u.type==="ECONNREFUSED"?yr:u})}return i}async OllamaApiGenerate(e){return await this._OllamaApiStream(this._RouteApiGenerate,e,r=>{if(r&&"response"in r&&r.response)return r.response})}async OllamaApiGenerateNoStream(e){return await this._OllamaApiNoStream(this._RouteApiGenerate,e)}async OllamaApiChat(e){return await this._OllamaApiStream(this._RouteApiChat,e,r=>{if(r&&"message"in r&&r.message)return r.message.content})}async OllamaApiChatNoStream(e){return await this._OllamaApiNoStream(this._RouteApiChat,e)}async _OllamaApiNoStream(e,r){r.stream=!1;let n=`${this._server}${e}`,s={method:"POST",headers:this._headers,body:JSON.stringify(r)};return await Ye(n,s).then(async i=>{if(!i.ok){let c=await i.json();this._ErrorHandlerOllamaServer(e,i.status,c,s,r.model)}return i.json()}).then(i=>i).catch(i=>{throw this._ErrorLogger(i),i instanceof Fe&&i.type==="ECONNREFUSED"?yr:i})}async OllamaApiEmbeddings(e,r){let n=this._RouteApiEmbeddings,s=`${this._server}${n}`,a={method:"POST",headers:this._headers,body:JSON.stringify({model:r,prompt:e})},i;for(;i===void 0;)i=await Ye(s,a).then(async c=>{if(!c.ok){let u=await c.json();this._ErrorHandlerOllamaServer(n,c.status,u,a,r)}return c.json()}).then(async c=>{if(c!==void 0)return c}).catch(c=>{throw this._ErrorLogger(c),c instanceof Fe&&c.type==="ECONNREFUSED"?yr:c});return i}async OllamaApiPs(){let e=this._RouteApiPs,r=`${this._server}${e}`,n={method:"GET",headers:this._headers},s;for(;s===void 0;)s=await Ye(r,n).then(async a=>{if(!a.ok){let i=await a.json();this._ErrorHandlerOllamaServer(e,a.status,i,n)}return a.json()}).then(async a=>{if(a!==void 0)return a}).catch(a=>{throw this._ErrorLogger(a),a instanceof Fe&&a.type==="ECONNREFUSED"?yr:a});return s}};var Te=require("@raycast/api");var ni=new Error("Raycast Need Accessibility Permission for This Feature. Enable it under macOS Settings > Privacy & Security > Accessibility."),sy=new Error("Raycast Browser Extensions Needed for This Feature."),ay=new Error("Selected Text Not Found."),iy=new Error("Clipboard Text Not Found."),p1=new Error("Image Not Selected. At least one image need to be selected from Finder or in Clipboard.");var Ey=Ve(require("fs"));var g1="End-Of-Stream",ke=class extends Error{constructor(){super(g1)}};var si=class{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,r,n){let s=await this.read(e,r,n);return this.peekQueue.push(e.subarray(r,r+s)),s}async read(e,r,n){if(n===0)return 0;let s=this.readFromPeekBuffer(e,r,n);if(s+=await this.readRemainderFromStream(e,r+s,n-s),s===0)throw new ke;return s}readFromPeekBuffer(e,r,n){let s=n,a=0;for(;this.peekQueue.length>0&&s>0;){let i=this.peekQueue.pop();if(!i)throw new Error("peekData should be defined");let c=Math.min(i.length,s);e.set(i.subarray(0,c),r+a),a+=c,s-=c,c<i.length&&this.peekQueue.push(i.subarray(c))}return a}async readRemainderFromStream(e,r,n){let s=n,a=0;for(;s>0&&!this.endOfStream;){let i=Math.min(s,this.maxStreamReadSize),c=await this.readFromStream(e,r+a,i);if(c===0)break;a+=c,s-=c}return a}};var ai=class extends si{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,r,n){if(this.endOfStream)throw new ke;let s=await this.reader.read(new Uint8Array(n));return s.done&&(this.endOfStream=s.done),s.value?(e.set(s.value,r),s.value.byteLength):0}abort(){return this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}};var Vr=class{constructor(e){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=e?.onClose,e?.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(e,r=this.position){let n=new Uint8Array(e.len);if(await this.readBuffer(n,{position:r})<e.len)throw new ke;return e.get(n,0)}async peekToken(e,r=this.position){let n=new Uint8Array(e.len);if(await this.peekBuffer(n,{position:r})<e.len)throw new ke;return e.get(n,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new ke;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new ke;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){let r=this.fileInfo.size-this.position;if(e>r)return this.position+=r,r}return this.position+=e,e}async close(){await this.abort(),await this.onClose?.()}normalizeOptions(e,r){if(r&&r.position!==void 0&&r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return r?{mayBeLess:r.mayBeLess===!0,offset:r.offset?r.offset:0,length:r.length?r.length:e.length-(r.offset?r.offset:0),position:r.position?r.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}abort(){return Promise.resolve()}};var _1=256e3,pc=class extends Vr{constructor(e,r){super(r),this.streamReader=e,this.fileInfo=r?.fileInfo??{}}async readBuffer(e,r){let n=this.normalizeOptions(e,r),s=n.position-this.position;if(s>0)return await this.ignore(s),this.readBuffer(e,r);if(s<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(n.length===0)return 0;let a=await this.streamReader.read(e,n.offset,n.length);if(this.position+=a,(!r||!r.mayBeLess)&&a<n.length)throw new ke;return a}async peekBuffer(e,r){let n=this.normalizeOptions(e,r),s=0;if(n.position){let a=n.position-this.position;if(a>0){let i=new Uint8Array(n.length+a);return s=await this.peekBuffer(i,{mayBeLess:n.mayBeLess}),e.set(i.subarray(a),n.offset),s-a}if(a<0)throw new Error("Cannot peek from a negative offset in a stream")}if(n.length>0){try{s=await this.streamReader.peek(e,n.offset,n.length)}catch(a){if(r?.mayBeLess&&a instanceof ke)return 0;throw a}if(!n.mayBeLess&&s<n.length)throw new ke}return s}async ignore(e){let r=Math.min(_1,e),n=new Uint8Array(r),s=0;for(;s<e;){let a=e-s,i=await this.readBuffer(n,{length:Math.min(r,a)});if(i<0)return i;s+=i}return s}abort(){return this.streamReader.abort()}supportsRandomAccess(){return!1}};var gc=class extends Vr{constructor(e,r){super(r),this.uint8Array=e,this.fileInfo={...r?.fileInfo??{},size:e.length}}async readBuffer(e,r){if(r?.position){if(r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=r.position}let n=await this.peekBuffer(e,r);return this.position+=n,n}async peekBuffer(e,r){let n=this.normalizeOptions(e,r),s=Math.min(this.uint8Array.length-n.position,n.length);if(!n.mayBeLess&&s<n.length)throw new ke;return e.set(this.uint8Array.subarray(n.position,n.position+s),n.offset),s}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}};function Hu(t,e){return new pc(new ai(t),e)}function oy(t,e){return new gc(t,e)}var cy=require("node:fs/promises"),ii=class t extends Vr{static async fromFile(e){let r=await(0,cy.open)(e,"r"),n=await r.stat();return new t(r,{fileInfo:{path:e,size:n.size}})}constructor(e,r){super(r),this.fileHandle=e,this.fileInfo=r.fileInfo}async readBuffer(e,r){let n=this.normalizeOptions(e,r);if(this.position=n.position,n.length===0)return 0;let s=await this.fileHandle.read(e,n.offset,n.length,n.position);if(this.position+=s.bytesRead,s.bytesRead<n.length&&(!r||!r.mayBeLess))throw new ke;return s.bytesRead}async peekBuffer(e,r){let n=this.normalizeOptions(e,r),s=await this.fileHandle.read(e,n.offset,n.length,n.position);if(!n.mayBeLess&&s.bytesRead<n.length)throw new ke;return s.bytesRead}async close(){return await this.fileHandle.close(),super.close()}setPosition(e){this.position=e}supportsRandomAccess(){return!0}};var v1=ii.fromFile;var dy=Ve(ly(),1);var Ku={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},S1={};for(let[t,e]of Object.entries(Ku))S1[e]=Number.parseInt(t);function uy(t,e="utf-8"){switch(e.toLowerCase()){case"utf-8":case"utf8":return typeof globalThis.TextDecoder<"u"?new globalThis.TextDecoder("utf-8").decode(t):$1(t);case"utf-16le":return x1(t);case"ascii":return E1(t);case"latin1":case"iso-8859-1":return k1(t);case"windows-1252":return T1(t);default:throw new RangeError(`Encoding '${e}' not supported`)}}function $1(t){let e="",r=0;for(;r<t.length;){let n=t[r++];if(n<128)e+=String.fromCharCode(n);else if(n<224){let s=t[r++]&63;e+=String.fromCharCode((n&31)<<6|s)}else if(n<240){let s=t[r++]&63,a=t[r++]&63;e+=String.fromCharCode((n&15)<<12|s<<6|a)}else{let s=t[r++]&63,a=t[r++]&63,i=t[r++]&63,c=(n&7)<<18|s<<12|a<<6|i;c-=65536,e+=String.fromCharCode(55296+(c>>10&1023),56320+(c&1023))}}return e}function x1(t){let e="";for(let r=0;r<t.length;r+=2)e+=String.fromCharCode(t[r]|t[r+1]<<8);return e}function E1(t){return String.fromCharCode(...t.map(e=>e&127))}function k1(t){return String.fromCharCode(...t)}function T1(t){let e="";for(let r of t)r>=128&&r<=159&&Ku[r]?e+=Ku[r]:e+=String.fromCharCode(r);return e}function yt(t){return new DataView(t.buffer,t.byteOffset)}var fy={len:1,get(t,e){return yt(t).getUint8(e)},put(t,e,r){return yt(t).setUint8(e,r),e+1}},yc={len:2,get(t,e){return yt(t).getUint16(e,!0)},put(t,e,r){return yt(t).setUint16(e,r,!0),e+2}},_c={len:2,get(t,e){return yt(t).getUint16(e)},put(t,e,r){return yt(t).setUint16(e,r),e+2}};var hy={len:4,get(t,e){return yt(t).getUint32(e,!0)},put(t,e,r){return yt(t).setUint32(e,r,!0),e+4}},my={len:4,get(t,e){return yt(t).getUint32(e)},put(t,e,r){return yt(t).setUint32(e,r),e+4}};var py={len:4,get(t,e){return yt(t).getInt32(e)},put(t,e,r){return yt(t).setInt32(e,r),e+4}};var gy={len:8,get(t,e){return yt(t).getBigUint64(e,!0)},put(t,e,r){return yt(t).setBigUint64(e,r,!0),e+8}};var It=class{constructor(e,r){this.len=e,this.encoding=r}get(e,r=0){let n=e.subarray(r,r+this.len);return uy(n,this.encoding)}};var p5={utf8:new globalThis.TextDecoder("utf8")};var g5=new globalThis.TextEncoder;var y5=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zu(t){let{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function Ju(t,e){let r=t.length,n=e.length;if(n===0||n>r)return-1;let s=r-n;for(let a=0;a<=s;a++){let i=!0;for(let c=0;c<n;c++)if(t[a+c]!==e[c]){i=!1;break}if(i)return a}return-1}function yy(t,e){return Ju(t,e)!==-1}function _y(t){return[...t].map(e=>e.charCodeAt(0))}function by(t,e=0){let r=Number.parseInt(new It(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(r))return!1;let n=256;for(let s=e;s<e+148;s++)n+=t[s];for(let s=e+156;s<e+512;s++)n+=t[s];return r===n}var vy={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4};var wy=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk"],Sy=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive"];var $y=4100;async function Yu(t){return new bc().fromBuffer(t)}function vr(t,e,r){r={offset:0,...r};for(let[n,s]of e.entries())if(r.mask){if(s!==(r.mask[n]&t[n+r.offset]))return!1}else if(s!==t[n+r.offset])return!1;return!0}var bc=class{constructor(e){this.detectors=e?.customDetectors,this.tokenizerOptions={abortSignal:e?.signal},this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){let r=e.position;for(let n of this.detectors||[]){let s=await n(e);if(s)return s;if(r!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);let r=e instanceof Uint8Array?e:new Uint8Array(e);if(r?.length>1)return this.fromTokenizer(oy(r,this.tokenizerOptions))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){let r=await Hu(e,this.tokenizerOptions);try{return await this.fromTokenizer(r)}finally{await r.close()}}async toDetectionStream(e,r){let{sampleSize:n=$y}=r,s,a,i=e.getReader({mode:"byob"});try{let{value:d,done:f}=await i.read(new Uint8Array(n));if(a=d,!f&&d)try{s=await this.fromBuffer(d.slice(0,n))}catch(m){if(!(m instanceof ke))throw m;s=void 0}a=d}finally{i.releaseLock()}let c=new TransformStream({async start(d){d.enqueue(a)},transform(d,f){f.enqueue(d)}}),u=e.pipeThrough(c);return u.fileType=s,u}check(e,r){return vr(this.buffer,e,r)}checkString(e,r){return this.check(_y(e),r)}async parse(e){if(this.buffer=new Uint8Array($y),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);let r=await e.readToken(vy);return e.position+r>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(r),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});let r=new DataView(this.buffer.buffer),n={compressedSize:r.getUint32(18,!0),uncompressedSize:r.getUint32(22,!0),filenameLength:r.getUint16(26,!0),extraFieldLength:r.getUint16(28,!0)};if(n.filename=await e.readToken(new It(n.filenameLength,"utf-8")),await e.ignore(n.extraFieldLength),/classes\d*\.dex/.test(n.filename))return{ext:"apk",mime:"application/vnd.android.package-archive"};if(n.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(n.filename.endsWith(".rels")||n.filename.endsWith(".xml"))switch(n.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(n.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(n.filename.startsWith("3D/")&&n.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(n.filename==="mimetype"&&n.compressedSize===n.uncompressedSize){let s=await e.readToken(new It(n.compressedSize,"utf-8"));switch(s=s.trim(),s){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(n.compressedSize===0){let s=-1;for(;s<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),s=Ju(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(s>=0?s:this.buffer.length)}else await e.ignore(n.compressedSize)}}catch(r){if(!(r instanceof ke))throw r}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);let r=new Uint8Array(8);return await e.readBuffer(r),vr(r,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:vr(r,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:vr(r,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:vr(r,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:vr(r,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:vr(r,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let r=new It(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(r){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return r.startsWith("3g")?r.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);let r=10*1024*1024,n=new Uint8Array(Math.min(r,e.fileInfo.size));if(await e.readBuffer(n,{mayBeLess:!0}),yy(n,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(r){if(!(r instanceof ke))throw r}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let r=await this.readTiffHeader(!1);if(r)return r}if(this.check([77,77])){let r=await this.readTiffHeader(!0);if(r)return r}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function r(){let c=await e.peekNumber(fy),u=128,d=0;for(;(c&u)===0&&u!==0;)++d,u>>=1;let f=new Uint8Array(d+1);return await e.readBuffer(f),f}async function n(){let c=await r(),u=await r();u[0]^=128>>u.length-1;let d=Math.min(6,u.length),f=new DataView(c.buffer),m=new DataView(u.buffer,u.length-d,d);return{id:Zu(f),len:Zu(m)}}async function s(c){for(;c>0;){let u=await n();if(u.id===17026)return(await e.readToken(new It(u.len))).replaceAll(/\00.*$/g,"");await e.ignore(u.len),--c}}let a=await n();switch(await s(a.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let r=new It(4,"latin1").get(this.buffer,2);if(r.match("^d*")&&r>=1e3&&r<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new It(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&[`
`,"\r","	"," ","\0"].some(r=>this.checkString(r,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function r(){return{length:await e.readToken(py),type:await e.readToken(new It(4,"latin1"))}}do{let n=await r();if(n.length<0)return;switch(n.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(n.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function r(){let n=new Uint8Array(16);return await e.readBuffer(n),{id:n,size:Number(await e.readToken(gy))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){let n=await r(),s=n.size-24;if(vr(n.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let a=new Uint8Array(16);if(s-=await e.readBuffer(a),vr(a,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(vr(a,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new It(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let r=new DataView(this.buffer.buffer).getUint32(12,!0);if(r>12&&this.buffer.length>=r+16)try{let n=new TextDecoder().decode(this.buffer.slice(16,r+16));if(JSON.parse(n).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),by(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){let r=await this.tokenizer.readToken(e?_c:yc);switch(this.tokenizer.ignore(10),r){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD(e){let r=await this.tokenizer.readToken(e?_c:yc);for(let n=0;n<r;++n){let s=await this.readTiffTag(e);if(s)return s}}async readTiffHeader(e){let r=(e?_c:yc).get(this.buffer,2),n=(e?my:hy).get(this.buffer,4);if(r===42){if(n>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(n>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(n),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(r===43)return{ext:"tif",mime:"image/tiff"}}},P1=new Set(wy),C1=new Set(Sy);async function A1(){let t=new Map;return(await vg()).forEach((r,n)=>t.set(n,new fn(r))),t}async function ky(){let t=new Map,e=await A1();return await Promise.all([...e.entries()].map(async r=>{let n=await r[1].OllamaApiTags().catch(async s=>{await(0,Te.showToast)({style:Te.Toast.Style.Failure,title:`'${r[0]}' Server`,message:s.message})});n&&t.set(r[0],await Promise.all(n.models.map(async s=>{let a=await r[1].OllamaApiShow(s.name).catch(async i=>{await(0,Te.showToast)({style:Te.Toast.Style.Failure,title:`'${r[0]}' Server`,message:i.message})});return{name:s.name,capabilities:a&&a.capabilities}})))})),t}async function Qu(t){let e=await Fs(t);return(await new fn(e).OllamaApiTags()).models}async function Ty(t){let e=await O1(t);e&&(t=e);let r=await I1(t);return r&&(t=r),t}async function O1(t){let e=/{[ ]*selection[ ]*}/i;if(t.match(e)){let r=await j1();r&&(t=t.replace(e,r))}return t}async function I1(t){let e=/{[ ]*browser-tab[ ]*(?:[ ]+format="(html|markdown|text)"[ ]*)?}/i;if(t.match(e)){if(!Te.environment.canAccess(Te.BrowserExtension))throw sy;let r=t.match(e),n=await Te.BrowserExtension.getContent({format:`${r?.groups&&r.groups[1]?r.groups[1]:"markdown"}`});t=t.replace(e,n)}return t}async function Ry(){let t=[];if(!Te.environment.canAccess(Te.getSelectedFinderItems))throw ni;let e=await(0,Te.getSelectedFinderItems)().catch(()=>[]);if(e.length>0){let r=e.map(async s=>xy(s.path).catch(()=>{}));(await Promise.all(r)).forEach(s=>{s&&t.push(s)})}else{if(!Te.environment.canAccess(Te.Clipboard))throw ni;let r=await Te.Clipboard.read();if(r.file){let n=await xy(r.file);n&&t.push(n)}else if(r.text){let n=await N1(r.text);n&&t.push(n)}}return t}async function xy(t){if(!t.match(/(file:)?([/|.|\w|\s|-])/g))throw new Error("Only PNG and JPG are supported");t=t.replace("file://","");let e=Ey.default.readFileSync(decodeURI(t)),r=await Yu(e);if(r&&(r.mime==="image/jpeg"||r.mime==="image/png"))return{path:t,html:`<img src="${t}" alt="image" height="180" width="auto">`,base64:e.toString("base64")};throw new Error("Only PNG and JPG are supported")}async function N1(t){if(!t.match(/(http(s?):)([/|.|\w|\s|-])/g))throw new Error("Clipboard do not contain file path or web url");return await Ye(t).then(r=>{let n=r.headers.get("content-type");if(n==="image/jpeg"||n==="image/png")return r.arrayBuffer();throw new Error("Only PNG and JPG are supported")}).then(r=>({path:t,html:`<img src="${t}" alt="image" height="180" width="auto">`,base64:Buffer.from(r).toString("base64")}))}async function Py(t=!1){if(!Te.environment.canAccess(Te.getSelectedText))throw ni;return await(0,Te.getSelectedText)().catch(async()=>{if(!t)throw ay;return await Cy()})}async function Cy(t=!1){if(!Te.environment.canAccess(Te.Clipboard))throw ni;return await Te.Clipboard.readText().catch(async()=>{if(!t)throw iy;return await Py()})}async function j1(){let t,e=(0,Te.getPreferenceValues)();switch(e.ollamaResultViewInput){case"SelectedText":t=await Py(e.ollamaResultViewInputFallback);break;case"Clipboard":t=await Cy(e.ollamaResultViewInputFallback);break}return t}var me;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let a={};for(let i of s)a[i]=i;return a},t.getValidEnumValues=s=>{let a=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),i={};for(let c of a)i[c]=s[c];return t.objectValues(i)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let a=[];for(let i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},t.find=(s,a)=>{for(let i of s)if(a(i))return i},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(me||(me={}));var ed;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(ed||(ed={}));var M=me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wr=t=>{switch(typeof t){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(t)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(t)?M.array:t===null?M.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?M.promise:typeof Map<"u"&&t instanceof Map?M.map:typeof Set<"u"&&t instanceof Set?M.set:typeof Date<"u"&&t instanceof Date?M.date:M.object;default:return M.unknown}},O=me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),M1=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Nt=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(a){return a.message},n={_errors:[]},s=a=>{for(let i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let c=n,u=0;for(;u<i.path.length;){let d=i.path[u];u===i.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(r(i))):c[d]=c[d]||{_errors:[]},c=c[d],u++}}};return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Nt.create=t=>new Nt(t);var Hs=(t,e)=>{let r;switch(t.code){case O.invalid_type:t.received===M.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case O.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,me.jsonStringifyReplacer)}`;break;case O.unrecognized_keys:r=`Unrecognized key(s) in object: ${me.joinValues(t.keys,", ")}`;break;case O.invalid_union:r="Invalid input";break;case O.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${me.joinValues(t.options)}`;break;case O.invalid_enum_value:r=`Invalid enum value. Expected ${me.joinValues(t.options)}, received '${t.received}'`;break;case O.invalid_arguments:r="Invalid function arguments";break;case O.invalid_return_type:r="Invalid function return type";break;case O.invalid_date:r="Invalid date";break;case O.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:me.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case O.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case O.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case O.custom:r="Invalid input";break;case O.invalid_intersection_types:r="Intersection results could not be merged";break;case O.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case O.not_finite:r="Number must be finite";break;default:r=e.defaultError,me.assertNever(t)}return{message:r}},Ny=Hs;function q1(t){Ny=t}function vc(){return Ny}var wc=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let c="",u=n.filter(d=>!!d).slice().reverse();for(let d of u)c=d(i,{data:e,defaultError:c}).message;return{...s,path:a,message:c}},D1=[];function I(t,e){let r=vc(),n=wc({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Hs?void 0:Hs].filter(s=>!!s)});t.common.issues.push(n)}var Qe=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return W;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let a=await s.key,i=await s.value;n.push({key:a,value:i})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return W;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}},W=Object.freeze({status:"aborted"}),Ws=t=>({status:"dirty",value:t}),ct=t=>({status:"valid",value:t}),td=t=>t.status==="aborted",rd=t=>t.status==="dirty",Vn=t=>t.status==="valid",li=t=>typeof Promise<"u"&&t instanceof Promise;function Sc(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function jy(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}var U;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(U||(U={}));var oi,ci,Ft=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ay=(t,e)=>{if(Vn(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Nt(t.common.issues);return this._error=r,this._error}}};function Z(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,c)=>{var u,d;let{message:f}=t;return i.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(u=f??n)!==null&&u!==void 0?u:c.defaultError}:i.code!=="invalid_type"?{message:c.defaultError}:{message:(d=f??r)!==null&&d!==void 0?d:c.defaultError}},description:s}}var J=class{get description(){return this._def.description}_getType(e){return Wr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qe,ctx:{common:e.parent.common,data:e.data,parsedType:Wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(li(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wr(e)},a=this._parseSync({data:e,path:s.path,parent:s});return Ay(s,a)}"~validate"(e){var r,n;let s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wr(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:s});return Vn(a)?{value:a.value}:{issues:s.common.issues}}catch(a){!((n=(r=a?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(a=>Vn(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wr(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(li(s)?s:Promise.resolve(s));return Ay(n,a)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{let i=e(s),c=()=>a.addIssue({code:O.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(c(),!1)):i?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new jt({schema:this,typeName:B.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Dt.create(this,this._def)}nullable(){return Sr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gr.create(this)}promise(){return pn.create(this,this._def)}or(e){return Jn.create([this,e],this._def)}and(e){return Yn.create(this,e,this._def)}transform(e){return new jt({...Z(this._def),schema:this,typeName:B.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new rs({...Z(this._def),innerType:this,defaultValue:r,typeName:B.ZodDefault})}brand(){return new ui({typeName:B.ZodBranded,type:this,...Z(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ns({...Z(this._def),innerType:this,catchValue:r,typeName:B.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return di.create(this,e)}readonly(){return ss.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},F1=/^c[^\s-]{8,}$/i,U1=/^[0-9a-z]+$/,z1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,L1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,V1=/^[a-z0-9_-]{21}$/i,B1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,W1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,H1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,G1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Xu,K1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,J1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Y1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Q1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,X1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,My="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eE=new RegExp(`^${My}$`);function qy(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function tE(t){return new RegExp(`^${qy(t)}$`)}function Dy(t){let e=`${My}T${qy(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function rE(t,e){return!!((e==="v4"||!e)&&K1.test(t)||(e==="v6"||!e)&&J1.test(t))}function nE(t,e){if(!B1.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function sE(t,e){return!!((e==="v4"||!e)&&Z1.test(t)||(e==="v6"||!e)&&Y1.test(t))}var hn=class t extends J{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){let a=this._getOrReturnCtx(e);return I(a,{code:O.invalid_type,expected:M.string,received:a.parsedType}),W}let n=new Qe,s;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),I(s,{code:O.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),I(s,{code:O.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let i=e.data.length>a.value,c=e.data.length<a.value;(i||c)&&(s=this._getOrReturnCtx(e,s),i?I(s,{code:O.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&I(s,{code:O.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")H1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"email",code:O.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Xu||(Xu=new RegExp(G1,"u")),Xu.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"emoji",code:O.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")L1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"uuid",code:O.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")V1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"nanoid",code:O.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")F1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"cuid",code:O.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")U1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"cuid2",code:O.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")z1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"ulid",code:O.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),I(s,{validation:"url",code:O.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"regex",code:O.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),I(s,{code:O.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),I(s,{code:O.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),I(s,{code:O.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?Dy(a).test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{code:O.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?eE.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{code:O.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?tE(a).test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{code:O.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?W1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"duration",code:O.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?rE(e.data,a.version)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"ip",code:O.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?nE(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"jwt",code:O.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?sE(e.data,a.version)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"cidr",code:O.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Q1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"base64",code:O.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?X1.test(e.data)||(s=this._getOrReturnCtx(e,s),I(s,{validation:"base64url",code:O.invalid_string,message:a.message}),n.dirty()):me.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:O.invalid_string,...U.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...U.errToObj(e)})}url(e){return this._addCheck({kind:"url",...U.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...U.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...U.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...U.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...U.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...U.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...U.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...U.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...U.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...U.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...U.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...U.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...U.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...U.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...U.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...U.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...U.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...U.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...U.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...U.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...U.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...U.errToObj(r)})}nonempty(e){return this.min(1,U.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};hn.create=t=>{var e;return new hn({checks:[],typeName:B.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Z(t)})};function aE(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=parseInt(t.toFixed(s).replace(".","")),i=parseInt(e.toFixed(s).replace(".",""));return a%i/Math.pow(10,s)}var Bn=class t extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){let a=this._getOrReturnCtx(e);return I(a,{code:O.invalid_type,expected:M.number,received:a.parsedType}),W}let n,s=new Qe;for(let a of this._def.checks)a.kind==="int"?me.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:O.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:O.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:O.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?aE(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),I(n,{code:O.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:O.not_finite,message:a.message}),s.dirty()):me.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,U.toString(r))}gt(e,r){return this.setLimit("min",e,!1,U.toString(r))}lte(e,r){return this.setLimit("max",e,!0,U.toString(r))}lt(e,r){return this.setLimit("max",e,!1,U.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:U.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:U.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:U.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:U.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:U.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:U.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:U.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:U.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:U.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&me.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Bn.create=t=>new Bn({checks:[],typeName:B.ZodNumber,coerce:t?.coerce||!1,...Z(t)});var Wn=class t extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==M.bigint)return this._getInvalidInput(e);let n,s=new Qe;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:O.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:O.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),I(n,{code:O.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):me.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return I(r,{code:O.invalid_type,expected:M.bigint,received:r.parsedType}),W}gte(e,r){return this.setLimit("min",e,!0,U.toString(r))}gt(e,r){return this.setLimit("min",e,!1,U.toString(r))}lte(e,r){return this.setLimit("max",e,!0,U.toString(r))}lt(e,r){return this.setLimit("max",e,!1,U.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:U.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:U.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:U.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:U.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:U.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Wn.create=t=>{var e;return new Wn({checks:[],typeName:B.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Z(t)})};var Hn=class extends J{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==M.boolean){let n=this._getOrReturnCtx(e);return I(n,{code:O.invalid_type,expected:M.boolean,received:n.parsedType}),W}return ct(e.data)}};Hn.create=t=>new Hn({typeName:B.ZodBoolean,coerce:t?.coerce||!1,...Z(t)});var Gn=class t extends J{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){let a=this._getOrReturnCtx(e);return I(a,{code:O.invalid_type,expected:M.date,received:a.parsedType}),W}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return I(a,{code:O.invalid_date}),W}let n=new Qe,s;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),I(s,{code:O.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),I(s,{code:O.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):me.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:U.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:U.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Gn.create=t=>new Gn({checks:[],coerce:t?.coerce||!1,typeName:B.ZodDate,...Z(t)});var Gs=class extends J{_parse(e){if(this._getType(e)!==M.symbol){let n=this._getOrReturnCtx(e);return I(n,{code:O.invalid_type,expected:M.symbol,received:n.parsedType}),W}return ct(e.data)}};Gs.create=t=>new Gs({typeName:B.ZodSymbol,...Z(t)});var Kn=class extends J{_parse(e){if(this._getType(e)!==M.undefined){let n=this._getOrReturnCtx(e);return I(n,{code:O.invalid_type,expected:M.undefined,received:n.parsedType}),W}return ct(e.data)}};Kn.create=t=>new Kn({typeName:B.ZodUndefined,...Z(t)});var Zn=class extends J{_parse(e){if(this._getType(e)!==M.null){let n=this._getOrReturnCtx(e);return I(n,{code:O.invalid_type,expected:M.null,received:n.parsedType}),W}return ct(e.data)}};Zn.create=t=>new Zn({typeName:B.ZodNull,...Z(t)});var mn=class extends J{constructor(){super(...arguments),this._any=!0}_parse(e){return ct(e.data)}};mn.create=t=>new mn({typeName:B.ZodAny,...Z(t)});var Hr=class extends J{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ct(e.data)}};Hr.create=t=>new Hr({typeName:B.ZodUnknown,...Z(t)});var sr=class extends J{_parse(e){let r=this._getOrReturnCtx(e);return I(r,{code:O.invalid_type,expected:M.never,received:r.parsedType}),W}};sr.create=t=>new sr({typeName:B.ZodNever,...Z(t)});var Ks=class extends J{_parse(e){if(this._getType(e)!==M.undefined){let n=this._getOrReturnCtx(e);return I(n,{code:O.invalid_type,expected:M.void,received:n.parsedType}),W}return ct(e.data)}};Ks.create=t=>new Ks({typeName:B.ZodVoid,...Z(t)});var Gr=class t extends J{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==M.array)return I(r,{code:O.invalid_type,expected:M.array,received:r.parsedType}),W;if(s.exactLength!==null){let i=r.data.length>s.exactLength.value,c=r.data.length<s.exactLength.value;(i||c)&&(I(r,{code:i?O.too_big:O.too_small,minimum:c?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(I(r,{code:O.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(I(r,{code:O.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((i,c)=>s.type._parseAsync(new Ft(r,i,r.path,c)))).then(i=>Qe.mergeArray(n,i));let a=[...r.data].map((i,c)=>s.type._parseSync(new Ft(r,i,r.path,c)));return Qe.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:U.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:U.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:U.toString(r)}})}nonempty(e){return this.min(1,e)}};Gr.create=(t,e)=>new Gr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:B.ZodArray,...Z(e)});function Bs(t){if(t instanceof _t){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Dt.create(Bs(n))}return new _t({...t._def,shape:()=>e})}else return t instanceof Gr?new Gr({...t._def,type:Bs(t.element)}):t instanceof Dt?Dt.create(Bs(t.unwrap())):t instanceof Sr?Sr.create(Bs(t.unwrap())):t instanceof wr?wr.create(t.items.map(e=>Bs(e))):t}var _t=class t extends J{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=me.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==M.object){let d=this._getOrReturnCtx(e);return I(d,{code:O.invalid_type,expected:M.object,received:d.parsedType}),W}let{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),c=[];if(!(this._def.catchall instanceof sr&&this._def.unknownKeys==="strip"))for(let d in s.data)i.includes(d)||c.push(d);let u=[];for(let d of i){let f=a[d],m=s.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new Ft(s,m,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof sr){let d=this._def.unknownKeys;if(d==="passthrough")for(let f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")c.length>0&&(I(s,{code:O.unrecognized_keys,keys:c}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let f of c){let m=s.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new Ft(s,m,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let d=[];for(let f of u){let m=await f.key,b=await f.value;d.push({key:m,value:b,alwaysSet:f.alwaysSet})}return d}).then(d=>Qe.mergeObjectSync(n,d)):Qe.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return U.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,a,i,c;let u=(i=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,r,n).message)!==null&&i!==void 0?i:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=U.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:B.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return me.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return me.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Bs(this)}partial(e){let r={};return me.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return me.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Dt;)a=a._def.innerType;r[n]=a}}),new t({...this._def,shape:()=>r})}keyof(){return Fy(me.objectKeys(this.shape))}};_t.create=(t,e)=>new _t({shape:()=>t,unknownKeys:"strip",catchall:sr.create(),typeName:B.ZodObject,...Z(e)});_t.strictCreate=(t,e)=>new _t({shape:()=>t,unknownKeys:"strict",catchall:sr.create(),typeName:B.ZodObject,...Z(e)});_t.lazycreate=(t,e)=>new _t({shape:t,unknownKeys:"strip",catchall:sr.create(),typeName:B.ZodObject,...Z(e)});var Jn=class extends J{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(let c of a)if(c.result.status==="valid")return c.result;for(let c of a)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let i=a.map(c=>new Nt(c.ctx.common.issues));return I(r,{code:O.invalid_union,unionErrors:i}),W}if(r.common.async)return Promise.all(n.map(async a=>{let i={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(s);{let a,i=[];for(let u of n){let d={...r,common:{...r.common,issues:[]},parent:null},f=u._parseSync({data:r.data,path:r.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let c=i.map(u=>new Nt(u));return I(r,{code:O.invalid_union,unionErrors:c}),W}}get options(){return this._def.options}};Jn.create=(t,e)=>new Jn({options:t,typeName:B.ZodUnion,...Z(e)});var Br=t=>t instanceof Qn?Br(t.schema):t instanceof jt?Br(t.innerType()):t instanceof Xn?[t.value]:t instanceof es?t.options:t instanceof ts?me.objectValues(t.enum):t instanceof rs?Br(t._def.innerType):t instanceof Kn?[void 0]:t instanceof Zn?[null]:t instanceof Dt?[void 0,...Br(t.unwrap())]:t instanceof Sr?[null,...Br(t.unwrap())]:t instanceof ui||t instanceof ss?Br(t.unwrap()):t instanceof ns?Br(t._def.innerType):[],$c=class t extends J{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==M.object)return I(r,{code:O.invalid_type,expected:M.object,received:r.parsedType}),W;let n=this.discriminator,s=r.data[n],a=this.optionsMap.get(s);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(I(r,{code:O.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),W)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let a of r){let i=Br(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of i){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,a)}}return new t({typeName:B.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Z(n)})}};function nd(t,e){let r=Wr(t),n=Wr(e);if(t===e)return{valid:!0,data:t};if(r===M.object&&n===M.object){let s=me.objectKeys(e),a=me.objectKeys(t).filter(c=>s.indexOf(c)!==-1),i={...t,...e};for(let c of a){let u=nd(t[c],e[c]);if(!u.valid)return{valid:!1};i[c]=u.data}return{valid:!0,data:i}}else if(r===M.array&&n===M.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let a=0;a<t.length;a++){let i=t[a],c=e[a],u=nd(i,c);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return r===M.date&&n===M.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Yn=class extends J{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(a,i)=>{if(td(a)||td(i))return W;let c=nd(a.value,i.value);return c.valid?((rd(a)||rd(i))&&r.dirty(),{status:r.value,value:c.data}):(I(n,{code:O.invalid_intersection_types}),W)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Yn.create=(t,e,r)=>new Yn({left:t,right:e,typeName:B.ZodIntersection,...Z(r)});var wr=class t extends J{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.array)return I(n,{code:O.invalid_type,expected:M.array,received:n.parsedType}),W;if(n.data.length<this._def.items.length)return I(n,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),W;!this._def.rest&&n.data.length>this._def.items.length&&(I(n,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((i,c)=>{let u=this._def.items[c]||this._def.rest;return u?u._parse(new Ft(n,i,n.path,c)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>Qe.mergeArray(r,i)):Qe.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};wr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wr({items:t,typeName:B.ZodTuple,rest:null,...Z(e)})};var xc=class t extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.object)return I(n,{code:O.invalid_type,expected:M.object,received:n.parsedType}),W;let s=[],a=this._def.keyType,i=this._def.valueType;for(let c in n.data)s.push({key:a._parse(new Ft(n,c,n.path,c)),value:i._parse(new Ft(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Qe.mergeObjectAsync(r,s):Qe.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof J?new t({keyType:e,valueType:r,typeName:B.ZodRecord,...Z(n)}):new t({keyType:hn.create(),valueType:e,typeName:B.ZodRecord,...Z(r)})}},Zs=class extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.map)return I(n,{code:O.invalid_type,expected:M.map,received:n.parsedType}),W;let s=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([c,u],d)=>({key:s._parse(new Ft(n,c,n.path,[d,"key"])),value:a._parse(new Ft(n,u,n.path,[d,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let u of i){let d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return W;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(d.value,f.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let u of i){let d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return W;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(d.value,f.value)}return{status:r.value,value:c}}}};Zs.create=(t,e,r)=>new Zs({valueType:e,keyType:t,typeName:B.ZodMap,...Z(r)});var Js=class t extends J{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.set)return I(n,{code:O.invalid_type,expected:M.set,received:n.parsedType}),W;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(I(n,{code:O.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(I(n,{code:O.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let a=this._def.valueType;function i(u){let d=new Set;for(let f of u){if(f.status==="aborted")return W;f.status==="dirty"&&r.dirty(),d.add(f.value)}return{status:r.value,value:d}}let c=[...n.data.values()].map((u,d)=>a._parse(new Ft(n,u,n.path,d)));return n.common.async?Promise.all(c).then(u=>i(u)):i(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:U.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:U.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Js.create=(t,e)=>new Js({valueType:t,minSize:null,maxSize:null,typeName:B.ZodSet,...Z(e)});var Ec=class t extends J{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==M.function)return I(r,{code:O.invalid_type,expected:M.function,received:r.parsedType}),W;function n(c,u){return wc({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,vc(),Hs].filter(d=>!!d),issueData:{code:O.invalid_arguments,argumentsError:u}})}function s(c,u){return wc({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,vc(),Hs].filter(d=>!!d),issueData:{code:O.invalid_return_type,returnTypeError:u}})}let a={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof pn){let c=this;return ct(async function(...u){let d=new Nt([]),f=await c._def.args.parseAsync(u,a).catch(y=>{throw d.addIssue(n(u,y)),d}),m=await Reflect.apply(i,this,f);return await c._def.returns._def.type.parseAsync(m,a).catch(y=>{throw d.addIssue(s(m,y)),d})})}else{let c=this;return ct(function(...u){let d=c._def.args.safeParse(u,a);if(!d.success)throw new Nt([n(u,d.error)]);let f=Reflect.apply(i,this,d.data),m=c._def.returns.safeParse(f,a);if(!m.success)throw new Nt([s(f,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:wr.create(e).rest(Hr.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||wr.create([]).rest(Hr.create()),returns:r||Hr.create(),typeName:B.ZodFunction,...Z(n)})}},Qn=class extends J{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Qn.create=(t,e)=>new Qn({getter:t,typeName:B.ZodLazy,...Z(e)});var Xn=class extends J{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return I(r,{received:r.data,code:O.invalid_literal,expected:this._def.value}),W}return{status:"valid",value:e.data}}get value(){return this._def.value}};Xn.create=(t,e)=>new Xn({value:t,typeName:B.ZodLiteral,...Z(e)});function Fy(t,e){return new es({values:t,typeName:B.ZodEnum,...Z(e)})}var es=class t extends J{constructor(){super(...arguments),oi.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return I(r,{expected:me.joinValues(n),received:r.parsedType,code:O.invalid_type}),W}if(Sc(this,oi,"f")||jy(this,oi,new Set(this._def.values),"f"),!Sc(this,oi,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return I(r,{received:r.data,code:O.invalid_enum_value,options:n}),W}return ct(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};oi=new WeakMap;es.create=Fy;var ts=class extends J{constructor(){super(...arguments),ci.set(this,void 0)}_parse(e){let r=me.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==M.string&&n.parsedType!==M.number){let s=me.objectValues(r);return I(n,{expected:me.joinValues(s),received:n.parsedType,code:O.invalid_type}),W}if(Sc(this,ci,"f")||jy(this,ci,new Set(me.getValidEnumValues(this._def.values)),"f"),!Sc(this,ci,"f").has(e.data)){let s=me.objectValues(r);return I(n,{received:n.data,code:O.invalid_enum_value,options:s}),W}return ct(e.data)}get enum(){return this._def.values}};ci=new WeakMap;ts.create=(t,e)=>new ts({values:t,typeName:B.ZodNativeEnum,...Z(e)});var pn=class extends J{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==M.promise&&r.common.async===!1)return I(r,{code:O.invalid_type,expected:M.promise,received:r.parsedType}),W;let n=r.parsedType===M.promise?r.data:Promise.resolve(r.data);return ct(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};pn.create=(t,e)=>new pn({type:t,typeName:B.ZodPromise,...Z(e)});var jt=class extends J{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===B.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:i=>{I(n,i),i.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){let i=s.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(async c=>{if(r.value==="aborted")return W;let u=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return u.status==="aborted"?W:u.status==="dirty"||r.value==="dirty"?Ws(u.value):u});{if(r.value==="aborted")return W;let c=this._def.schema._parseSync({data:i,path:n.path,parent:n});return c.status==="aborted"?W:c.status==="dirty"||r.value==="dirty"?Ws(c.value):c}}if(s.type==="refinement"){let i=c=>{let u=s.refinement(c,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?W:(c.status==="dirty"&&r.dirty(),i(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?W:(c.status==="dirty"&&r.dirty(),i(c.value).then(()=>({status:r.value,value:c.value}))))}if(s.type==="transform")if(n.common.async===!1){let i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Vn(i))return i;let c=s.transform(i.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Vn(i)?Promise.resolve(s.transform(i.value,a)).then(c=>({status:r.value,value:c})):i);me.assertNever(s)}};jt.create=(t,e,r)=>new jt({schema:t,typeName:B.ZodEffects,effect:e,...Z(r)});jt.createWithPreprocess=(t,e,r)=>new jt({schema:e,effect:{type:"preprocess",transform:t},typeName:B.ZodEffects,...Z(r)});var Dt=class extends J{_parse(e){return this._getType(e)===M.undefined?ct(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Dt.create=(t,e)=>new Dt({innerType:t,typeName:B.ZodOptional,...Z(e)});var Sr=class extends J{_parse(e){return this._getType(e)===M.null?ct(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Sr.create=(t,e)=>new Sr({innerType:t,typeName:B.ZodNullable,...Z(e)});var rs=class extends J{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===M.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};rs.create=(t,e)=>new rs({innerType:t,typeName:B.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Z(e)});var ns=class extends J{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return li(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Nt(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Nt(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ns.create=(t,e)=>new ns({innerType:t,typeName:B.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Z(e)});var Ys=class extends J{_parse(e){if(this._getType(e)!==M.nan){let n=this._getOrReturnCtx(e);return I(n,{code:O.invalid_type,expected:M.nan,received:n.parsedType}),W}return{status:"valid",value:e.data}}};Ys.create=t=>new Ys({typeName:B.ZodNaN,...Z(t)});var iE=Symbol("zod_brand"),ui=class extends J{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},di=class t extends J{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?W:a.status==="dirty"?(r.dirty(),Ws(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?W:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:B.ZodPipeline})}},ss=class extends J{_parse(e){let r=this._def.innerType._parse(e),n=s=>(Vn(s)&&(s.value=Object.freeze(s.value)),s);return li(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};ss.create=(t,e)=>new ss({innerType:t,typeName:B.ZodReadonly,...Z(e)});function Oy(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Uy(t,e={},r){return t?mn.create().superRefine((n,s)=>{var a,i;let c=t(n);if(c instanceof Promise)return c.then(u=>{var d,f;if(!u){let m=Oy(e,n),b=(f=(d=m.fatal)!==null&&d!==void 0?d:r)!==null&&f!==void 0?f:!0;s.addIssue({code:"custom",...m,fatal:b})}});if(!c){let u=Oy(e,n),d=(i=(a=u.fatal)!==null&&a!==void 0?a:r)!==null&&i!==void 0?i:!0;s.addIssue({code:"custom",...u,fatal:d})}}):mn.create()}var oE={object:_t.lazycreate},B;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(B||(B={}));var cE=(t,e={message:`Input not instance of ${t.name}`})=>Uy(r=>r instanceof t,e),zy=hn.create,Ly=Bn.create,lE=Ys.create,uE=Wn.create,Vy=Hn.create,dE=Gn.create,fE=Gs.create,hE=Kn.create,mE=Zn.create,pE=mn.create,gE=Hr.create,yE=sr.create,_E=Ks.create,bE=Gr.create,vE=_t.create,wE=_t.strictCreate,SE=Jn.create,$E=$c.create,xE=Yn.create,EE=wr.create,kE=xc.create,TE=Zs.create,RE=Js.create,PE=Ec.create,CE=Qn.create,AE=Xn.create,OE=es.create,IE=ts.create,NE=pn.create,Iy=jt.create,jE=Dt.create,ME=Sr.create,qE=jt.createWithPreprocess,DE=di.create,FE=()=>zy().optional(),UE=()=>Ly().optional(),zE=()=>Vy().optional(),LE={string:(t=>hn.create({...t,coerce:!0})),number:(t=>Bn.create({...t,coerce:!0})),boolean:(t=>Hn.create({...t,coerce:!0})),bigint:(t=>Wn.create({...t,coerce:!0})),date:(t=>Gn.create({...t,coerce:!0}))},VE=W,p=Object.freeze({__proto__:null,defaultErrorMap:Hs,setErrorMap:q1,getErrorMap:vc,makeIssue:wc,EMPTY_PATH:D1,addIssueToContext:I,ParseStatus:Qe,INVALID:W,DIRTY:Ws,OK:ct,isAborted:td,isDirty:rd,isValid:Vn,isAsync:li,get util(){return me},get objectUtil(){return ed},ZodParsedType:M,getParsedType:Wr,ZodType:J,datetimeRegex:Dy,ZodString:hn,ZodNumber:Bn,ZodBigInt:Wn,ZodBoolean:Hn,ZodDate:Gn,ZodSymbol:Gs,ZodUndefined:Kn,ZodNull:Zn,ZodAny:mn,ZodUnknown:Hr,ZodNever:sr,ZodVoid:Ks,ZodArray:Gr,ZodObject:_t,ZodUnion:Jn,ZodDiscriminatedUnion:$c,ZodIntersection:Yn,ZodTuple:wr,ZodRecord:xc,ZodMap:Zs,ZodSet:Js,ZodFunction:Ec,ZodLazy:Qn,ZodLiteral:Xn,ZodEnum:es,ZodNativeEnum:ts,ZodPromise:pn,ZodEffects:jt,ZodTransformer:jt,ZodOptional:Dt,ZodNullable:Sr,ZodDefault:rs,ZodCatch:ns,ZodNaN:Ys,BRAND:iE,ZodBranded:ui,ZodPipeline:di,ZodReadonly:ss,custom:Uy,Schema:J,ZodSchema:J,late:oE,get ZodFirstPartyTypeKind(){return B},coerce:LE,any:pE,array:bE,bigint:uE,boolean:Vy,date:dE,discriminatedUnion:$E,effect:Iy,enum:OE,function:PE,instanceof:cE,intersection:xE,lazy:CE,literal:AE,map:TE,nan:lE,nativeEnum:IE,never:yE,null:mE,nullable:ME,number:Ly,object:vE,oboolean:zE,onumber:UE,optional:jE,ostring:FE,pipeline:DE,preprocess:qE,promise:NE,record:kE,set:RE,strictObject:wE,string:zy,symbol:fE,transformer:Iy,tuple:EE,undefined:hE,union:SE,unknown:gE,void:_E,NEVER:VE,ZodIssueCode:O,quotelessJson:M1,ZodError:Nt});var sd="2025-06-18";var By=[sd,"2025-03-26","2024-11-05","2024-10-07"],kc="2.0",Wy=p.union([p.string(),p.number().int()]),Hy=p.string(),BE=p.object({progressToken:p.optional(Wy)}).passthrough(),Lt=p.object({_meta:p.optional(BE)}).passthrough(),bt=p.object({method:p.string(),params:p.optional(Lt)}),fi=p.object({_meta:p.optional(p.object({}).passthrough())}).passthrough(),$r=p.object({method:p.string(),params:p.optional(fi)}),Vt=p.object({_meta:p.optional(p.object({}).passthrough())}).passthrough(),Tc=p.union([p.string(),p.number().int()]),Gy=p.object({jsonrpc:p.literal(kc),id:Tc}).merge(bt).strict(),Ky=t=>Gy.safeParse(t).success,Zy=p.object({jsonrpc:p.literal(kc)}).merge($r).strict(),Jy=t=>Zy.safeParse(t).success,Yy=p.object({jsonrpc:p.literal(kc),id:Tc,result:Vt}).strict(),ad=t=>Yy.safeParse(t).success,Ut;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Ut||(Ut={}));var Qy=p.object({jsonrpc:p.literal(kc),id:Tc,error:p.object({code:p.number().int(),message:p.string(),data:p.optional(p.unknown())})}).strict(),Xy=t=>Qy.safeParse(t).success,e0=p.union([Gy,Zy,Yy,Qy]),as=Vt.strict(),Rc=$r.extend({method:p.literal("notifications/cancelled"),params:fi.extend({requestId:Tc,reason:p.string().optional()})}),WE=p.object({src:p.string(),mimeType:p.optional(p.string()),sizes:p.optional(p.array(p.string()))}).passthrough(),hi=p.object({icons:p.array(WE).optional()}).passthrough(),mi=p.object({name:p.string(),title:p.optional(p.string())}).passthrough(),t0=mi.extend({version:p.string(),websiteUrl:p.optional(p.string())}).merge(hi),HE=p.object({experimental:p.optional(p.object({}).passthrough()),sampling:p.optional(p.object({}).passthrough()),elicitation:p.optional(p.object({}).passthrough()),roots:p.optional(p.object({listChanged:p.optional(p.boolean())}).passthrough())}).passthrough(),GE=bt.extend({method:p.literal("initialize"),params:Lt.extend({protocolVersion:p.string(),capabilities:HE,clientInfo:t0})});var KE=p.object({experimental:p.optional(p.object({}).passthrough()),logging:p.optional(p.object({}).passthrough()),completions:p.optional(p.object({}).passthrough()),prompts:p.optional(p.object({listChanged:p.optional(p.boolean())}).passthrough()),resources:p.optional(p.object({subscribe:p.optional(p.boolean()),listChanged:p.optional(p.boolean())}).passthrough()),tools:p.optional(p.object({listChanged:p.optional(p.boolean())}).passthrough())}).passthrough(),id=Vt.extend({protocolVersion:p.string(),capabilities:KE,serverInfo:t0,instructions:p.optional(p.string())}),ZE=$r.extend({method:p.literal("notifications/initialized")});var Pc=bt.extend({method:p.literal("ping")}),JE=p.object({progress:p.number(),total:p.optional(p.number()),message:p.optional(p.string())}).passthrough(),Cc=$r.extend({method:p.literal("notifications/progress"),params:fi.merge(JE).extend({progressToken:Wy})}),Ac=bt.extend({params:Lt.extend({cursor:p.optional(Hy)}).optional()}),Oc=Vt.extend({nextCursor:p.optional(Hy)}),r0=p.object({uri:p.string(),mimeType:p.optional(p.string()),_meta:p.optional(p.object({}).passthrough())}).passthrough(),n0=r0.extend({text:p.string()}),od=p.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),s0=r0.extend({blob:od}),a0=mi.extend({uri:p.string(),description:p.optional(p.string()),mimeType:p.optional(p.string()),_meta:p.optional(p.object({}).passthrough())}).merge(hi),YE=mi.extend({uriTemplate:p.string(),description:p.optional(p.string()),mimeType:p.optional(p.string()),_meta:p.optional(p.object({}).passthrough())}).merge(hi),QE=Ac.extend({method:p.literal("resources/list")}),cd=Oc.extend({resources:p.array(a0)}),XE=Ac.extend({method:p.literal("resources/templates/list")}),ld=Oc.extend({resourceTemplates:p.array(YE)}),ek=bt.extend({method:p.literal("resources/read"),params:Lt.extend({uri:p.string()})}),ud=Vt.extend({contents:p.array(p.union([n0,s0]))}),tk=$r.extend({method:p.literal("notifications/resources/list_changed")}),rk=bt.extend({method:p.literal("resources/subscribe"),params:Lt.extend({uri:p.string()})}),nk=bt.extend({method:p.literal("resources/unsubscribe"),params:Lt.extend({uri:p.string()})}),sk=$r.extend({method:p.literal("notifications/resources/updated"),params:fi.extend({uri:p.string()})}),ak=p.object({name:p.string(),description:p.optional(p.string()),required:p.optional(p.boolean())}).passthrough(),ik=mi.extend({description:p.optional(p.string()),arguments:p.optional(p.array(ak)),_meta:p.optional(p.object({}).passthrough())}).merge(hi),ok=Ac.extend({method:p.literal("prompts/list")}),dd=Oc.extend({prompts:p.array(ik)}),ck=bt.extend({method:p.literal("prompts/get"),params:Lt.extend({name:p.string(),arguments:p.optional(p.record(p.string()))})}),fd=p.object({type:p.literal("text"),text:p.string(),_meta:p.optional(p.object({}).passthrough())}).passthrough(),hd=p.object({type:p.literal("image"),data:od,mimeType:p.string(),_meta:p.optional(p.object({}).passthrough())}).passthrough(),md=p.object({type:p.literal("audio"),data:od,mimeType:p.string(),_meta:p.optional(p.object({}).passthrough())}).passthrough(),lk=p.object({type:p.literal("resource"),resource:p.union([n0,s0]),_meta:p.optional(p.object({}).passthrough())}).passthrough(),uk=a0.extend({type:p.literal("resource_link")}),i0=p.union([fd,hd,md,uk,lk]),dk=p.object({role:p.enum(["user","assistant"]),content:i0}).passthrough(),pd=Vt.extend({description:p.optional(p.string()),messages:p.array(dk)}),fk=$r.extend({method:p.literal("notifications/prompts/list_changed")}),hk=p.object({title:p.optional(p.string()),readOnlyHint:p.optional(p.boolean()),destructiveHint:p.optional(p.boolean()),idempotentHint:p.optional(p.boolean()),openWorldHint:p.optional(p.boolean())}).passthrough(),mk=mi.extend({description:p.optional(p.string()),inputSchema:p.object({type:p.literal("object"),properties:p.optional(p.object({}).passthrough()),required:p.optional(p.array(p.string()))}).passthrough(),outputSchema:p.optional(p.object({type:p.literal("object"),properties:p.optional(p.object({}).passthrough()),required:p.optional(p.array(p.string()))}).passthrough()),annotations:p.optional(hk),_meta:p.optional(p.object({}).passthrough())}).merge(hi),pk=Ac.extend({method:p.literal("tools/list")}),gd=Oc.extend({tools:p.array(mk)}),Ic=Vt.extend({content:p.array(i0).default([]),structuredContent:p.object({}).passthrough().optional(),isError:p.optional(p.boolean())}),F5=Ic.or(Vt.extend({toolResult:p.unknown()})),gk=bt.extend({method:p.literal("tools/call"),params:Lt.extend({name:p.string(),arguments:p.optional(p.record(p.unknown()))})}),yk=$r.extend({method:p.literal("notifications/tools/list_changed")}),o0=p.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),_k=bt.extend({method:p.literal("logging/setLevel"),params:Lt.extend({level:o0})}),bk=$r.extend({method:p.literal("notifications/message"),params:fi.extend({level:o0,logger:p.optional(p.string()),data:p.unknown()})}),vk=p.object({name:p.string().optional()}).passthrough(),wk=p.object({hints:p.optional(p.array(vk)),costPriority:p.optional(p.number().min(0).max(1)),speedPriority:p.optional(p.number().min(0).max(1)),intelligencePriority:p.optional(p.number().min(0).max(1))}).passthrough(),Sk=p.object({role:p.enum(["user","assistant"]),content:p.union([fd,hd,md])}).passthrough(),$k=bt.extend({method:p.literal("sampling/createMessage"),params:Lt.extend({messages:p.array(Sk),systemPrompt:p.optional(p.string()),includeContext:p.optional(p.enum(["none","thisServer","allServers"])),temperature:p.optional(p.number()),maxTokens:p.number().int(),stopSequences:p.optional(p.array(p.string())),metadata:p.optional(p.object({}).passthrough()),modelPreferences:p.optional(wk)})}),xk=Vt.extend({model:p.string(),stopReason:p.optional(p.enum(["endTurn","stopSequence","maxTokens"]).or(p.string())),role:p.enum(["user","assistant"]),content:p.discriminatedUnion("type",[fd,hd,md])}),Ek=p.object({type:p.literal("boolean"),title:p.optional(p.string()),description:p.optional(p.string()),default:p.optional(p.boolean())}).passthrough(),kk=p.object({type:p.literal("string"),title:p.optional(p.string()),description:p.optional(p.string()),minLength:p.optional(p.number()),maxLength:p.optional(p.number()),format:p.optional(p.enum(["email","uri","date","date-time"]))}).passthrough(),Tk=p.object({type:p.enum(["number","integer"]),title:p.optional(p.string()),description:p.optional(p.string()),minimum:p.optional(p.number()),maximum:p.optional(p.number())}).passthrough(),Rk=p.object({type:p.literal("string"),title:p.optional(p.string()),description:p.optional(p.string()),enum:p.array(p.string()),enumNames:p.optional(p.array(p.string()))}).passthrough(),Pk=p.union([Ek,kk,Tk,Rk]),Ck=bt.extend({method:p.literal("elicitation/create"),params:Lt.extend({message:p.string(),requestedSchema:p.object({type:p.literal("object"),properties:p.record(p.string(),Pk),required:p.optional(p.array(p.string()))}).passthrough()})}),Ak=Vt.extend({action:p.enum(["accept","decline","cancel"]),content:p.optional(p.record(p.string(),p.unknown()))}),Ok=p.object({type:p.literal("ref/resource"),uri:p.string()}).passthrough();var Ik=p.object({type:p.literal("ref/prompt"),name:p.string()}).passthrough(),Nk=bt.extend({method:p.literal("completion/complete"),params:Lt.extend({ref:p.union([Ik,Ok]),argument:p.object({name:p.string(),value:p.string()}).passthrough(),context:p.optional(p.object({arguments:p.optional(p.record(p.string(),p.string()))}))})}),yd=Vt.extend({completion:p.object({values:p.array(p.string()).max(100),total:p.optional(p.number().int()),hasMore:p.optional(p.boolean())}).passthrough()}),jk=p.object({uri:p.string().startsWith("file://"),name:p.optional(p.string()),_meta:p.optional(p.object({}).passthrough())}).passthrough(),Mk=bt.extend({method:p.literal("roots/list")}),qk=Vt.extend({roots:p.array(jk)}),Dk=$r.extend({method:p.literal("notifications/roots/list_changed")}),U5=p.union([Pc,GE,Nk,_k,ck,ok,QE,XE,ek,rk,nk,gk,pk]),z5=p.union([Rc,Cc,ZE,Dk]),L5=p.union([as,xk,Ak,qk]),V5=p.union([Pc,$k,Ck,Mk]),B5=p.union([Rc,Cc,bk,sk,tk,yk,fk]),W5=p.union([as,id,yd,pd,dd,cd,ld,ud,Ic,gd]),zt=class extends Error{constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var Fk=6e4,Nc=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Rc,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(Cc,r=>{this._onprogress(r)}),this.setRequestHandler(Pc,r=>({}))}_setupTimeout(e,r,n,s,a=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(s,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:a,onTimeout:s})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new zt(Ut.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,s;this._transport=e;let a=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{a?.(),this._onclose()};let i=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=u=>{i?.(u),this._onerror(u)};let c=(s=this._transport)===null||s===void 0?void 0:s.onmessage;this._transport.onmessage=(u,d)=>{c?.(u,d),ad(u)||Xy(u)?this._onresponse(u):Ky(u)?this._onrequest(u,d):Jy(u)?this._onnotification(u):this._onerror(new Error(`Unknown message type: ${JSON.stringify(u)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new zt(Ut.ConnectionClosed,"Connection closed");for(let s of r.values())s(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(s=>this._onerror(new Error(`Uncaught error in notification handler: ${s}`)))}_onrequest(e,r){var n,s;let a=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler,i=this._transport;if(a===void 0){i?.send({jsonrpc:"2.0",id:e.id,error:{code:Ut.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:i?.sessionId,_meta:(s=e.params)===null||s===void 0?void 0:s._meta,sendNotification:d=>this.notification(d,{relatedRequestId:e.id}),sendRequest:(d,f,m)=>this.request(d,f,{...m,relatedRequestId:e.id}),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>a(e,u)).then(d=>{if(!c.signal.aborted)return i?.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var f;if(!c.signal.aborted)return i?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Ut.InternalError,message:(f=d.message)!==null&&f!==void 0?f:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,s=Number(r),a=this._progressHandlers.get(s);if(!a){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let i=this._responseHandlers.get(s),c=this._timeoutInfo.get(s);if(c&&i&&c.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(u){i(u);return}a(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),ad(e))n(e);else{let s=new zt(e.error.code,e.error.message,e.error.data);n(s)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:s,resumptionToken:a,onresumptiontoken:i}=n??{};return new Promise((c,u)=>{var d,f,m,b,y,g;if(!this._transport){u(new Error("Not connected"));return}((d=this._options)===null||d===void 0?void 0:d.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=n?.signal)===null||f===void 0||f.throwIfAborted();let _=this._requestMessageId++,w={...e,jsonrpc:"2.0",id:_};n?.onprogress&&(this._progressHandlers.set(_,n.onprogress),w.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:_}});let S=R=>{var k;this._responseHandlers.delete(_),this._progressHandlers.delete(_),this._cleanupTimeout(_),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:_,reason:String(R)}},{relatedRequestId:s,resumptionToken:a,onresumptiontoken:i}).catch(N=>this._onerror(new Error(`Failed to send cancellation: ${N}`))),u(R)};this._responseHandlers.set(_,R=>{var k;if(!(!((k=n?.signal)===null||k===void 0)&&k.aborted)){if(R instanceof Error)return u(R);try{let N=r.parse(R.result);c(N)}catch(N){u(N)}}}),(b=n?.signal)===null||b===void 0||b.addEventListener("abort",()=>{var R;S((R=n?.signal)===null||R===void 0?void 0:R.reason)});let T=(y=n?.timeout)!==null&&y!==void 0?y:Fk,P=()=>S(new zt(Ut.RequestTimeout,"Request timed out",{timeout:T}));this._setupTimeout(_,T,n?.maxTotalTimeout,P,(g=n?.resetTimeoutOnProgress)!==null&&g!==void 0?g:!1),this._transport.send(w,{relatedRequestId:s,resumptionToken:a,onresumptiontoken:i}).catch(R=>{this._cleanupTimeout(_),u(R)})})}async notification(e,r){var n,s;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((s=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&s!==void 0?s:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var u;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let d={...e,jsonrpc:"2.0"};(u=this._transport)===null||u===void 0||u.send(d,r).catch(f=>this._onerror(f))});return}let c={...e,jsonrpc:"2.0"};await this._transport.send(c,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(s,a)=>Promise.resolve(r(e.parse(s),a)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function c0(t,e){return Object.entries(e).reduce((r,[n,s])=>(s&&typeof s=="object"?r[n]=r[n]?{...r[n],...s}:s:r[n]=s,r),{...t})}var cS=Ve(Nb(),1),lS=Ve(oS(),1);function $j(){let t=new cS.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,lS.default)(t),t}var Kl=class{constructor(e){this._ajv=e??$j()}getValidator(e){var r;let n="$id"in e&&typeof e.$id=="string"?(r=this._ajv.getSchema(e.$id))!==null&&r!==void 0?r:this._ajv.compile(e):this._ajv.compile(e);return s=>n(s)?{valid:!0,data:s,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}};var Zl=class extends Nc{constructor(e,r){var n,s;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._jsonSchemaValidator=(s=r?.jsonSchemaValidator)!==null&&s!==void 0?s:new Kl}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=c0(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:sd,capabilities:this._capabilities,clientInfo:this._clientInfo}},id,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!By.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,s,a,i;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((s=this._serverCapabilities)===null||s===void 0)&&s.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},as,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},yd,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},as,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},pd,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},dd,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},cd,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},ld,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},ud,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},as,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},as,r)}async callTool(e,r=Ic,n){let s=await this.request({method:"tools/call",params:e},r,n),a=this.getToolOutputValidator(e.name);if(a){if(!s.structuredContent&&!s.isError)throw new zt(Ut.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(s.structuredContent)try{let i=a(s.structuredContent);if(!i.valid)throw new zt(Ut.InvalidParams,`Structured content does not match the tool's output schema: ${i.errorMessage}`)}catch(i){throw i instanceof zt?i:new zt(Ut.InvalidParams,`Failed to validate structured content: ${i instanceof Error?i.message:String(i)}`)}}return s}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema){let n=this._jsonSchemaValidator.getValidator(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},gd,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var XS=Ve(YS(),1),bo=Ve(require("node:process"),1),e$=require("node:stream");var Yl=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),Jj(r)}clear(){this._buffer=void 0}};function Jj(t){return e0.parse(JSON.parse(t))}function QS(t){return JSON.stringify(t)+`
`}var Yj=bo.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Qj(){let t={};for(let e of Yj){let r=bo.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}var Ql=class{constructor(e){this._abortController=new AbortController,this._readBuffer=new Yl,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new e$.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,s,a,i,c;this._process=(0,XS.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...Qj(),...this._serverParams.env},stdio:["pipe","pipe",(s=this._serverParams.stderr)!==null&&s!==void 0?s:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:bo.default.platform==="win32"&&Xj(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,f;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}r(u),(f=this.onerror)===null||f===void 0||f.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(i=this._process.stdout)===null||i===void 0||i.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let s=QS(e);this._process.stdin.write(s)?r():this._process.stdin.once("drain",r)})}};function Xj(){return"type"in bo.default}var Qm=require("child_process"),Xm=Ve(require("os"));function Ym(t){return t.map(e=>{let r={type:"function",function:{name:e.name,description:e.description||"",parameters:{type:"object",required:e.inputSchema.required||[],properties:{}}}};return Object.keys(e.inputSchema.properties).forEach(n=>{let s=e.inputSchema.properties[n];r.function.parameters.properties[n]={type:s.type,description:s.description||""},s.items?.enum&&(r.function.parameters.properties[n].enum=s.items.enum)}),r})}var Xl=class{constructor(e,r=!0){this._client=new Map;this._clientToolsFunctionNames=new Map;this._cacheTools=new Map;this._cacheToolsOllama=new Map;let n=Object.keys(e.mcpServers);if(n.length===0)throw new Error("MCP configuration must contain at least one server");n.forEach(s=>{this._client.set(s,new ep(e.mcpServers[s],r)),r&&(r=!1)})}_renameToolsFunctionName(e,r){return r.map(n=>{let s=`${e}_${n.name}`;return n.name=s,this._clientToolsFunctionNames.has(s)||this._clientToolsFunctionNames.set(s,e),n})}_restoreToolsFunctionName(e,r){return r.map(n=>{let s=n.function.name.replace(new RegExp(`^${e}_`),"");return n.function.name=s,n})}async GetTools(e=!0,r=[...this._client.keys()]){let n=[];return(await Promise.all(r.map(async a=>{if(e&&this._cacheTools.has(a))return this._cacheTools.get(a);if(this._client.has(a))try{let i=await this._client.get(a).GetTools(!1).then(c=>this._renameToolsFunctionName(a,c));if(i.length>0)return this._cacheTools.set(a,i),i}catch(i){console.error(`[ERROR] Mcp Client - Server Name: "${a}" - Error: "${i}"`)}}))).forEach(a=>{a&&(n=n.concat(a))}),n}async GetToolsOllama(e=!0,r=[...this._client.keys()]){let n=[];return(await Promise.all(r.map(async a=>{if(e&&this._cacheToolsOllama.has(a))return this._cacheToolsOllama.get(a);let i=Ym(await this.GetTools(e,[a]));if(i.length>0)return this._cacheToolsOllama.set(a,i),i}))).forEach(a=>{a&&(n=n.concat(a))}),n}GetToolsInfoForOllama(e){let r=[];return e.forEach(n=>{let s=this._clientToolsFunctionNames.get(n.function.name);if(!s)return;let a=n.function.name.replace(new RegExp(`^${s}_`),"");r.push({server:s,function:a,arguments:n.function.arguments})}),r}async CallToolsForOllama(e){let r=[],n=new Map;return e.forEach(a=>{let i=this._clientToolsFunctionNames.get(a.function.name);i&&(n.has(i)?n.get(i).push(a):n.set(i,[a]))}),(await Promise.all([...n.keys()].map(async a=>{let i=this._client.get(a),c=this._restoreToolsFunctionName(a,n.get(a));try{return await i.CallToolsForOllama(c)}catch(u){console.error(`[ERROR] Mcp Client - Server Name: "${a}" - Error: "${u}"`)}}))).forEach(a=>{a&&(r=r.concat(a))}),r}},ep=class{constructor(e,r=!0){this._connected=!1;this._client=new Zl({name:"raycast-extension-ollama",version:"1.0.0"},{capabilities:{tools:{}}}),this._client.onclose=()=>this._connected=!1,r&&(this._initEnvs(),this._initPaths()),this._config=e}_initEnvs(){let e=Xm.default.userInfo().shell||"/bin/sh";try{(0,Qm.execSync)(`LC_ALL=en_US.UTF-8 ${e} -L -i -c 'printenv'`,{encoding:"utf8"}).split(`
`).forEach(r=>{let[n,s]=r.split("=");n&&s&&(process.env[n]=s)})}catch(r){console.error("Error retrieving user shell envs:",r)}}_initPaths(){let e=Xm.default.userInfo().shell||"/bin/sh";try{let r=(0,Qm.execSync)(`${e} -l -c 'echo $PATH'`).toString().trim();process.env.PATH=r}catch(r){console.error("Error retrieving user shell paths:",r)}}async _connect(){this._connected||(await this._client.connect(new Ql(this._config)),this._connected=!0)}async GetTools(e=!0){if(e&&this._tools)return this._tools;await this._connect();try{let r=await this._client.listTools();return this._tools=r.tools.map(n=>({name:n.name,description:n.description,inputSchema:n.inputSchema})),this._tools}finally{await this._client.close()}}async GetToolsForOllama(e=!0){if(e&&this._ollamaTools)return this._ollamaTools;let r=await this.GetTools(e);return this._ollamaTools=Ym(r),this._ollamaTools}async CallToolsForOllama(e){await this._connect();try{return await Promise.all(e.map(async r=>(await this._client.callTool(r.function)).content))}finally{await this._client.close()}}};globalThis.fetch||(globalThis.fetch=Ye,globalThis.Headers=ot,globalThis.Request=Lr,globalThis.Response=gt);var eM=(0,Be.getPreferenceValues)(),Ca;async function tp(t,e,r,n){let s=await wg(t).catch(async i=>{await(0,Be.showToast)({style:Be.Toast.Style.Failure,title:"Error",message:i}),n(!0)});if(!s)return;let a=await tM(s.models.main.server_name,s.models.main.tag,s.models.vision?.server_name,s.models.vision?.tag).catch(async i=>{await(0,Be.showToast)({style:Be.Toast.Style.Failure,title:"Error",message:i}),r(!1)});e(s),a&&r(!0)}async function tM(t,e,r,n){let s=new Map;return s.set(t,await Qu(t)),!(s.get(t).filter(a=>a.name===e).length===0||(r&&n&&!s.has(r)&&s.set(r,await Qu(r)),r&&n&&s.get(r).filter(a=>a.name===n).length===0))}async function t$(t,e,r){let n={name:"New Chat",models:t.models,messages:[]};await Ka(n),await r().then(()=>e(0))}function r$(t){let e="";return t&&t.messages.map(r=>e+=`Question:
${r.messages[0].content}

Answer:${r.messages[1].content}

`),e}function n$(t,e,r,n){let s=[];t.messages.slice(t.messages.length-Number(eM.ollamaChatHistoryMessagesNumber)).forEach(i=>s.push(...i.messages));let a=e;return n&&n.tools&&(a=`Respond to the user's prompt using the provided context information. Cite sources with url when available.
User Prompt: '${e}'`,n.tools&&(a+=`Context from Tools Calling: '${n.tools.data}'
`)),s.push({role:"user",content:a,images:r&&r.map(i=>i.base64)}),s}async function rM(){let t=await Be.LocalStorage.getItem("mcp_server_config");if(!t)throw"Mcp Servers are not configured";let e=JSON.parse(t);Ca=new Xl(e)}async function nM(t,e,r){if(await(0,Be.showToast)({style:Be.Toast.Style.Animated,title:"\u{1F527} Tool Calling..."}),Ca===void 0&&(await rM().catch(u=>{(0,Be.showToast)({title:"Error",message:u,style:Be.Toast.Style.Failure})}),Ca===void 0))return delete e.mcp_server,[void 0,void 0];let n=e.models.main;e.models.tools&&(n=e.models.tools);let s=await Ca.GetToolsOllama(!0,e.mcp_server),a=new fn(n.server),i={model:n.tag,messages:n$(e,t,r),keep_alive:n.keep_alive,tools:s},c=await a.OllamaApiChatNoStream(i);if(c.message?.tool_calls){let u=Ca.GetToolsInfoForOllama(c.message.tool_calls),d=await Ca.CallToolsForOllama(c.message.tool_calls);if(d.length>0)return[JSON.stringify(d),u]}return[void 0,void 0]}async function sM(t,e,r,n,s,a){await(0,Be.showToast)({style:Be.Toast.Style.Animated,title:"\u{1F9E0} Inference..."});let i=n.models.main;e&&n.models.vision&&(i=n.models.vision);let c={model:i.tag,messages:n$(n,t,e,r),keep_alive:i.keep_alive},u=n.messages.length;new fn(i.server).OllamaApiChat(c).then(async f=>{f.on("data",m=>{s(b=>{if(b){if(b.messages.length===u)return{...b,messages:b.messages.concat({model:n.models.main.tag,created_at:"",images:e,messages:[{role:"user",content:t},{role:"assistant",content:m}],done:!1})};{let y=JSON.parse(JSON.stringify(b));return y.messages[y.messages.length-1].messages[1].content+=m,{...b,messages:y.messages}}}})}),f.on("done",async m=>{await(0,Be.showToast)({style:Be.Toast.Style.Success,title:"\u{1F9E0} Inference Done."}),s(b=>{if(b){let y=JSON.parse(JSON.stringify(b));return y.messages[y.messages.length-1]={...m,images:e,tools:r.tools&&r.tools.meta,messages:y.messages[y.messages.length-1].messages},a(!1),{...y}}})})}).catch(async f=>{await(0,Be.showToast)({style:Be.Toast.Style.Failure,title:"Error:",message:f.message}),a(!1)})}async function s$(t,e,r,n,s){s(!0);let a={};if(t=await Ty(t),r.mcp_server){let[i,c]=await nM(t,r,e);i&&c&&(a.tools={data:i,meta:c})}await sM(t,e,a,r,n,s)}var ks=require("@raycast/api"),mr={New:ks.Keyboard.Shortcut.Common.New,Edit:ks.Keyboard.Shortcut.Common.Edit,Copy:ks.Keyboard.Shortcut.Common.Copy,Remove:ks.Keyboard.Shortcut.Common.Remove,CopyName:ks.Keyboard.Shortcut.Common.CopyName,ToggleQuickLook:ks.Keyboard.Shortcut.Common.ToggleQuickLook,AttachText:{macOS:{modifiers:["cmd"],key:"t"},Windows:{modifiers:["ctrl"],key:"t"}},AttachBrowserTab:{macOS:{modifiers:["cmd"],key:"b"},Windows:{modifiers:["ctrl"],key:"b"}},AttachImage:{macOS:{modifiers:["cmd"],key:"i"},Windows:{modifiers:["ctrl"],key:"i"}},ChangeModel:{macOS:{modifiers:["cmd"],key:"m"},Windows:{modifiers:["ctrl"],key:"m"}},UpdateModel:{macOS:{modifiers:["cmd"],key:"u"},Windows:{modifiers:["ctrl"],key:"u"}},OpenLibrary:{macOS:{modifiers:["cmd"],key:"l"},Windows:{modifiers:["ctrl"],key:"l"}}};var fe=require("@raycast/api");var at=Ve(require("react"));var eu=`How many the model need to stay in memory, by default 5 minutes. Can be configured as follow:
- 0s, memory is free when inference is done.
- -1s, model remains on memory permanently.
- 5s, memory is free after 5 seconds of idle.
- 5m, memory is free after 5 minutes of idle.
- 5h, memory is free after 5 hours of idle.
- 5.5h, memory is free after 5 hours and 30 minutes of idle.`;function tu(t,e){if(t){if(!e)return"The item is required";if(!e.match(/^-{0,1}(?:[0-9]+(?:\.{0,1}[0-9]+){0,1}(?:h|m|s|ms|us|ns){1})$/g))return"Wrong Format"}}var ie=require("react/jsx-runtime");function a$(t){let{data:e,isLoading:r}=Ga(ky,[],{onData:x=>{t.Chat!==void 0&&(x.has(t.Chat.models.main.server_name)&&(S("serverMain",t.Chat.models.main.server_name),x.get(t.Chat.models.main.server_name).filter(F=>F.capabilities&&F.capabilities.findIndex(we=>we==="completion")!==-1).filter(F=>F.name===t.Chat?.models.main.tag).length>0&&S("modelMain",t.Chat.models.main.tag)),t.Chat.models.vision&&x.has(t.Chat.models.vision.server_name)&&(S("serverVision",t.Chat.models.vision.server_name),x.get(t.Chat.models.vision.server_name).filter(F=>F.capabilities&&F.capabilities.findIndex(we=>we==="vision")!==-1).filter(F=>F.name===t.Chat?.models.vision?.tag).length>0&&S("modelVision",t.Chat.models.vision.tag)),t.Chat.models.tools&&x.has(t.Chat.models.tools.server_name)&&(S("serverTools",t.Chat.models.tools.server_name),x.get(t.Chat.models.tools.server_name).filter(F=>F.capabilities&&F.capabilities.findIndex(we=>we==="tools")!==-1).filter(F=>F.name===t.Chat?.models.tools?.tag).length>0&&S("modelTools",t.Chat.models.tools.tag)))}}),{value:n,isLoading:s}=bg("mcp_server_config",{mcpServers:{}}),[a,i]=at.useState(!!(t.Chat&&t.Chat.models.main.keep_alive)),[c,u]=at.useState(!!t.Chat?.models.vision),[d,f]=at.useState(!!(t.Chat?.models.vision&&t.Chat.models.vision.keep_alive)),[m,b]=at.useState(!!t.Chat?.models.tools),[y,g]=at.useState(!!(t.Chat?.models.tools&&t.Chat.models.tools.keep_alive)),{handleSubmit:_,itemProps:w,setValue:S}=rc({onSubmit(x){Ce(x)},initialValues:{keepAliveMain:t.Chat?.models.main.keep_alive?t.Chat.models.main.keep_alive:"5m",keepAliveVision:t.Chat?.models.vision?.keep_alive?t.Chat.models.vision.keep_alive:"5m",keepAliveTools:t.Chat?.models.tools?.keep_alive?t.Chat.models.tools.keep_alive:"5m"},validation:{serverMain:Dr.Required,modelMain:Dr.Required,keepAliveMain:x=>tu(a,x),serverVision:c?Dr.Required:void 0,modelVision:c?Dr.Required:void 0,keepAliveVision:x=>tu(d,x),serverTools:m?Dr.Required:void 0,modelTools:m?Dr.Required:void 0,keepAliveTools:x=>tu(y,x)}});at.useEffect(()=>{c||f(!1)},[c]),at.useEffect(()=>{t.Chat?.mcp_server&&!s&&n&&S("mcp_server",t.Chat.mcp_server.filter(x=>Object.keys(n.mcpServers).findIndex(q=>x===q)!==-1))},[n,s]);let T="Ollama Server.",P="Ollama Model.",R="Use a different model for vision when you multimodal capabilities is required.",k="Use a different model for tools when tool calling is required.",N='Server can be configured with "Manage Mcp Server" Command. A model with tools capabilities is required.',ce=(0,ie.jsxs)(fe.ActionPanel,{children:[(0,ie.jsx)(fe.Action.SubmitForm,{onSubmit:_}),(0,ie.jsx)(fe.Action,{title:"Close",icon:fe.Icon.Xmark,onAction:()=>t.SetShow(!1)})]});async function Ce(x){let q=new Map;q.set(x.serverMain,await Fs(x.serverMain)),x.serverVision&&!q.has(x.serverVision)&&q.set(x.serverVision,await Fs(x.serverVision)),x.serverTools&&!q.has(x.serverTools)&&q.set(x.serverTools,await Fs(x.serverTools));let F=t.Chat;F&&t.ChatNameIndex!==void 0?(F.models.main={server_name:x.serverMain,server:q.get(x.serverMain),tag:x.modelMain,keep_alive:a?x.keepAliveMain:void 0},x.serverVision&&x.modelVision?F.models.vision={server_name:x.serverVision,server:q.get(x.serverVision),tag:x.modelVision,keep_alive:d?x.keepAliveVision:void 0}:!c&&F.models.vision&&(F.models.vision=void 0),x.serverTools&&x.modelTools?F.models.tools={server_name:x.serverTools,server:q.get(x.serverTools),tag:x.modelTools,keep_alive:y?x.keepAliveTools:void 0}:!m&&F.models.tools&&(F.models.tools=void 0),x.mcp_server.length>0?F.mcp_server=x.mcp_server:F.mcp_server=void 0,await nc().catch(()=>{})||(F.name="New Chat",F.messages=[]),await Us(t.ChatNameIndex,F).catch(async()=>{await Ka(F),await t.revalidate()})):(F={name:"New Chat",models:{main:{server_name:x.serverMain,server:q.get(x.serverMain),tag:x.modelMain,keep_alive:a?x.keepAliveMain:void 0},vision:c&&x.serverVision&&x.modelVision?{server_name:x.serverVision,server:q.get(x.serverVision),tag:x.modelVision,keep_alive:d?x.keepAliveVision:void 0}:void 0,tools:m&&x.serverTools&&x.modelTools?{server_name:x.serverTools,server:q.get(x.serverTools),tag:x.modelTools,keep_alive:y?x.keepAliveTools:void 0}:void 0},messages:[],mcp_server:x.mcp_server.length>0?x.mcp_server:void 0},await Ka(F),await t.revalidate()),t.SetChat(F),t.SetChatModelsAvailable(!0),t.SetShow(!1)}return(0,ie.jsxs)(fe.Form,{actions:ce,isLoading:r,children:[!r&&e&&w&&(0,ie.jsxs)(at.Fragment,{children:[(0,ie.jsx)(fe.Form.Dropdown,{title:"Server",info:T,...w.serverMain,children:[...e.keys()].sort().map(x=>(0,ie.jsx)(fe.Form.Dropdown.Item,{title:x,value:x},x))}),(0,ie.jsx)(fe.Form.Dropdown,{title:"Model",info:P,...w.modelMain,children:w.serverMain.value&&e.get(w.serverMain.value).filter(x=>x.capabilities&&x.capabilities.findIndex(q=>q==="completion")!==-1).sort().map(x=>(0,ie.jsx)(fe.Form.Dropdown.Item,{title:x.name,value:x.name},x.name))}),(0,ie.jsx)(fe.Form.Checkbox,{id:"advancedMain",label:"Advanced Settings",defaultValue:a,onChange:i})]}),a&&(0,ie.jsx)(fe.Form.TextField,{title:"Keep Alive",info:eu,...w.keepAliveMain}),!r&&e&&(0,ie.jsxs)(at.Fragment,{children:[(0,ie.jsx)(fe.Form.Separator,{}),(0,ie.jsx)(fe.Form.Checkbox,{id:"vision",info:R,title:"Vision",label:"Use Different Model",defaultValue:c,onChange:u})]}),!r&&e&&w&&c&&(0,ie.jsxs)(at.Fragment,{children:[(0,ie.jsx)(fe.Form.Dropdown,{title:"Server",info:T,...w.serverVision,children:[...e.keys()].sort().map(x=>(0,ie.jsx)(fe.Form.Dropdown.Item,{title:x,value:x},x))}),(0,ie.jsx)(fe.Form.Dropdown,{title:"Model",info:P,...w.modelVision,children:w.serverVision.value&&e.get(w.serverVision.value).filter(x=>x.capabilities&&x.capabilities.findIndex(q=>q==="vision")!==-1).sort().map(x=>(0,ie.jsx)(fe.Form.Dropdown.Item,{title:x.name,value:x.name},x.name))}),(0,ie.jsx)(fe.Form.Checkbox,{id:"advancedVision",label:"Advanced Settings",defaultValue:d,onChange:f})]}),d&&(0,ie.jsx)(fe.Form.TextField,{title:"Keep Alive",info:eu,...w.keepAliveVision}),!r&&e&&(0,ie.jsxs)(at.Fragment,{children:[(0,ie.jsx)(fe.Form.Separator,{}),(0,ie.jsx)(fe.Form.Checkbox,{id:"tools",info:k,title:"Tools",label:"Use Different Model",defaultValue:m,onChange:b})]}),!r&&e&&w&&m&&(0,ie.jsxs)(at.Fragment,{children:[(0,ie.jsx)(fe.Form.Dropdown,{title:"Server",info:T,...w.serverTools,children:[...e.keys()].sort().map(x=>(0,ie.jsx)(fe.Form.Dropdown.Item,{title:x,value:x},x))}),(0,ie.jsx)(fe.Form.Dropdown,{title:"Model",info:P,...w.modelTools,children:w.serverTools.value&&e.get(w.serverTools.value).filter(x=>x.capabilities&&x.capabilities.findIndex(q=>q==="tools")!==-1).sort().map(x=>(0,ie.jsx)(fe.Form.Dropdown.Item,{title:x.name,value:x.name},x.name))}),(0,ie.jsx)(fe.Form.Checkbox,{id:"advancedTools",label:"Advanced Settings",defaultValue:y,onChange:g})]}),y&&(0,ie.jsx)(fe.Form.TextField,{title:"Keep Alive",info:eu,...w.keepAliveTools}),n&&!s&&(0,ie.jsxs)(at.Fragment,{children:[(0,ie.jsx)(fe.Form.Separator,{}),(0,ie.jsx)(fe.Form.TagPicker,{title:"Mcp Server",info:N,...w.mcp_server,children:Object.keys(n.mcpServers).map(x=>(0,ie.jsx)(fe.Form.TagPicker.Item,{value:x,title:x,icon:fe.Icon.WrenchScrewdriver}))})]})]})}var Ir=require("@raycast/api");var Ts=require("react/jsx-runtime");function i$(t){let{handleSubmit:e,itemProps:r}=rc({onSubmit(i){a(i)},initialValues:{name:t.Chat.name},validation:{name:Dr.Required}}),n="Chat Name",s=(0,Ts.jsxs)(Ir.ActionPanel,{children:[(0,Ts.jsx)(Ir.Action.SubmitForm,{onSubmit:e}),(0,Ts.jsx)(Ir.Action,{title:"Close",icon:Ir.Icon.Xmark,onAction:()=>t.SetShow(!1)})]});async function a(i){t.Chat.name=i.name,t.SetChat(t.Chat),await Us(t.ChatNameIndex,t.Chat),await t.revalidate(),t.SetShow(!1)}return(0,Ts.jsx)(Ir.Form,{actions:s,children:(0,Ts.jsx)(Ir.Form.TextField,{title:"Name",info:n,...r.name})})}var H=require("react/jsx-runtime");function o$(){let{data:t,revalidate:e,isLoading:r}=Ga(nc,[],{onError:()=>N(!0)}),[n,s]=ht.useState(0),[a,i]=ht.useState(),[c,u]=ht.useState(0),[d,f]=ht.useState(!1),[m,b]=ht.useState(!1),[y,g]=ht.useState(""),[_,w]=ht.useState(!1),[S,T]=ht.useState();ht.useEffect(()=>{!m&&a&&a.messages.length>0&&a.messages[a.messages.length-1].done&&(g(""),b(!1),S&&T(void 0),a.messages.length===1&&a.name==="New Chat"&&i(x=>{if(x){let q=`${x.messages[0].messages[0].content.substring(0,25)}...`;return t&&(t[n]=q),{...x,name:q}}}),Us(n,a))},[a,m]),ht.useEffect(()=>{if(t){if(n>t.length-1){s(t.length-1);return}tp(n,i,f,N)}},[t,n]),ht.useEffect(()=>{a&&a.messages.length-1!==c&&u(a.messages.length-1)},[c,a]);let[P,R]=ht.useState(!1),[k,N]=ht.useState(!1);function ce(x){return(0,H.jsxs)(j.ActionPanel,{children:[!m&&y&&a&&d&&(0,H.jsx)(j.Action,{title:"Get Answer",icon:j.Icon.SpeechBubbleActive,onAction:()=>{s$(y,S,a,i,b).catch(async q=>{await(0,j.showToast)({style:j.Toast.Style.Failure,title:"Error:",message:q.message}),b(!1)})}}),!r&&!d&&(0,H.jsx)(j.Action,{title:"Reload",icon:j.Icon.Repeat,onAction:async()=>await tp(n,i,f,N)}),(0,H.jsxs)(j.ActionPanel.Section,{title:"Chat",children:[x.message&&(0,H.jsx)(j.Action.CopyToClipboard,{title:"Copy Question",content:x.message.messages[0].content,shortcut:mr.CopyName}),x.message&&(0,H.jsx)(j.Action.CopyToClipboard,{title:"Copy Answer",content:x.message.messages[1].content,shortcut:mr.Copy}),x.message&&(0,H.jsx)(j.Action.CopyToClipboard,{title:"Copy Conversation",content:r$(a)}),a&&(0,H.jsx)(j.Action,{title:"New Chat",icon:j.Icon.NewDocument,onAction:()=>t$(a,s,e),shortcut:mr.New}),a&&(0,H.jsx)(j.Action,{title:"Rename Chat",icon:j.Icon.Pencil,onAction:()=>R(!0),shortcut:mr.Edit}),a&&(0,H.jsxs)(j.ActionPanel.Submenu,{title:"Delete Chat",icon:j.Icon.Trash,shortcut:mr.Remove,children:[(0,H.jsx)(j.Action,{title:`Yes, Delete "${a.name}" Chat`,icon:j.Icon.Trash,onAction:()=>{Sg(n).then(()=>{e()})}}),(0,H.jsx)(j.Action,{title:"No",icon:j.Icon.XMarkCircle})]})]}),a&&!m&&(0,H.jsxs)(j.ActionPanel.Section,{title:"Attach",children:[(0,H.jsx)(j.Action,{title:"Selection",icon:j.Icon.QuoteBlock,onAction:()=>g(q=>q+=`
{selection}
`),shortcut:mr.AttachText}),(0,H.jsx)(j.Action,{title:"Browser Extention Tab",icon:j.Icon.Globe,onAction:()=>g(q=>q+=`
{browser-tab}
`),shortcut:mr.AttachBrowserTab}),(0,H.jsx)(j.Action,{title:"Image From Clipboard",icon:j.Icon.Image,onAction:async()=>Ry().then(q=>{T(q),(0,j.showToast)({style:j.Toast.Style.Success,title:"Image Added"})}).catch(q=>{(0,j.showToast)({style:j.Toast.Style.Failure,title:"Error: ",message:String(q)})}),shortcut:mr.AttachImage})]}),(0,H.jsxs)(j.ActionPanel.Section,{title:"Settings",children:[a&&(0,H.jsx)(j.Action,{title:"Change Model",icon:j.Icon.Box,onAction:()=>N(!0),shortcut:mr.ChangeModel}),x.message&&(0,H.jsx)(j.Action,{title:_?"Hide Metadata":"Show Metadata",icon:_?j.Icon.EyeDisabled:j.Icon.Eye,shortcut:mr.ToggleQuickLook,onAction:()=>w(q=>!q)})]})]})}function Ce(x){return(0,H.jsxs)(j.Detail.Metadata,{children:[(0,H.jsx)(j.Detail.Metadata.Label,{title:"Model",text:x.message.model}),(0,H.jsx)(j.Detail.Metadata.Separator,{}),x.message.tools&&(0,H.jsx)(j.Detail.Metadata.TagList,{title:"Tools",children:x.message.tools.map(q=>(0,H.jsx)(j.Detail.Metadata.TagList.Item,{text:`${q.server} - ${q.function}()`},`${q.server}-${q.function}`))}),x.message.files&&x.message.files.length>0&&(0,H.jsx)(j.Detail.Metadata.TagList,{title:"Sources",children:x.message.files.map(q=>(0,H.jsx)(j.Detail.Metadata.TagList.Item,{text:q}))}),x.message.eval_count&&x.message.eval_duration&&(0,H.jsx)(j.Detail.Metadata.Label,{title:"Generation Speed",text:`${(x.message.eval_count/(x.message.eval_duration/1e9)).toFixed(2)} token/s`}),x.message.total_duration&&(0,H.jsx)(j.Detail.Metadata.Label,{title:"Total Inference Duration",text:`${(x.message.total_duration/1e9).toFixed(2)}s`}),x.message.load_duration&&(0,H.jsx)(j.Detail.Metadata.Label,{title:"Load Duration",text:`${(x.message.load_duration/1e9).toFixed(2)}s`}),x.message.prompt_eval_count&&(0,H.jsx)(j.Detail.Metadata.Label,{title:"Prompt Eval Count",text:`${x.message.prompt_eval_count}`}),x.message.prompt_eval_duration&&(0,H.jsx)(j.Detail.Metadata.Label,{title:"Prompt Eval Duration",text:`${(x.message.prompt_eval_duration/1e9).toFixed(2)}s`}),x.message.eval_count&&(0,H.jsx)(j.Detail.Metadata.Label,{title:"Eval Count",text:`${x.message.eval_count}`}),x.message.eval_duration&&(0,H.jsx)(j.Detail.Metadata.Label,{title:"Eval Duration",text:`${(x.message.eval_duration/1e9).toFixed(2)}s`})]})}return k?(0,H.jsx)(a$,{SetChat:i,SetChatModelsAvailable:f,SetShow:N,Chat:a,ChatNameIndex:n,revalidate:e}):P&&a?(0,H.jsx)(i$,{SetChat:i,SetShow:R,Chat:a,ChatNameIndex:n,revalidate:e}):(0,H.jsx)(j.List,{isLoading:m||r,searchBarPlaceholder:"Ask...",searchText:y,selectedItemId:String(c),onSearchTextChange:x=>{m||g(x)},actions:!r&&(0,H.jsx)(ce,{}),isShowingDetail:a&&a.messages.length>0,searchBarAccessory:!r&&t&&!m?(0,H.jsx)(j.List.Dropdown,{tooltip:"Chat History",value:String(n),onChange:x=>s(Number(x)),children:t.map((x,q)=>(0,H.jsx)(j.List.Dropdown.Item,{title:x,value:String(q)},q))}):void 0,children:a&&a.messages.length>0?a.messages.map((x,q)=>(0,H.jsx)(j.List.Item,{icon:x.done?j.Icon.SpeechBubble:j.Icon.SpeechBubbleActive,title:x.messages[0].content,id:q.toString(),actions:(0,H.jsx)(ce,{message:x}),detail:(0,H.jsx)(j.List.Item.Detail,{markdown:`${x.images?`${x.images.map(F=>F.html)}
`:""}${x.messages[1].content}`,metadata:x.done&&_&&(0,H.jsx)(Ce,{message:x})})},q)):d?(0,H.jsx)(j.List.EmptyView,{icon:j.Icon.Message,title:"Start a Conversation with Ollama"}):(0,H.jsx)(j.List.EmptyView,{icon:j.Icon.Xmark,title:"Ollama Server or Selected Model Unavailable."})})}var u$=require("react/jsx-runtime"),aM=(0,c$.getPreferenceValues)();aM.ollamaCertificateValidation||(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0");function l$(){return(0,u$.jsx)(o$,{})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
